import{E as ae,M as be,c0 as Ge,O as me,aF as xe,aE as L,R as ve,S as r,t as Ke,_ as U,Z as d,aH as w,c1 as Ye,al as te,aK as M,ap as V,c2 as He,aQ as Fe,V as ne,W as ue,aU as m,$ as S,U as ge,aI as le,X as B,ak as E,ao as ce,Y as K,l as We,aP as Ze,bJ as Xe,c3 as Qe,an as Je,m as et,a_ as tt,a$ as at,b1 as we,D as lt,b2 as st,aw as Y,aZ as rt,av as de,bb as it,bq as ot,aV as nt,aW as ut,bo as ye,bA as ke,ar as dt,c4 as ct,bi as mt,c5 as vt,h as v,c6 as Te,Q as Se,s as Ve,r as pe,a0 as ht,p as ft,a7 as Le,c7 as pt,i as Ee,c8 as bt,au as gt,K as Z,b7 as Be,b8 as yt,c9 as kt,ba as St,ca as _t,bj as Ct,aD as Ie,az as wt}from"./admin-drawer-panel-BxoNUHQr.js";import{C as Tt,u as X,A as Vt,g as Bt,e as It,i as Pt}from"./main-Dy9Uqpmh.js";import{c as Mt,d as Nt,V as Rt}from"./VSelect-DgfIKRnC.js";import{c as Ft}from"./to-case-CR9beRR0.js";import{P as Lt}from"./unauthorized-Bs7NSqea.js";import{V as Et}from"./VDialog-X0zn9AGX.js";import{m as Dt,a as At,u as Ot,V as Pe,b as jt}from"./VSelectionControl-CGu0oz0K.js";import{a as $t}from"./settings-drawer-7iTnAdjf.js";const zt=ae({...be(),...Ge({variant:"text"})},"VToolbarItems"),Vl=me()({name:"VToolbarItems",props:zt(),setup(e,t){let{slots:a}=t;return xe({VBtn:{color:L(e,"color"),height:"inherit",variant:L(e,"variant")}}),ve(()=>{var i;return r("div",{class:["v-toolbar-items",e.class],style:e.style},[(i=a.default)==null?void 0:i.call(a)])}),{}}}),Ut={p:"publisher",i:"imprint",s:"series",v:"volume",a:"story-arc",f:"folder",c:"missing-cover"},qt=(e,t)=>{let a;if(t!=null&&t.pk)a=`${Ke(t.pk)}/cover.webp?ts=${t.mtime}`,e&&(a+=`&group=${e}`),t!=null&&t.custom&&(a+="&custom=1");else{const i=Ut[e];a=window.CODEX.STATIC+"img/"+i+".svg"}return a},Gt={name:"BookCover",props:{group:{type:String,required:!0},childCount:{type:Number,default:1},finished:{type:Boolean},cover:{type:Object,required:!0},multiGroup:{type:Boolean,required:!0}},data(){return{showPlaceholder:!1}},computed:{coverSrc(){return qt(this.group,this.cover)},childCountClasses(){return{childCount:!0,multiGroup:this.multiGroup}}},mounted:function(){this.delayPlaceholder()},methods:{delayPlaceholder:function(){setTimeout(()=>{this.showPlaceholder=!0},2e3)}}},xt={class:"bookCover"};function Kt(e,t,a,i,o,l){return d(),w("div",xt,[r(Ye,{src:l.coverSrc,class:"coverImg"},null,8,["src"]),a.finished!==!0?(d(),w("div",{key:0,class:te({unreadFlag:!0,mixedreadFlag:a.finished===null})},null,2)):M("",!0),a.group!=="c"?(d(),w("span",{key:1,class:te(l.childCountClasses)},V(a.childCount),3)):M("",!0)])}const Yt=U(Gt,[["render",Kt],["__scopeId","data-v-fd82203d"]]),Ht=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],Wt=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],Zt=["b","kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],Xt=["b","kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],Me=(e,t,a)=>{let i=e;return typeof t=="string"||Array.isArray(t)?i=e.toLocaleString(t,a):(t===!0||a!==void 0)&&(i=e.toLocaleString(void 0,a)),i};function Qt(e,t){if(!Number.isFinite(e))throw new TypeError(`Expected a finite number, got ${typeof e}: ${e}`);t={bits:!1,binary:!1,space:!0,...t};const a=t.bits?t.binary?Xt:Zt:t.binary?Wt:Ht,i=t.space?" ":"";if(t.signed&&e===0)return` 0${i}${a[0]}`;const o=e<0,l=o?"-":t.signed?"+":"";o&&(e=-e);let n;if(t.minimumFractionDigits!==void 0&&(n={minimumFractionDigits:t.minimumFractionDigits}),t.maximumFractionDigits!==void 0&&(n={maximumFractionDigits:t.maximumFractionDigits,...n}),e<1){const I=Me(e,t.locale,n);return l+I+i+a[0]}const s=Math.min(Math.floor(t.binary?Math.log(e)/Math.log(1024):Math.log10(e)/3),a.length-1);e/=(t.binary?1024:1e3)**s,n||(e=e.toPrecision(3));const c=Me(Number(e),t.locale,n),h=a[s];return l+c+i+h}const Ne=Tt.browser.vuetifyNullCode,Jt=new Set(["",Ne,Ne.toString(),void 0]),ea=function(e){let t;return e===void 0?t=e:e instanceof Object?t={value:e.pk,title:e.name}:t={value:e,title:e.toString()},e.url&&(t.url=e.url),t},ta=function(e,t){return e.title<t.title?-1:e.title>t.title?1:0},aa=function(e,t){return Number.parseFloat(e.title)-Number.parseFloat(t.title)},la=function(e,t,a=!1){const i=e||[],o=t&&t.toLowerCase();let l=[];for(const s of i){if(!s||Jt.has(s.pk))continue;const c=ea(s);c&&(!o||c.title&&c.title.toLowerCase().includes(o))&&l.push(c)}const n=a?aa:ta;return l.sort(n)},sa={name:"MetadataTags",props:{label:{type:String,required:!0},values:{type:Array,default(){return[]}},filter:{type:String,required:!1,default:void 0}},data(){return{mdiFilter:He,mdiOpenInNew:Fe}},computed:{...ne(X,{filterValues(e){const t=this.filter||this.label.toLowerCase();return e.settings.filters[t]},topGroup:e=>e.settings.topGroup}),model(){return la(this.values)},chipClass(e){return{browseChip:this.filter&&e}}},methods:{...ue(X,["setSettings"]),chipColor(e){return this.filterValues&&this.filterValues.includes(e)?this.$vuetify.theme.current.colors["primary-darken-1"]:""},onClick(e){if(!this.filter||!e)return;const t=["f","s"].includes(this.topGroup)?this.topGroup:"r",a=t==="s"&&this.filter==="storyArcs";if(!a){const n={filters:{[this.filter]:[e]}};this.setSettings(n)}const l={name:"browser",params:{group:t,pk:a?e:0,page:1}};this.$router.push(l)}}},ra={key:0,class:"tags"},ia={class:"chipGroupLabel"},oa=["href"];function na(e,t,a,i,o,l){return l.model&&l.model.length>0?(d(),w("div",ra,[m("div",ia,V(a.label),1),r(Nt,{column:!0,multiple:"",value:l.model},{default:S(()=>[(d(!0),w(ge,null,le(l.model,n=>(d(),B(Mt,{key:`${a.label}/${n.value}`,color:l.chipColor(n.value),value:n.value,onClick:s=>l.onClick(n.value)},{default:S(()=>[n.url?(d(),w("a",{key:0,href:n.url,target:"_blank"},[E(V(n.title),1),r(ce,null,{default:S(()=>[E(V(o.mdiOpenInNew),1)]),_:1})],8,oa)):(d(),w("span",{key:1,class:te(l.chipClass)},V(n.title),3))]),_:2},1032,["color","value","onClick"]))),128))]),_:1},8,["value"])])):M("",!0)}const De=U(sa,[["render",na],["__scopeId","data-v-ea0e4633"]]),ua={name:"MetadataContributorsTable",components:{MetadataTags:De},props:{value:{type:Array,default:void 0}},computed:{contributorsDict(){const e={};if(!this.value)return e;for(const{role:i,person:o}of this.value){const l=Ft(i.name)+"s";e[l]||(e[l]=[]),e[l].push(o)}const t=Object.keys(e).sort((i,o)=>i.localeCompare(o)),a={};for(const i of t)a[i]=e[i].sort((o,l)=>o.name.localeCompare(l.name));return a}}},da={key:0},ca=m("h3",null,"Contributors",-1);function ma(e,t,a,i,o,l){const n=K("MetadataTags");return Object.keys(l.contributorsDict).length>0?(d(),w("div",da,[ca,(d(!0),w(ge,null,le(Object.entries(l.contributorsDict),([s,c])=>(d(),B(n,{key:s,values:c,label:s,filter:"contributors"},null,8,["values","label"]))),128))])):M("",!0)}const va=U(ua,[["render",ma]]),ha={name:"MetadataTextBox",props:{label:{type:String,required:!0},value:{type:[Object,String,Number,Boolean],default:void 0},link:{type:[Boolean,String],default:!1},group:{type:String,default:""},obj:{type:Object,default:void 0}},data(){return{mdiOpenInNew:Fe}},computed:{computedValue(){return this.value!=null&&this.value instanceof Object?this.value.name:this.value},linkValue(){return this.link===!0?this.computedValue:this.link?this.link:!1},highlight(){var e;return((e=this.obj)==null?void 0:e.group)===this.group},pathArray(){if(this.computedValue)return this.computedValue.split("/")},folderPath(){if(this.pathArray)return this.pathArray.slice(0,-1).join("/")},basePath(){if(this.pathArray)return this.pathArray.at(-1)},groupTo(){var o;const e=X();if(this.group!=="f"&&!e.settings.show[this.group]||this.group==="f"&&!e.page.adminFlags.folderView)return;const a=(((o=this.obj)==null?void 0:o.group)==this.group?this.obj.ids:[this.value.pk]).join(",");if(!a)return;const i=this.$router.currentRoute.value.params;if(!(i.group===this.group&&i.pks===a))return{name:"browser",params:{group:this.group,pks:a}}}}},fa={class:"textLabel"},pa={class:"textValue"},ba=["href"],ga={key:3,class:"textContent"},ya={key:4,id:"basePath"};function ka(e,t,a,i,o,l){const n=K("router-link");return l.computedValue?(d(),w("div",{key:0,class:te(["text",{highlight:l.highlight}])},[m("div",fa,V(a.label),1),m("div",pa,[l.groupTo&&a.group==="f"?(d(),B(n,{key:0,id:"folderPath",to:l.groupTo,title:"Browse Folder"},{default:S(()=>[E(V(l.folderPath)+"/ ",1)]),_:1},8,["to"])):l.groupTo?(d(),B(n,{key:1,class:"textContent",to:l.groupTo,title:`Browse ${a.label}`},{default:S(()=>[E(V(l.computedValue),1)]),_:1},8,["to","title"])):a.link?(d(),w("a",{key:2,href:l.linkValue,target:"_blank"},[E(V(l.computedValue)+" ",1),r(ce,{size:"small"},{default:S(()=>[E(V(o.mdiOpenInNew),1)]),_:1})],8,ba)):(d(),w("div",ga,V(l.computedValue),1)),l.groupTo&&a.group==="f"?(d(),w("span",ya,V(l.basePath),1)):M("",!0)])],2)):M("",!0)}const Sa=U(ha,[["render",ka],["__scopeId","data-v-e94baf62"]]),Ae=new Set("rtl","btt");Object.freeze(Ae);const _a=({ids:e,page:t,readingDirection:a,pageCount:i},o)=>{if(e.length<1||o&&!i)return;const l=e[0];if(t)t=Number(t);else if(Ae.has(a)){const n=Number(i)-1;t=Math.max(n,0)}else t=0;return{name:"reader",params:{pk:l,page:t}}},Re=We("metadata",{state:()=>({md:void 0}),actions:{async loadMetadata({group:e,pks:t}){const a=X();await Vt.getMetadata({group:e,pks:t},a.settings).then(i=>{const o={...i.data};return o.loaded=!0,this.md=o,!0}).catch(i=>{console.error(i),this.clearMetadata()})},clearMetadata(){this.md=void 0}}}),Ca=1160,wa=.05,Ta=250,Va={name:"MetadataButton",components:{BookCover:Yt,CloseButton:Ze,MetadataContributorsTable:va,MetadataTags:De,MetadataText:Sa,PlaceholderLoading:Lt},props:{group:{type:String,required:!0},book:{type:Object,required:!0},children:{type:Number,default:1},toolbar:{type:Boolean,default:!1}},data(){return{mdiDownload:Xe,mdiTagOutline:Qe,dialog:!1,progress:0}},computed:{...Je(et,["isUserAdmin"]),...ne(X,{twentyFourHourTime:e=>{var t;return(t=e.settings)==null?void 0:t.twentyFourHourTime},readingDirectionTitles:e=>e.choices.static.readingDirection,identifierTypes:e=>e.choices.static.identifierType,importMetadata:e=>{var t,a;return(a=(t=e.page)==null?void 0:t.adminFlags)==null?void 0:a.importMetadata}}),...ne(Re,{md:e=>e.md}),...ne(X,{q:e=>e.settings.q}),showContainer(){var e;return((e=this.md)==null?void 0:e.loaded)||!1},downloadFileName(){var t;const e=this.md;return e?(t=this.md)!=null&&t.filename?e.filename:Bt({seriesName:e.series.name||"",volumeName:e.volume.name||"",issueNumber:e.issueNumber,issueSuffix:e.issueSuffix})+"."+this.fileType.toLowerCase():"Unknown.cbz"},buttonVariant(){return this.toolbar?"plain":"text"},downloadURL(){return this.book?It(this.book):""},isReadButtonShown(){return this.group==="c"&&this.$route.name!="reader"},isReadButtonEnabled(){return!!this.readerRoute},readButtonIcon(){return this.isReadButtonEnabled?tt:at},readerRoute(){var e;return(e=this.md)!=null&&e.ids?_a(this.md,this.importMetadata):{}},formattedIssue(){if(!this.md)return"Unknown";if(!((this.md.issueNumber===null||this.md.issueNumber===void 0)&&!this.md.issueSuffix))return Pt(this.md)},readingDirectionText(){return this.md?this.readingDirectionTitles[this.md.readingDirection]:"Unknown"},pages(){let e="";if(!this.md)return e;if(this.md.page){const a=we.format(this.md.page);e+=`Read ${a} of `}const t=we.format(this.md.pageCount);return e+=`${t} pages`,this.md.progress>0&&(e+=` (${Math.round(this.md.progress)}%)`),e},size(){var e;return((e=this==null?void 0:this.md)==null?void 0:e.size)>0?Qt(this.md.size):0},fileType(){var e;return((e=this==null?void 0:this.md)==null?void 0:e.fileType)||"Unknown"},titledIdentifiers(){var t;const e=[];if(!((t=this==null?void 0:this.md)!=null&&t.identifiers))return e;for(const a of this.md.identifiers){const i=a.name.split(":"),o=i[0],l=i[1],n=this.identifierTypeTitle(o);let s="";n&&n!=="None"&&(s+=n+":"),s+=l,e.push({...a,name:s})}return e},multiGroup(){var e;return(e=this.md)!=null&&e.ids?this.md.ids.length>1:!1}},watch:{dialog(e){e?this.dialogOpened():this.clearMetadata()}},methods:{...ue(Re,["clearMetadata","loadMetadata"]),...ue(lt,["downloadIOSPWAFix"]),...ue(X,["identifierTypeTitle"]),dialogOpened(){const e=this.book.ids?this.book.ids:[this.book.pk],t={group:this.group,pks:e};this.loadMetadata(t),this.startProgress()},startProgress(){this.startTime=Date.now(),this.estimatedMS=Math.max(wa,this.children/Ca)*1e3,this.updateProgress()},updateProgress(){const e=Date.now()-this.startTime;this.progress=e/this.estimatedMS*100,!(this.progress>=100||this.md)&&setTimeout(()=>{this.updateProgress()},Ta)},formatDateTime(e){return st(e,this.twentyFourHourTime)},download(){this.downloadIOSPWAFix(this.downloadURL,this.md.filename)}}},Ba=e=>(nt("data-v-5eca62dc"),e=e(),ut(),e),Ia={id:"metadataHeader"},Pa={id:"metadataBookCoverWrapper"},Ma={class:"inlineRow"},Na={class:"inlineRow"},Ra={class:"inlineRow"},Fa={key:1,class:"inlineRow"},La={id:"metadataBody"},Ea={class:"mdSection"},Da={class:"quintRow"},Aa={class:"mdSection"},Oa={class:"quarterRow"},ja={class:"lastSmallRow"},$a={class:"halfRow mdSection"},za={class:"mdSection"},Ua={class:"mdSection"},qa={class:"mdSection"},Ga={class:"mdSection"},xa={class:"mdSection"},Ka={class:"mdSection inlineRow"},Ya={class:"inlineRow"},Ha={id:"footerLinks"},Wa={id:"bottomRightButtons"},Za={key:1,id:"placeholderContainer"},Xa=Ba(()=>m("div",{id:"placeholderTitle"},"Tags Loading",-1));function Qa(e,t,a,i,o,l){const n=K("CloseButton"),s=K("MetadataText"),c=K("BookCover"),h=K("MetadataTags"),I=K("MetadataContributorsTable"),k=K("PlaceholderLoading");return d(),B(Et,{modelValue:o.dialog,"onUpdate:modelValue":t[5]||(t[5]=p=>o.dialog=p),fullscreen:"",transition:"dialog-bottom-transition"},{activator:S(({props:p})=>[r(de,Y({"aria-label":"tags",class:"tagButton cardControlButton",variant:l.buttonVariant,icon:o.mdiTagOutline,title:"Tags"},p,{onClick:t[0]||(t[0]=rt(()=>{},["prevent"]))}),null,16,["variant","icon"])]),default:S(()=>[l.showContainer?(d(),w("div",{key:0,id:"metadataContainer",onKeyup:t[3]||(t[3]=ot(p=>o.dialog=!1,["esc"]))},[m("header",Ia,[r(n,{class:"closeButton",title:"Close Metadata (esc)",onClick:t[1]||(t[1]=p=>o.dialog=!1)}),e.q?(d(),B(s,{key:0,id:"search",value:e.q,label:"Search Query",highlight:!0},null,8,["value"])):M("",!0),m("div",Pa,[r(c,{id:"bookCover",cover:e.md.cover,group:a.group,"child-count":e.md.childCount,finished:e.md.finished,"multi-group":l.multiGroup},null,8,["cover","group","child-count","finished","multi-group"]),r(it,{class:"bookCoverProgress","model-value":e.md.progress,rounded:"","background-color":"inherit",height:"2","aria-label":"% read"},null,8,["model-value"])]),m("div",Ma,[r(s,{id:"publisher",value:e.md.publisher,group:"p",label:"Publisher",obj:{ids:e.md.ids,group:e.md.group}},null,8,["value","obj"]),r(s,{id:"imprint",value:e.md.imprint,group:"i",label:"Imprint",obj:{ids:e.md.ids,group:e.md.group}},null,8,["value","obj"])]),m("div",Na,[r(s,{id:"series",value:e.md.series,label:"Series",group:"s",obj:{ids:e.md.ids,group:e.md.group}},null,8,["value","obj"])]),m("div",Ra,[r(s,{id:"volume",value:e.md.volume,label:"Volume",group:"v",obj:{ids:e.md.ids,group:e.md.group}},null,8,["value","obj"]),r(s,{value:e.md.seriesVolumeCount,label:"Volume Count"},null,8,["value"]),r(s,{id:"issue",value:l.formattedIssue,label:"Issue",group:"c",obj:{ids:e.md.ids,group:e.md.group}},null,8,["value","obj"]),r(s,{value:e.md.volumeIssueCount,label:"Issue Count"},null,8,["value"]),r(s,{value:e.md.name,label:"Title"},null,8,["value"])]),e.md.year||e.md.month||e.md.day?(d(),w("div",Fa,[r(s,{value:e.md.year,label:"Year",class:"datePicker",type:"number"},null,8,["value"]),r(s,{value:e.md.month,label:"Month",class:"datePicker"},null,8,["value"]),r(s,{value:e.md.day,label:"Day",class:"datePicker"},null,8,["value"])])):M("",!0)]),m("div",La,[m("section",Ea,[m("div",Da,[r(s,{value:l.pages,label:"Pages"},null,8,["value"]),r(s,{label:"Finished",value:(!!e.md.finished).toString()},null,8,["value"]),r(s,{label:"Reading Direction",value:l.readingDirectionText},null,8,["value"]),r(s,{value:(!!e.md.monochrome).toString(),label:"Monochrome"},null,8,["value"]),r(s,{value:e.md.original_format,label:"Original Format"},null,8,["value"])])]),m("section",Aa,[m("div",Oa,[e.md.createdAt?(d(),B(s,{key:0,value:l.formatDateTime(e.md.createdAt),label:"Created at",class:"mtime"},null,8,["value"])):M("",!0),e.md.updatedAt?(d(),B(s,{key:1,value:l.formatDateTime(e.md.updatedAt),label:"Updated at",class:"mtime"},null,8,["value"])):M("",!0),r(s,{value:l.size,label:"Size"},null,8,["value"]),r(s,{value:l.fileType,label:"File Type"},null,8,["value"])]),m("div",ja,[r(s,{group:"f",value:{pk:e.md.parentFolderId,name:e.md.path},label:"Path"},null,8,["value"])])]),m("section",$a,[r(s,{value:e.md.country,label:"Country"},null,8,["value"]),r(s,{value:e.md.language,label:"Language"},null,8,["value"])]),m("section",za,[r(h,{values:l.titledIdentifiers,label:"Identifiers"},null,8,["values"])]),m("section",Ua,[r(s,{value:e.md.summary,label:"Summary"},null,8,["value"]),r(s,{value:e.md.review,label:"Review"},null,8,["value"])]),m("section",qa,[r(s,{value:e.md.communityRating,label:"Community Rating"},null,8,["value"]),r(s,{value:e.md.criticalRating,label:"Critical Rating"},null,8,["value"]),r(s,{value:e.md.ageRating,label:"Age Rating"},null,8,["value"])]),m("section",Ga,[r(h,{values:e.md.genres,label:"Genres",filter:"genres"},null,8,["values"]),r(h,{values:e.md.characters,label:"Characters",filter:"characters"},null,8,["values"]),r(h,{values:e.md.teams,label:"Teams",filter:"teams"},null,8,["values"]),r(h,{values:e.md.locations,label:"Locations",filter:"locations"},null,8,["values"]),r(h,{values:e.md.seriesGroups,label:"Series Groups",filter:"seriesGroups"},null,8,["values"]),r(h,{values:e.md.stories,label:"Stories",filter:"stories"},null,8,["values"]),r(h,{values:e.md.storyArcNumbers,label:"Story Arcs",filter:"storyArcs"},null,8,["values"]),r(h,{values:e.md.tags,label:"Tags",filter:"tags"},null,8,["values"])]),m("section",xa,[r(I,{value:e.md.contributors},null,8,["value"])]),m("section",Ka,[r(s,{value:e.md.notes,label:"Notes"},null,8,["value"])]),m("section",Ya,[r(s,{value:e.md.tagger,label:"Tagger"},null,8,["value"]),r(s,{value:e.md.scanInfo,label:"Scan"},null,8,["value"])])]),m("footer",Ha,[a.group==="c"?(d(),B(de,{key:0,id:"downloadButton",title:"Download Comic Archive",onClick:l.download},{default:S(()=>[a.group==="c"?(d(),B(ce,{key:0},{default:S(()=>[E(V(o.mdiDownload),1)]),_:1})):M("",!0),E(" Download ")]),_:1},8,["onClick"])):M("",!0),l.isReadButtonShown?(d(),B(de,{key:1,to:l.readerRoute,title:"Read Comic",disabled:!l.isReadButtonEnabled},{default:S(()=>[r(ce,null,{default:S(()=>[E(V(l.readButtonIcon),1)]),_:1}),E(" Read ")]),_:1},8,["to","disabled"])):M("",!0),m("span",Wa,[r(n,{class:"closeButton",title:"Close Metadata (esc)",onClick:t[2]||(t[2]=p=>o.dialog=!1)})])])],32)):(d(),w("div",Za,[r(n,{class:"closeButton",title:"Close Metadata (esc)",onClick:t[4]||(t[4]=p=>o.dialog=!1)}),Xa,r(k,{"model-value":o.progress,indeterminate:o.progress>=100,class:"placeholder"},null,8,["model-value","indeterminate"])]))]),_:1},8,["modelValue"])}const Bl=U(Va,[["render",Qa],["__scopeId","data-v-5eca62dc"]]),Ja={name:"ToolbarSelect",props:{selectLabel:{type:String,default:""},maxSelectLen:{type:Number,default:0}},computed:{style(){if(this.maxSelectLen){const e=this.$vuetify.display.xs?"max-width":"width",t=this.maxSelectLen*.7+"em";return`${e}: ${t}`}return""}}};function el(e,t,a,i,o,l){return d(),B(Rt,Y(e.$attrs,{label:a.selectLabel,"aria-label":a.selectLabel,class:"toolbarSelect",density:"compact","full-width":"","menu-props":{maxHeight:void 0},"hide-details":"auto",style:l.style,variant:"plain"}),ye({item:S(({item:n,props:s})=>[r(dt,Y(s,{density:"compact",variant:"plain",title:n.title,value:n.value}),null,16,["title","value"])]),_:2},[le(e.$slots,(n,s)=>({name:s,fn:S(c=>[ke(e.$slots,s,Y({props:n},c),void 0,!0)])}))]),1040,["label","aria-label","style"])}const Il=U(Ja,[["render",el],["__scopeId","data-v-e88da460"]]),Pl=ct("v-spacer","div","VSpacer"),tl={name:"PaginationNavButton",props:{narrow:{type:Boolean,default:!0}},computed:{classes(){return{narrowButton:this.narrow}}}};function al(e,t,a,i,o,l){return d(),B(de,{variant:"plain",density:"compact",class:te(["paginationNavButton",l.classes]),size:"medium"},ye({_:2},[le(e.$slots,(n,s)=>({name:s,fn:S(c=>[ke(e.$slots,s,Y({props:n},c),void 0,!0)])}))]),1032,["class"])}const Ml=U(tl,[["render",al],["__scopeId","data-v-0450dab6"]]),_e=Symbol.for("vuetify:v-slider");function ll(e,t,a){const i=a==="vertical",o=t.getBoundingClientRect(),l="touches"in e?e.touches[0]:e;return i?l.clientY-(o.top+o.height/2):l.clientX-(o.left+o.width/2)}function sl(e,t){return"touches"in e&&e.touches.length?e.touches[0][t]:"changedTouches"in e&&e.changedTouches.length?e.changedTouches[0][t]:e[t]}const rl=ae({disabled:{type:Boolean,default:null},error:Boolean,readonly:{type:Boolean,default:null},max:{type:[Number,String],default:100},min:{type:[Number,String],default:0},step:{type:[Number,String],default:0},thumbColor:String,thumbLabel:{type:[Boolean,String],default:void 0,validator:e=>typeof e=="boolean"||e==="always"},thumbSize:{type:[Number,String],default:20},showTicks:{type:[Boolean,String],default:!1,validator:e=>typeof e=="boolean"||e==="always"},ticks:{type:[Array,Object]},tickSize:{type:[Number,String],default:2},color:String,trackColor:String,trackFillColor:String,trackSize:{type:[Number,String],default:4},direction:{type:String,default:"horizontal",validator:e=>["vertical","horizontal"].includes(e)},reverse:Boolean,...mt(),...vt({elevation:2}),ripple:{type:Boolean,default:!0}},"Slider"),il=e=>{const t=v(()=>parseFloat(e.min)),a=v(()=>parseFloat(e.max)),i=v(()=>+e.step>0?parseFloat(e.step):0),o=v(()=>Math.max(Te(i.value),Te(t.value)));function l(n){if(n=parseFloat(n),i.value<=0)return n;const s=Le(n,t.value,a.value),c=t.value%i.value,h=Math.round((s-c)/i.value)*i.value+c;return parseFloat(Math.min(h,a.value).toFixed(o.value))}return{min:t,max:a,step:i,decimals:o,roundValue:l}},ol=e=>{let{props:t,steps:a,onSliderStart:i,onSliderMove:o,onSliderEnd:l,getActiveThumb:n}=e;const{isRtl:s}=Se(),c=L(t,"reverse"),h=v(()=>t.direction==="vertical"),I=v(()=>h.value!==c.value),{min:k,max:p,step:D,decimals:q,roundValue:j}=a,H=v(()=>parseInt(t.thumbSize,10)),G=v(()=>parseInt(t.tickSize,10)),$=v(()=>parseInt(t.trackSize,10)),A=v(()=>(p.value-k.value)/D.value),W=L(t,"disabled"),O=v(()=>t.error||t.disabled?void 0:t.thumbColor??t.color),b=v(()=>t.error||t.disabled?void 0:t.trackColor??t.color),N=v(()=>t.error||t.disabled?void 0:t.trackFillColor??t.color),_=Ve(!1),C=Ve(0),R=pe(),F=pe();function f(u){var Ce;const y=t.direction==="vertical",Oe=y?"top":"left",je=y?"height":"width",$e=y?"clientY":"clientX",{[Oe]:ze,[je]:Ue}=(Ce=R.value)==null?void 0:Ce.$el.getBoundingClientRect(),qe=sl(u,$e);let fe=Math.min(Math.max((qe-ze-C.value)/Ue,0),1)||0;return(y?I.value:I.value!==s.value)&&(fe=1-fe),j(k.value+fe*(p.value-k.value))}const z=u=>{l({value:f(u)}),_.value=!1,C.value=0},x=u=>{F.value=n(u),F.value&&(F.value.focus(),_.value=!0,F.value.contains(u.target)?C.value=ll(u,F.value,t.direction):(C.value=0,o({value:f(u)})),i({value:f(u)}))},P={passive:!0,capture:!0};function Q(u){o({value:f(u)})}function se(u){u.stopPropagation(),u.preventDefault(),z(u),window.removeEventListener("mousemove",Q,P),window.removeEventListener("mouseup",se)}function re(u){var y;z(u),window.removeEventListener("touchmove",Q,P),(y=u.target)==null||y.removeEventListener("touchend",re)}function he(u){var y;x(u),window.addEventListener("touchmove",Q,P),(y=u.target)==null||y.addEventListener("touchend",re,{passive:!1})}function T(u){u.preventDefault(),x(u),window.addEventListener("mousemove",Q,P),window.addEventListener("mouseup",se,{passive:!1})}const g=u=>{const y=(u-k.value)/(p.value-k.value)*100;return Le(isNaN(y)?0:y,0,100)},J=L(t,"showTicks"),ee=v(()=>J.value?t.ticks?Array.isArray(t.ticks)?t.ticks.map(u=>({value:u,position:g(u),label:u.toString()})):Object.keys(t.ticks).map(u=>({value:parseFloat(u),position:g(parseFloat(u)),label:t.ticks[u]})):A.value!==1/0?ht(A.value+1).map(u=>{const y=k.value+u*D.value;return{value:y,position:g(y)}}):[]:[]),ie=v(()=>ee.value.some(u=>{let{label:y}=u;return!!y})),oe={activeThumbRef:F,color:L(t,"color"),decimals:q,disabled:W,direction:L(t,"direction"),elevation:L(t,"elevation"),hasLabels:ie,isReversed:c,indexFromEnd:I,min:k,max:p,mousePressed:_,numTicks:A,onSliderMousedown:T,onSliderTouchstart:he,parsedTicks:ee,parseMouseMove:f,position:g,readonly:L(t,"readonly"),rounded:L(t,"rounded"),roundValue:j,showTicks:J,startOffset:C,step:D,thumbSize:H,thumbColor:O,thumbLabel:L(t,"thumbLabel"),ticks:L(t,"ticks"),tickSize:G,trackColor:b,trackContainerRef:R,trackFillColor:N,trackSize:$,vertical:h};return ft(_e,oe),oe},nl=ae({focused:Boolean,max:{type:Number,required:!0},min:{type:Number,required:!0},modelValue:{type:Number,required:!0},position:{type:Number,required:!0},ripple:{type:[Boolean,Object],default:!0},name:String,...be()},"VSliderThumb"),ul=me()({name:"VSliderThumb",directives:{Ripple:pt},props:nl(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:a,emit:i}=t;const o=Ee(_e),{isRtl:l,rtlClasses:n}=Se();if(!o)throw new Error("[Vuetify] v-slider-thumb must be used inside v-slider or v-range-slider");const{thumbColor:s,step:c,disabled:h,thumbSize:I,thumbLabel:k,direction:p,isReversed:D,vertical:q,readonly:j,elevation:H,mousePressed:G,decimals:$,indexFromEnd:A}=o,W=v(()=>h.value?void 0:H.value),{elevationClasses:O}=bt(W),{textColorClasses:b,textColorStyles:N}=gt(s),{pageup:_,pagedown:C,end:R,home:F,left:f,right:z,down:x,up:P}=_t,Q=[_,C,R,F,f,z,x,P],se=v(()=>c.value?[1,2,3]:[1,5,10]);function re(T,g){if(!Q.includes(T.key))return;T.preventDefault();const J=c.value||.1,ee=(e.max-e.min)/J;if([f,z,x,P].includes(T.key)){const oe=(q.value?[l.value?f:z,D.value?x:P]:A.value!==l.value?[f,P]:[z,P]).includes(T.key)?1:-1,u=T.shiftKey?2:T.ctrlKey?1:0;g=g+oe*J*se.value[u]}else if(T.key===F)g=e.min;else if(T.key===R)g=e.max;else{const ie=T.key===C?1:-1;g=g-ie*J*(ee>100?ee/10:10)}return Math.max(e.min,Math.min(e.max,g))}function he(T){const g=re(T,e.modelValue);g!=null&&i("update:modelValue",g)}return ve(()=>{const T=Z(A.value?100-e.position:e.position,"%");return r("div",{class:["v-slider-thumb",{"v-slider-thumb--focused":e.focused,"v-slider-thumb--pressed":e.focused&&G.value},e.class,n.value],style:[{"--v-slider-thumb-position":T,"--v-slider-thumb-size":Z(I.value)},e.style],role:"slider",tabindex:h.value?-1:0,"aria-label":e.name,"aria-valuemin":e.min,"aria-valuemax":e.max,"aria-valuenow":e.modelValue,"aria-readonly":!!j.value,"aria-orientation":p.value,onKeydown:j.value?void 0:he},[r("div",{class:["v-slider-thumb__surface",b.value,O.value],style:{...N.value}},null),Be(r("div",{class:["v-slider-thumb__ripple",b.value],style:N.value},null),[[yt("ripple"),e.ripple,null,{circle:!0,center:!0}]]),r(kt,{origin:"bottom center"},{default:()=>{var g;return[Be(r("div",{class:"v-slider-thumb__label-container"},[r("div",{class:["v-slider-thumb__label"]},[r("div",null,[((g=a["thumb-label"])==null?void 0:g.call(a,{modelValue:e.modelValue}))??e.modelValue.toFixed(c.value?$.value:1)])])]),[[St,k.value&&e.focused||k.value==="always"]])]}})])}),{}}}),dl=ae({start:{type:Number,required:!0},stop:{type:Number,required:!0},...be()},"VSliderTrack"),cl=me()({name:"VSliderTrack",props:dl(),emits:{},setup(e,t){let{slots:a}=t;const i=Ee(_e);if(!i)throw new Error("[Vuetify] v-slider-track must be inside v-slider or v-range-slider");const{color:o,parsedTicks:l,rounded:n,showTicks:s,tickSize:c,trackColor:h,trackFillColor:I,trackSize:k,vertical:p,min:D,max:q,indexFromEnd:j}=i,{roundedClasses:H}=Ct(n),{backgroundColorClasses:G,backgroundColorStyles:$}=Ie(I),{backgroundColorClasses:A,backgroundColorStyles:W}=Ie(h),O=v(()=>`inset-${p.value?"block":"inline"}-${j.value?"end":"start"}`),b=v(()=>p.value?"height":"width"),N=v(()=>({[O.value]:"0%",[b.value]:"100%"})),_=v(()=>e.stop-e.start),C=v(()=>({[O.value]:Z(e.start,"%"),[b.value]:Z(_.value,"%")})),R=v(()=>s.value?(p.value?l.value.slice().reverse():l.value).map((f,z)=>{var P;const x=f.value!==D.value&&f.value!==q.value?Z(f.position,"%"):void 0;return r("div",{key:f.value,class:["v-slider-track__tick",{"v-slider-track__tick--filled":f.position>=e.start&&f.position<=e.stop,"v-slider-track__tick--first":f.value===D.value,"v-slider-track__tick--last":f.value===q.value}],style:{[O.value]:x}},[(f.label||a["tick-label"])&&r("div",{class:"v-slider-track__tick-label"},[((P=a["tick-label"])==null?void 0:P.call(a,{tick:f,index:z}))??f.label])])}):[]);return ve(()=>r("div",{class:["v-slider-track",H.value,e.class],style:[{"--v-slider-track-size":Z(k.value),"--v-slider-tick-size":Z(c.value)},e.style]},[r("div",{class:["v-slider-track__background",A.value,{"v-slider-track__background--opacity":!!o.value||!I.value}],style:{...N.value,...W.value}},null),r("div",{class:["v-slider-track__fill",G.value],style:{...C.value,...$.value}},null),s.value&&r("div",{class:["v-slider-track__ticks",{"v-slider-track__ticks--always-show":s.value==="always"}]},[R.value])])),{}}}),ml=ae({...Dt(),...rl(),...At(),modelValue:{type:[Number,String],default:0}},"VSlider"),vl=me()({name:"VSlider",props:ml(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,start:e=>!0,end:e=>!0},setup(e,t){let{slots:a,emit:i}=t;const o=pe(),{rtlClasses:l}=Se(),n=il(e),s=wt(e,"modelValue",void 0,b=>n.roundValue(b??n.min.value)),{min:c,max:h,mousePressed:I,roundValue:k,onSliderMousedown:p,onSliderTouchstart:D,trackContainerRef:q,position:j,hasLabels:H,readonly:G}=ol({props:e,steps:n,onSliderStart:()=>{i("start",s.value)},onSliderEnd:b=>{let{value:N}=b;const _=k(N);s.value=_,i("end",_)},onSliderMove:b=>{let{value:N}=b;return s.value=k(N)},getActiveThumb:()=>{var b;return(b=o.value)==null?void 0:b.$el}}),{isFocused:$,focus:A,blur:W}=Ot(e),O=v(()=>j(s.value));return ve(()=>{const b=Pe.filterProps(e),N=!!(e.label||a.label||a.prepend);return r(Pe,Y({class:["v-slider",{"v-slider--has-labels":!!a["tick-label"]||H.value,"v-slider--focused":$.value,"v-slider--pressed":I.value,"v-slider--disabled":e.disabled},l.value,e.class],style:e.style},b,{focused:$.value}),{...a,prepend:N?_=>{var C,R;return r(ge,null,[((C=a.label)==null?void 0:C.call(a,_))??(e.label?r(jt,{id:_.id.value,class:"v-slider__label",text:e.label},null):void 0),(R=a.prepend)==null?void 0:R.call(a,_)])}:void 0,default:_=>{let{id:C,messagesId:R}=_;return r("div",{class:"v-slider__container",onMousedown:G.value?void 0:p,onTouchstartPassive:G.value?void 0:D},[r("input",{id:C.value,name:e.name||C.value,disabled:!!e.disabled,readonly:!!e.readonly,tabindex:"-1",value:s.value},null),r(cl,{ref:q,start:0,stop:O.value},{"tick-label":a["tick-label"]}),r(ul,{ref:o,"aria-describedby":R.value,focused:$.value,min:c.value,max:h.value,modelValue:s.value,"onUpdate:modelValue":F=>s.value=F,position:O.value,elevation:e.elevation,onFocus:A,onBlur:W,ripple:e.ripple,name:e.name},{"thumb-label":a["thumb-label"]})])}})}),{}}}),hl={name:"PaginationSlider",props:{min:{type:Number,default:0}}};function fl(e,t,a,i,o,l){return d(),B(vl,Y({"thumb-size":"36",class:"paginationSlider",density:"compact","hide-details":"auto",min:a.min,rounded:!0,"show-ticks":"always",step:1,"thumb-label":"always"},e.$attrs),{"tick-label":S(({index:n})=>[E(V(n+a.min),1)]),_:1},16,["min"])}const Nl=U(hl,[["render",fl],["__scopeId","data-v-01b67afd"]]),pl={name:"PaginationToolbar"};function bl(e,t,a,i,o,l){return d(),B($t,{class:"paginationToolbar codexToolbar",density:"compact",transform:"center bottom"},ye({_:2},[le(e.$slots,(n,s)=>({name:s,fn:S(c=>[ke(e.$slots,s,Y({props:n},c),void 0,!0)])}))]),1024)}const Rl=U(pl,[["render",bl],["__scopeId","data-v-cfa8cce0"]]);export{Yt as B,Bl as M,Jt as N,Ml as P,Il as T,Vl as V,Pl as a,Nl as b,Rl as c,_a as g,Qt as p,la as t};
