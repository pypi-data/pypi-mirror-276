(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[90575],{501157:(e,t,n)=>{"use strict";n.d(t,{ID:()=>w,en:()=>C,Xv:()=>M,FU:()=>j,gs:()=>T,tt:()=>G,jY:()=>$,T6:()=>A,ZP:()=>F});var r=n(472500),o=n.n(r),i=n(701469),a=n.n(i),u=n(984596),l=n.n(u),s=n(227361),c=n.n(s),f=n(505055),d=n.n(f),p=n(375875),y=n.n(p),v=n(737275),m=n(916651),g=n(577215);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function h(e){return function(e){if(Array.isArray(e))return L(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return L(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?L(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=b(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==b(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var B={},R="1.3.0",w="1.1.1",C=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{service:"WMS",version:R,request:"GetCapabilities"},n=arguments.length>2?arguments[2]:void 0,r=(a()(e)&&e||e.split(","))[0],i=o().parse(r,!0);return o().format(S(S({},i),{},{search:null,query:S(S(S({},t),i.query),(null==n?void 0:n.query)||{})}))},P=function(e){var t=e&&e.Title,n=e.LogoURL&&S(S({},c()(e,"LogoURL.$")||{}),{},{format:c()(e,"LogoURL.Format")}),r=c()(e,'OnlineResource.$["xlink:href"]');return{title:t,logo:n,imageUrl:c()(e,'LogoURL.OnlineResource.$["xlink:href"]'),link:r}},M=function e(t){var n,r,o=null!==(n=null==t?void 0:t.Layer)&&void 0!==n?n:null==t?void 0:t.layer,i=null!==(r=null==t?void 0:t.Name)&&void 0!==r?r:null==t?void 0:t.name;return o?l()(o).reduce((function(t,n){var r,o,i=null!==(r=n.Layer)&&void 0!==r?r:n.layer,a=null!==(o=n.Name)&&void 0!==o?o:n.name;return[].concat(h(t),h(e(n)),h(i&&a?[n]:[]))}),[]):i&&[t]||[]},D=function(){var e,t,n,r,o,i,u,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=arguments.length>1?arguments[1]:void 0,f=arguments.length>2?arguments[2]:void 0,d=arguments.length>3?arguments[3]:void 0,p=s.Capability,y=s.Service,v=(u=p).Request&&u.Request.GetMap&&u.Request.GetMap.DCPType&&u.Request.GetMap.DCPType.HTTP&&u.Request.GetMap.DCPType.HTTP.Get&&u.Request.GetMap.DCPType.HTTP.Get.OnlineResource&&u.Request.GetMap.DCPType.HTTP.Get.OnlineResource.$||void 0,m=p.Layer&&(null===(e=p.Layer.SRS||p.Layer.CRS)||void 0===e?void 0:e.map((function(e){return e.toUpperCase()})))||[],g=p.Layer&&p.Layer.Attribution&&P(p.Layer.Attribution),b=l()((null==p||null===(t=p.Request)||void 0===t||null===(n=t.GetMap)||void 0===n?void 0:n.Format)||[]),h=l()((null==p||null===(r=p.Request)||void 0===r||null===(o=r.GetFeatureInfo)||void 0===o?void 0:o.Format)||[]),L=M(p),x=(a()(L)?L:[L]).filter((function(e){return!d||-1!==e.Name.toLowerCase().indexOf(d.toLowerCase())||e.Title&&-1!==e.Title.toLowerCase().indexOf(d.toLowerCase())||e.Abstract&&-1!==e.Abstract.toLowerCase().indexOf(d.toLowerCase())}));return{numberOfRecordsMatched:x.length,numberOfRecordsReturned:Math.min(f,x.length),nextRecord:c+Math.min(f,x.length)+1,service:y,layerOptions:{version:(null==s||null===(i=s.$)||void 0===i?void 0:i.version)||R},records:x.filter((function(e,t){return t>=c-1&&t<c-1+f})).map((function(e){return S(S({},e),{},{getMapFormats:b,getFeatureInfoFormats:h,onlineResource:v,SRS:m,credits:e.Attribution?P(e.Attribution):g})}))}},j=function(e){return y().get(C(e,{service:"WMS",version:R,request:"GetCapabilities"})).then((function(e){var t;return d().parseString(e.data,{explicitArray:!1},(function(e,n){t=n})),t.WMS_Capabilities||t.WMT_MS_Capabilities||{}}))},q=function(e,t,n,r){var o=B[e];return o&&(new Date).getTime()<o.timestamp+1e3*((0,v.u8)("cacheExpire")||60)?new Promise((function(e){e(D(o.data,t,n,r))})):j(e).then((function(o){return B[e]={timestamp:(new Date).getTime(),data:o},D(o,t,n,r)}))},T=function(e,t){return y().get(C(e,{service:"WMS",version:w,layers:t,request:"DescribeLayer"})).then((function(e){var t;return d().parseString(e.data,{explicitArray:!1},(function(e,n){t=n&&n.WMS_DescribeLayerResponse&&n.WMS_DescribeLayerResponse.LayerDescription})),(t=Array.isArray(t)?t:[t]).map((function(e){return S(S({},e&&e.$||{}),{},{layerName:e&&e.$&&e.$.name,query:S({},e&&e.query&&e.query.$||{})})}))}))},G=function(e,t,n,r){return q(e,t,n,r)},$=function(e,t){for(var n=e,r=n.EX_GeographicBoundingBox||n.exGeographicBoundingBox||(0,m.getWMSBoundingBox)(n.BoundingBox)||n.LatLonBoundingBox&&n.LatLonBoundingBox.$||n.latLonBoundingBox;!r&&n.Layer&&n.Layer.length;)r=(n=n.Layer[0]).EX_GeographicBoundingBox||n.exGeographicBoundingBox||(0,m.getWMSBoundingBox)(n.BoundingBox)||n.LatLonBoundingBox&&n.LatLonBoundingBox.$||n.latLonBoundingBox;r||(r={westBoundLongitude:-180,southBoundLatitude:-90,eastBoundLongitude:180,northBoundLatitude:90});var o={extent:[r.westBoundLongitude||r.minx,r.southBoundLatitude||r.miny,r.eastBoundLongitude||r.maxx,r.northBoundLatitude||r.maxy],crs:"EPSG:4326"};return t?{crs:o.crs,bounds:{minx:o.extent[0],miny:o.extent[1],maxx:o.extent[2],maxy:o.extent[3]}}:o},A=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return j(e).then((function(e){var n,r,o,i,a=e.Capability,u=l()((null==a||null===(n=a.Request)||void 0===n||null===(r=n.GetMap)||void 0===r?void 0:r.Format)||[]).filter(g.F0);return t?{imageFormats:u,infoFormats:l()((null==a||null===(o=a.Request)||void 0===o||null===(i=o.GetFeatureInfo)||void 0===i?void 0:i.Format)||[]).filter(g.cP)}:u})).catch((function(){return t?{imageFormats:[],infoFormats:[]}:[]}))};const F={flatLayers:M,parseUrl:C,getDimensions:function(e){return l()(e.Dimension||e.dimension||[]).map((function(t,n){var r=e.Extent&&l()(e.Extent)[n]||e.extent&&l()(e.extent)[n];return{name:t.$.name,units:t.$.units,unitSymbol:t.$.unitSymbol,default:t.$.default||r&&r.$.default,values:t._&&t._.split(",")||r&&r._&&r._.split(",")}}))},getCapabilities:j,describeLayer:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return y().get(C(e,{service:"WMS",version:w,layers:t,request:"DescribeLayer"},n)).then((function(e){var t,n,r;d().parseString(e.data,{explicitArray:!1},(function(e,t){r=t}));var o=(null===(t=r)||void 0===t||null===(n=t.WMS_DescribeLayerResponse)||void 0===n?void 0:n.LayerDescription)&&l()(r.WMS_DescribeLayerResponse.LayerDescription)[0];return o&&S(S({},null==o?void 0:o.$),(null==o?void 0:o.Query)&&{query:l()(o.Query).map((function(e){return S({},null==e?void 0:e.$)}))})}))},getRecords:q,describeLayers:T,textSearch:G,parseLayerCapabilities:function(e,t){var n=e.Capability;return M(n).find((function(e){var n=e.Name;return 2===t.name.split(":").length&&n&&2===n.split(":").length?t.name===n&&e:n&&2===n.split(":").length?t.name===n.split(":")[1]&&e:2===t.name.split(":").length?t.name.split(":")[1]===n&&e:t.name===n&&e}))},getBBox:$,reset:function(){Object.keys(B).forEach((function(e){delete B[e]}))},getSupportedFormat:A}},38560:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var r=n(480681),o=n(124852),i=n.n(o),a=n(294184),u=n.n(a),l=["disabled","className","onClick"];function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(null,arguments)}var c=n(815135);const f=(d=r.zx,i().forwardRef((function(e,t){var n=e.disabled,r=e.className,o=e.onClick,a=void 0===o?function(){}:o,c=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,l);return i().createElement(d,s({ref:t,className:n?u()("disabled",r):r,onClick:function(){n||a.apply(void 0,arguments)}},c),c.children)})));var d;(0,c.Z)(r.zx)}}]);