(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[31255],{285148:(r,t,e)=>{"use strict";e.d(t,{Qw:()=>g,jo:()=>O,m$:()=>j,AF:()=>h,LS:()=>w,WT:()=>S,ns:()=>P,RP:()=>q,aK:()=>A,oP:()=>F});var n=e(675110),u=e(55237),o=e(22222),i=e(227361),f=e.n(i),a=e(313311),c=e.n(a);function l(r){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},l(r)}function y(r){return function(r){if(Array.isArray(r))return b(r)}(r)||function(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(r)||s(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(r,t){if(r){if("string"==typeof r)return b(r,t);var e={}.toString.call(r).slice(8,-1);return"Object"===e&&r.constructor&&(e=r.constructor.name),"Map"===e||"Set"===e?Array.from(r):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?b(r,t):void 0}}function b(r,t){(null==t||t>r.length)&&(t=r.length);for(var e=0,n=Array(t);e<t;e++)n[e]=r[e];return n}function m(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),e.push.apply(e,n)}return e}function d(r){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?m(Object(e),!0).forEach((function(t){p(r,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):m(Object(e)).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))}))}return r}function p(r,t,e){return(t=function(r){var t=function(r,t){if("object"!=l(r)||!r)return r;var e=r[Symbol.toPrimitive];if(void 0!==e){var n=e.call(r,"string");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}(r);return"symbol"==l(t)?t:t+""}(t))in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}var g=function(r,t){return function(e){return f()(e,"dimension.data[".concat(t,"][").concat(r,"]"))}},v=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return c()(r.dimensions||[],{name:t})},O=function(r,t){return function(e){return g(r.id,t)(e)||v(r,t)}},j=function(r){return(0,n.l2)(r).reduce((function(t,e){var n=O(e,"time")(r);return n?d(d({},t),{},p({},e.id,n)):t}),{})},h=function(r){return(0,n.l2)(r).filter((function(r){return v(r,"time")}))},w=function(r){return(0,n.l2)(r).filter((function(r){return r.visibility&&v(r,"time")}))},S=function(r){var t=f()(r,"dimension.currentTime");return t&&t.split("/")[0]},P=function(r){return f()(r,"dimension.offsetTime")},q=function(r){return!!P(r)},A=((0,o.P1)(j,(function(r){return Object.keys(r).reduce((function(t,e){return[].concat(y(t),y(r[e]&&r[e].values||[]))}),[]).sort()||[]})),function(r){return function(t){return y(f()(O(r,"time")(t),"values",[])).sort()}}),F=function(r,t){var e=g(t,"time")(r),n=e&&e.domain&&e.domain.split("--");if(n&&2===n.length)return n&&{start:n[0],end:n[1]};var o,i,f=e&&e.domain&&e.domain.split(",");if(f&&f.length>0){var a=(o=(0,u.tz)(f),i=2,function(r){if(Array.isArray(r))return r}(o)||function(r,t){var e=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=e){var n,u,o,i,f=[],a=!0,c=!1;try{if(o=(e=e.call(r)).next,0===t){if(Object(e)!==e)return;a=!1}else for(;!(a=(n=o.call(e)).done)&&(f.push(n.value),f.length!==t);a=!0);}catch(r){c=!0,u=r}finally{try{if(!a&&null!=e.return&&(i=e.return(),Object(i)!==i))return}finally{if(c)throw u}}return f}}(o,i)||s(o,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());return{start:a[0],end:a[1]}}return null}},731255:(r,t,e)=>{"use strict";e.d(t,{u$:()=>D,Xh:()=>I,_w:()=>k,eO:()=>C,kG:()=>L,P3:()=>z,bq:()=>_,LB:()=>R,b4:()=>K,M0:()=>x,Li:()=>Q,Rd:()=>U,g5:()=>N,Sj:()=>$,w3:()=>V,o:()=>W,eK:()=>H,jY:()=>X,ND:()=>Y,OK:()=>Z,tU:()=>J,ou:()=>rr,DK:()=>tr,uz:()=>er,Ci:()=>nr,Ae:()=>ur,gz:()=>or,He:()=>ir,P4:()=>fr,kd:()=>ar,TC:()=>cr,nq:()=>lr,Vf:()=>yr,lg:()=>sr,qd:()=>br,Kt:()=>mr,zc:()=>dr});var n=e(91175),u=e.n(n),o=e(227361),i=e.n(o),f=e(513218),a=e.n(f),c=e(675110),l=e(378889),y=e(308316),s=e(552259),b=e(196958),m=e(285148),d=e(274621),p=e(93152),g=e(824260),v=e(784715),O=e(618446),j=e.n(O),h=e(800827),w=e(916651),S=e(898631);function P(r){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},P(r)}function q(r,t){(null==t||t>r.length)&&(t=r.length);for(var e=0,n=Array(t);e<t;e++)n[e]=r[e];return n}function A(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),e.push.apply(e,n)}return e}function F(r){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?A(Object(e),!0).forEach((function(t){E(r,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):A(Object(e)).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))}))}return r}function E(r,t,e){return(t=function(r){var t=function(r,t){if("object"!=P(r)||!r)return r;var e=r[Symbol.toPrimitive];if(void 0!==e){var n=e.call(r,"string");if("object"!=P(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}(r);return"symbol"==P(t)?t:t+""}(t))in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}var T=c.CA,D=function(r){return i()(r,"featuregrid.selectedLayer")},I=function(r){return i()(r,"featuregrid.attributes")},k=function(r){return r&&r.featuregrid&&r.featuregrid.select},C=function(r){return r&&r.featuregrid&&r.featuregrid.changes},L=function(r){return r&&r.featuregrid&&r.featuregrid.newFeatures},z=function(r){return u()(k(r))},G=function(r){var t=(0,g.Qs)(r);if(t){var e=(0,l.findGeometryProperty)(t);return e&&e.localType}return null},M=["Geometry","GeometryCollection"],_=function(r){return!u()(M.filter((function(t){return G(r)===t})))},R=function(r){return C(r)&&C(r).length>0},K=function(r){return L(r)&&L(r).length>0},x=function(r){return r&&r.featuregrid&&r.featuregrid.filters},Q=function(r){return T(r,D(r))},U=function(r){return r&&r.featuregrid&&r.featuregrid.open},N=function(r,t){return i()(x(r),t)},$=function(r){var t=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r.title||r.name}(T(r,D(r)));return a()(t)?t[(0,y.Pz)(r)]||t.default||"":t},B=[],V=function(r){var t=T(r,D(r));return i()(t,"fields",B)},W=function(r){return((0,g.L)(r)||[]).map((function(t){var e=function(r,t){return i()(r,"featuregrid.attributes[".concat(t.name||t.attribute,"]"))}(r,t);return e?F(F({},t),e):t}))},H=function(r){return r&&r.featuregrid&&r.featuregrid.mode},X=function(r){return(k(r)||[]).length},Y=function(r){return(0,b.rK)(C(r))},Z=function(r){return function(r){var t=z(r);if(t){var e=(0,b.rK)(C(r));return!((!e[t.id]||null===e[t.id].geometry)&&(e[t.id]&&null===e[t.id].geometry||t._new&&u()(L(r))&&null===u()(L(r)).geometry||(!t._new||!u()(L(r))||null===u()(L(r)).geometry)&&null===t.geometry))}return!1}(r)},J=function(r){return i()(r,"featuregrid.showAgain",!1)},rr=function(r){if(i()(r,"featuregrid.showTimeSync",!1)){var t=D(r);return(0,m.jo)({id:t},"time")(r)}return null},tr=function(r){return i()(r,"featuregrid.timeSync",!1)},er=function(r){return r&&r.featuregrid&&r.featuregrid.saving},nr=function(r){return r&&r.featuregrid&&r.featuregrid.saved},ur=function(r){return r&&r.featuregrid&&r.featuregrid.drawing},or=function(r){return i()(r,"featuregrid.multiselect",!1)},ir=function(r){return(0,s.Zl)(G(r))},fr=function(r){return r.featuregrid&&r.featuregrid.dockSize},ar=function(r){var t=T(r,D(r));return t&&t.name||""},cr=function(r){var t=function(r){return i()(T(r,D(r)),"params")}(r);return{viewParams:t&&(t.VIEWPARAMS||t.viewParams||t.viewparams),cqlFilter:t&&(t.CQL_FILTER||t.cqlFilter||t.cql_filter)}},lr=function(r){var t=function(r){return i()(r,"featuregrid.editingAllowedRoles",["ADMIN"])}(r),e=function(r){return i()(r,"featuregrid.editingAllowedGroups",[])}(r),n=function(r){return r&&r.featuregrid&&r.featuregrid.canEdit}(r),u=(0,d.tv)({allowedRoles:t,allowedGroups:e})(r);return(n||u)&&!(0,p.c0)(r)},yr=function(r){return i()(r,"featuregrid.pagination")},sr=function(r){return i()(r,"featuregrid.useLayerFilter",!0)},br=function(r){return i()(r,"featuregrid.viewportFilter",null)},mr=function(r){return(0,p.$v)(r)!==S.Bk.CESIUM},dr=(0,v.oz)(j())(br,h.pQ,h.uy,(function(r){return i()(r,"query.filterObj.spatialField")}),g.Qs,mr,(function(r,t,e){var n,u,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4?arguments[4]:void 0,f=arguments.length>5?arguments[5]:void 0,a=null===(n=(0,l.findGeometryProperty)(i))||void 0===n?void 0:n.name,c=null!=o&&o.operation?[o]:o;return r&&f?{spatialField:[].concat((u=c,function(r){if(Array.isArray(r))return q(r)}(u)||function(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(u)||function(r,t){if(r){if("string"==typeof r)return q(r,t);var e={}.toString.call(r).slice(8,-1);return"Object"===e&&r.constructor&&(e=r.constructor.name),"Map"===e||"Set"===e?Array.from(r):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?q(r,t):void 0}}(u)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[{geometry:F(F({},(0,w.bboxToFeatureGeometry)(t.bounds)),{},{projection:e}),attribute:a,method:"Rectangle",operation:"INTERSECTS"}])}:{}}))},824260:(r,t,e)=>{"use strict";e.d(t,{qj:()=>O,Bu:()=>j,UM:()=>h,X1:()=>w,L:()=>S,HY:()=>P,Mz:()=>q,F0:()=>A,dc:()=>F,b0:()=>E,hk:()=>T,Qs:()=>D,gy:()=>I,M7:()=>k,VD:()=>C});var n=e(414293),u=e.n(n),o=e(227361),i=e.n(o),f=e(91175),a=e.n(f),c=e(701469),l=e.n(c),y=e(630998),s=e.n(y);function b(r){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},b(r)}function m(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),e.push.apply(e,n)}return e}function d(r){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?m(Object(e),!0).forEach((function(t){p(r,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):m(Object(e)).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))}))}return r}function p(r,t,e){return(t=function(r){var t=function(r,t){if("object"!=b(r)||!r)return r;var e=r[Symbol.toPrimitive];if(void 0!==e){var n=e.call(r,"string");if("object"!=b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}(r);return"symbol"==b(t)?t:t+""}(t))in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}var g=function(r){return i()(r,"query.filterObj.featureTypeName")},v=function(r){return function(t){return i()(t,'query.featureTypes["'.concat(r,'"]'))}},O=function(r,t){return i()(v(t)(r),"original")},j=function(r){return r&&r.query&&r.query.searchUrl},h=function(r){return r&&r.query&&r.query.url},w=function(r){return r&&r.query&&r.query.filterObj},S=function(r){return i()(v(g(r))(r),"attributes")},P=function(r){return i()(r,"query.typeName")},q=function(r){return i()(r,"query.result.features")},A=function(r){var t=i()(r,"query.result");return d(d({},t),{},{features:(t&&t.features||[]).filter((function(r){return!u()(r.geometry)}))})},F=function(r,t){var e=r&&r.query&&r.query.result&&r.query.result.features;return a()(e.filter((function(r){return r.id===t})))},E={startIndex:function(r){return i()(r,"query.filterObj.pagination.startIndex")},maxFeatures:function(r){return i()(r,"query.filterObj.pagination.maxFeatures")},resultSize:function(r){return i()(r,"query.result.features.length")},totalFeatures:function(r){return i()(r,"query.result.totalFeatures")}},T=function(r,t){var e=v(t)(r);return!!(e&&e.attributes&&e.geometry&&e.original)},D=function(r){return O(r,g(r))},I=function(r){return i()(r,"query.featureLoading")},k=function(r){return i()(r,"query.syncWmsFilter",!1)},C=function(r){var t=i()(r,"query.filterObj.crossLayerFilter"),e=i()(r,"query.filterObj.spatialField"),n=i()(r,"query.filterObj.filterFields");return!!(n&&a()(n)||e&&(e.method&&e.operation&&e.geometry||l()(e)&&s()(e,(function(r){return r.method&&r.operation&&r.geometry}))>-1)||t&&t.collectGeometries&&t.operation)}}}]);