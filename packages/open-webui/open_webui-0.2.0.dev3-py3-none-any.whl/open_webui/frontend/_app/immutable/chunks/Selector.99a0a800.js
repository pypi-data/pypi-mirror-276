import{s as ce,z as re,A as ne,h as O,d as g,j as _,i as I,r as y,C as le,p as Te,X as ze,w as se,P as Pe,W as Be,o as Se,a as B,c as S,f as V,g as N,E as je,F as Le,G as Ae,H as He,K as _e,l as H,m as W,n as G,Q as ge,u as oe,R as ie}from"./scheduler.bc5a4ea8.js";import{S as de,i as me,f as We,b as q,d as Z,m as R,a as M,t as C,e as U,g as X,c as x}from"./index.5e522d2c.js";import{e as ae}from"./each.eda84b85.js";import{T as fe}from"./updater.0c1a7d23.js";import{B as qe,g as Ze,C as Re,M as Ue,p as Fe,c as Ge,d as Ye}from"./menu-trigger.f7b2c633.js";import{f as Je}from"./index.e8e699b3.js";import{C as Ke}from"./Selector.svelte_svelte_type_style_lang.56f4e411.js";import{M as te,m as Qe,u as Xe,e as xe}from"./index.a679fc74.js";import{a as J}from"./Toaster.svelte_svelte_type_style_lang.264cdd7d.js";import{s as et,k as pe}from"./index.9a95918f.js";import{b as tt}from"./index.955a9245.js";function lt(a){let e,t;return{c(){e=re("svg"),t=re("path"),this.h()},l(l){e=ne(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var s=O(e);t=ne(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),O(t).forEach(g),s.forEach(g),this.h()},h(){_(t,"stroke-linecap","round"),_(t,"stroke-linejoin","round"),_(t,"d","m4.5 12.75 6 6 9-13.5"),_(e,"xmlns","http://www.w3.org/2000/svg"),_(e,"fill","none"),_(e,"viewBox","0 0 24 24"),_(e,"stroke-width",a[1]),_(e,"stroke","currentColor"),_(e,"class",a[0])},m(l,s){I(l,e,s),y(e,t)},p(l,[s]){s&2&&_(e,"stroke-width",l[1]),s&1&&_(e,"class",l[0])},i:le,o:le,d(l){l&&g(e)}}}function st(a,e,t){let{className:l="w-4 h-4"}=e,{strokeWidth:s="1.5"}=e;return a.$$set=r=>{"className"in r&&t(0,l=r.className),"strokeWidth"in r&&t(1,s=r.strokeWidth)},[l,s]}class at extends de{constructor(e){super(),me(this,e,st,lt,ce,{className:0,strokeWidth:1})}}function rt(a){let e,t;return{c(){e=re("svg"),t=re("path"),this.h()},l(l){e=ne(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var s=O(e);t=ne(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),O(t).forEach(g),s.forEach(g),this.h()},h(){_(t,"stroke-linecap","round"),_(t,"stroke-linejoin","round"),_(t,"d","m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"),_(e,"xmlns","http://www.w3.org/2000/svg"),_(e,"fill","none"),_(e,"viewBox","0 0 24 24"),_(e,"stroke-width",a[1]),_(e,"stroke","currentColor"),_(e,"class",a[0])},m(l,s){I(l,e,s),y(e,t)},p(l,[s]){s&2&&_(e,"stroke-width",l[1]),s&1&&_(e,"class",l[0])},i:le,o:le,d(l){l&&g(e)}}}function nt(a,e,t){let{className:l="w-4 h-4"}=e,{strokeWidth:s="1.5"}=e;return a.$$set=r=>{"className"in r&&t(0,l=r.className),"strokeWidth"in r&&t(1,s=r.strokeWidth)},[l,s]}class ot extends de{constructor(e){super(),me(this,e,nt,rt,ce,{className:0,strokeWidth:1})}}function ve(a,e,t){const l=a.slice();return l[27]=e[t],l}function we(a,e,t){const l=a.slice();return l[30]=e[t],l}function it(a){let e;return{c(){e=H(a[1])},l(t){e=W(t,a[1])},m(t,l){I(t,e,l)},p(t,l){l[0]&2&&G(e,t[1])},d(t){t&&g(e)}}}function ft(a){let e=a[7].label+"",t;return{c(){t=H(e)},l(l){t=W(l,e)},m(l,s){I(l,t,s)},p(l,s){s[0]&128&&e!==(e=l[7].label+"")&&G(t,e)},d(l){l&&g(t)}}}function ut(a){let e,t,l,s;function r(m,b){return m[7]?ft:it}let n=r(a),i=n(a);return l=new Ke({props:{className:" self-center ml-2 size-3",strokeWidth:"2.5"}}),{c(){e=V("div"),i.c(),t=B(),q(l.$$.fragment),this.h()},l(m){e=N(m,"DIV",{class:!0});var b=O(e);i.l(b),t=S(b),Z(l.$$.fragment,b),b.forEach(g),this.h()},h(){_(e,"class","flex w-full text-left px-0.5 outline-none bg-transparent truncate text-lg font-semibold placeholder-gray-400 focus:outline-none")},m(m,b){I(m,e,b),i.m(e,null),y(e,t),R(l,e,null),s=!0},p(m,b){n===(n=r(m))&&i?i.p(m,b):(i.d(1),i=n(m),i&&(i.c(),i.m(e,t)))},i(m){s||(M(l.$$.fragment,m),s=!0)},o(m){C(l.$$.fragment,m),s=!1},d(m){m&&g(e),i.d(),U(l)}}}function be(a){let e,t,l,s,r,n,i,m,b;return t=new ot({props:{className:"size-4",strokeWidth:"2.5"}}),{c(){e=V("div"),q(t.$$.fragment),l=B(),s=V("input"),r=B(),n=V("hr"),this.h()},l(h){e=N(h,"DIV",{class:!0});var c=O(e);Z(t.$$.fragment,c),l=S(c),s=N(c,"INPUT",{id:!0,class:!0,placeholder:!0,autocomplete:!0}),c.forEach(g),r=S(h),n=N(h,"HR",{class:!0}),this.h()},h(){_(s,"id","model-search-input"),_(s,"class","w-full text-sm bg-transparent outline-none"),_(s,"placeholder",a[3]),_(s,"autocomplete","off"),_(e,"class","flex items-center gap-2.5 px-5 mt-3.5 mb-3"),_(n,"class","border-gray-100 dark:border-gray-800")},m(h,c){I(h,e,c),R(t,e,null),y(e,l),y(e,s),ge(s,a[5]),I(h,r,c),I(h,n,c),i=!0,m||(b=oe(s,"input",a[19]),m=!0)},p(h,c){(!i||c[0]&8)&&_(s,"placeholder",h[3]),c[0]&32&&s.value!==h[5]&&ge(s,h[5])},i(h){i||(M(t.$$.fragment,h),i=!0)},o(h){C(t.$$.fragment,h),i=!1},d(h){h&&(g(e),g(r),g(n)),U(t),m=!1,b()}}}function ke(a){let e,t,l=a[11].t("No results found")+"",s;return{c(){e=V("div"),t=V("div"),s=H(l),this.h()},l(r){e=N(r,"DIV",{});var n=O(e);t=N(n,"DIV",{class:!0});var i=O(t);s=W(i,l),i.forEach(g),n.forEach(g),this.h()},h(){_(t,"class","block px-3 py-2 text-sm text-gray-700 dark:text-gray-100")},m(r,n){I(r,e,n),y(e,t),y(t,s)},p(r,n){n[0]&2048&&l!==(l=r[11].t("No results found")+"")&&G(s,l)},d(r){r&&g(e)}}}function $e(a){var s,r,n,i,m,b;let e,t,l;return t=new fe({props:{content:`${(r=(s=a[30].model.ollama)==null?void 0:s.details)!=null&&r.quantization_level?((i=(n=a[30].model.ollama)==null?void 0:n.details)==null?void 0:i.quantization_level)+" ":""}${(m=a[30].model.ollama)!=null&&m.size?`(${(((b=a[30].model.ollama)==null?void 0:b.size)/1024**3).toFixed(1)}GB)`:""}`,className:"self-end",$$slots:{default:[ct]},$$scope:{ctx:a}}}),{c(){e=V("div"),q(t.$$.fragment),this.h()},l(h){e=N(h,"DIV",{class:!0});var c=O(e);Z(t.$$.fragment,c),c.forEach(g),this.h()},h(){_(e,"class","flex ml-1 items-center")},m(h,c){I(h,e,c),R(t,e,null),l=!0},p(h,c){var k,E,p,v,w,$;const D={};c[0]&512&&(D.content=`${(E=(k=h[30].model.ollama)==null?void 0:k.details)!=null&&E.quantization_level?((v=(p=h[30].model.ollama)==null?void 0:p.details)==null?void 0:v.quantization_level)+" ":""}${(w=h[30].model.ollama)!=null&&w.size?`(${((($=h[30].model.ollama)==null?void 0:$.size)/1024**3).toFixed(1)}GB)`:""}`),c[0]&33554944&&(D.$$scope={dirty:c,ctx:h}),t.$set(D)},i(h){l||(M(t.$$.fragment,h),l=!0)},o(h){C(t.$$.fragment,h),l=!1},d(h){h&&g(e),U(t)}}}function ct(a){var s,r;let e,t=(((r=(s=a[30].model.ollama)==null?void 0:s.details)==null?void 0:r.parameter_size)??"")+"",l;return{c(){e=V("span"),l=H(t),this.h()},l(n){e=N(n,"SPAN",{class:!0});var i=O(e);l=W(i,t),i.forEach(g),this.h()},h(){_(e,"class","text-xs font-medium text-gray-600 dark:text-gray-400")},m(n,i){I(n,e,i),y(e,l)},p(n,i){var m,b;i[0]&512&&t!==(t=(((b=(m=n[30].model.ollama)==null?void 0:m.details)==null?void 0:b.parameter_size)??"")+"")&&G(l,t)},d(n){n&&g(e)}}}function ye(a){let e,t;return e=new fe({props:{content:"External",$$slots:{default:[dt]},$$scope:{ctx:a}}}),{c(){q(e.$$.fragment)},l(l){Z(e.$$.fragment,l)},m(l,s){R(e,l,s),t=!0},i(l){t||(M(e.$$.fragment,l),t=!0)},o(l){C(e.$$.fragment,l),t=!1},d(l){U(e,l)}}}function dt(a){let e,t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-3"><path fill-rule="evenodd" d="M8.914 6.025a.75.75 0 0 1 1.06 0 3.5 3.5 0 0 1 0 4.95l-2 2a3.5 3.5 0 0 1-5.396-4.402.75.75 0 0 1 1.251.827 2 2 0 0 0 3.085 2.514l2-2a2 2 0 0 0 0-2.828.75.75 0 0 1 0-1.06Z" clip-rule="evenodd"></path><path fill-rule="evenodd" d="M7.086 9.975a.75.75 0 0 1-1.06 0 3.5 3.5 0 0 1 0-4.95l2-2a3.5 3.5 0 0 1 5.396 4.402.75.75 0 0 1-1.251-.827 2 2 0 0 0-3.085-2.514l-2 2a2 2 0 0 0 0 2.828.75.75 0 0 1 0 1.06Z" clip-rule="evenodd"></path></svg>';return{c(){e=V("div"),e.innerHTML=t,this.h()},l(l){e=N(l,"DIV",{class:!0,"data-svelte-h":!0}),ie(e)!=="svelte-1oe5yxi"&&(e.innerHTML=t),this.h()},h(){_(e,"class","")},m(l,s){I(l,e,s)},p:le,d(l){l&&g(e)}}}function Ee(a){var l,s,r;let e,t;return e=new fe({props:{content:`${pe((r=(s=(l=a[30].model)==null?void 0:l.info)==null?void 0:s.meta)==null?void 0:r.description).replaceAll(`
`,"<br>")}`,$$slots:{default:[mt]},$$scope:{ctx:a}}}),{c(){q(e.$$.fragment)},l(n){Z(e.$$.fragment,n)},m(n,i){R(e,n,i),t=!0},p(n,i){var b,h,c;const m={};i[0]&512&&(m.content=`${pe((c=(h=(b=n[30].model)==null?void 0:b.info)==null?void 0:h.meta)==null?void 0:c.description).replaceAll(`
`,"<br>")}`),i[0]&33554432&&(m.$$scope={dirty:i,ctx:n}),e.$set(m)},i(n){t||(M(e.$$.fragment,n),t=!0)},o(n){C(e.$$.fragment,n),t=!1},d(n){U(e,n)}}}function mt(a){let e,t='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4"><path stroke-linecap="round" stroke-linejoin="round" d="m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"></path></svg>';return{c(){e=V("div"),e.innerHTML=t,this.h()},l(l){e=N(l,"DIV",{class:!0,"data-svelte-h":!0}),ie(e)!=="svelte-asg5tw"&&(e.innerHTML=t),this.h()},h(){_(e,"class","")},m(l,s){I(l,e,s)},p:le,d(l){l&&g(e)}}}function Me(a){let e,t,l;return t=new at({}),{c(){e=V("div"),q(t.$$.fragment),this.h()},l(s){e=N(s,"DIV",{class:!0});var r=O(e);Z(t.$$.fragment,r),r.forEach(g),this.h()},h(){_(e,"class","ml-auto")},m(s,r){I(s,e,r),R(t,e,null),l=!0},i(s){l||(M(t.$$.fragment,s),l=!0)},o(s){C(t.$$.fragment,s),l=!1},d(s){s&&g(e),U(t)}}}function De(a){var z,o,f,u,P;let e,t,l,s,r=a[30].label+"",n,i,m,b,h,c,D,k,E=a[30].model.owned_by==="ollama"&&(((o=(z=a[30].model.ollama)==null?void 0:z.details)==null?void 0:o.parameter_size)??"")!==""&&$e(a),p=a[30].model.owned_by==="openai"&&ye(a),v=((P=(u=(f=a[30].model)==null?void 0:f.info)==null?void 0:u.meta)==null?void 0:P.description)&&Ee(a),w=a[0]===a[30].value&&Me();function $(){return a[20](a[30])}return{c(){e=V("button"),t=V("div"),l=V("div"),s=V("div"),n=H(r),i=B(),E&&E.c(),m=B(),p&&p.c(),b=B(),v&&v.c(),h=B(),w&&w.c(),this.h()},l(j){e=N(j,"BUTTON",{"aria-label":!0,class:!0});var T=O(e);t=N(T,"DIV",{class:!0});var A=O(t);l=N(A,"DIV",{class:!0});var F=O(l);s=N(F,"DIV",{class:!0});var K=O(s);n=W(K,r),K.forEach(g),i=S(F),E&&E.l(F),F.forEach(g),m=S(A),p&&p.l(A),b=S(A),v&&v.l(A),A.forEach(g),h=S(T),w&&w.l(T),T.forEach(g),this.h()},h(){_(s,"class","line-clamp-1"),_(l,"class","flex items-center"),_(t,"class","flex items-center gap-2"),_(e,"aria-label","model-item"),_(e,"class","flex w-full text-left font-medium line-clamp-1 select-none items-center rounded-button py-2 pl-3 pr-1.5 text-sm text-gray-700 dark:text-gray-100 outline-none transition-all duration-75 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg cursor-pointer data-[highlighted]:bg-muted")},m(j,T){I(j,e,T),y(e,t),y(t,l),y(l,s),y(s,n),y(l,i),E&&E.m(l,null),y(t,m),p&&p.m(t,null),y(t,b),v&&v.m(t,null),y(e,h),w&&w.m(e,null),c=!0,D||(k=oe(e,"click",$),D=!0)},p(j,T){var A,F,K,d,Y;a=j,(!c||T[0]&512)&&r!==(r=a[30].label+"")&&G(n,r),a[30].model.owned_by==="ollama"&&(((F=(A=a[30].model.ollama)==null?void 0:A.details)==null?void 0:F.parameter_size)??"")!==""?E?(E.p(a,T),T[0]&512&&M(E,1)):(E=$e(a),E.c(),M(E,1),E.m(l,null)):E&&(X(),C(E,1,1,()=>{E=null}),x()),a[30].model.owned_by==="openai"?p?T[0]&512&&M(p,1):(p=ye(a),p.c(),M(p,1),p.m(t,b)):p&&(X(),C(p,1,1,()=>{p=null}),x()),(Y=(d=(K=a[30].model)==null?void 0:K.info)==null?void 0:d.meta)!=null&&Y.description?v?(v.p(a,T),T[0]&512&&M(v,1)):(v=Ee(a),v.c(),M(v,1),v.m(t,null)):v&&(X(),C(v,1,1,()=>{v=null}),x()),a[0]===a[30].value?w?T[0]&513&&M(w,1):(w=Me(),w.c(),M(w,1),w.m(e,null)):w&&(X(),C(w,1,1,()=>{w=null}),x())},i(j){c||(M(E),M(p),M(v),M(w),c=!0)},o(j){C(E),C(p),C(v),C(w),c=!1},d(j){j&&g(e),E&&E.d(),p&&p.d(),v&&v.d(),w&&w.d(),D=!1,k()}}}function Ve(a){let e,t=a[11].t('Pull "{{searchValue}}" from Ollama.com',{searchValue:a[5]})+"",l,s,r;return{c(){e=V("button"),l=H(t),this.h()},l(n){e=N(n,"BUTTON",{class:!0});var i=O(e);l=W(i,t),i.forEach(g),this.h()},h(){_(e,"class","flex w-full font-medium line-clamp-1 select-none items-center rounded-button py-2 pl-3 pr-1.5 text-sm text-gray-700 dark:text-gray-100 outline-none transition-all duration-75 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg cursor-pointer data-[highlighted]:bg-muted")},m(n,i){I(n,e,i),y(e,l),s||(r=oe(e,"click",a[21]),s=!0)},p(n,i){i[0]&2080&&t!==(t=n[11].t('Pull "{{searchValue}}" from Ollama.com',{searchValue:n[5]})+"")&&G(l,t)},d(n){n&&g(e),s=!1,r()}}}function Ne(a){let e,t=a[10][a[27]].digest+"",l;return{c(){e=V("div"),l=H(t),this.h()},l(s){e=N(s,"DIV",{class:!0});var r=O(e);l=W(r,t),r.forEach(g),this.h()},h(){_(e,"class","-mt-1 h-fit text-[0.7rem] dark:text-gray-500 line-clamp-1")},m(s,r){I(s,e,r),y(e,l)},p(s,r){r[0]&1024&&t!==(t=s[10][s[27]].digest+"")&&G(l,t)},d(s){s&&g(e)}}}function ht(a){let e,t='<svg class="w-4 h-4 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18 17.94 6M18 18 6.06 6"></path></svg>',l,s;function r(){return a[22](a[27])}return{c(){e=V("button"),e.innerHTML=t,this.h()},l(n){e=N(n,"BUTTON",{class:!0,"data-svelte-h":!0}),ie(e)!=="svelte-19bzgft"&&(e.innerHTML=t),this.h()},h(){_(e,"class","text-gray-800 dark:text-gray-100")},m(n,i){I(n,e,i),l||(s=oe(e,"click",r),l=!0)},p(n,i){a=n},d(n){n&&g(e),l=!1,s()}}}function Ie(a){let e,t,l,s=`<svg class="size-4" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><style>.spinner_ajPY {
											transform-origin: center;
											animation: spinner_AtaB 0.75s infinite linear;
										}
										@keyframes spinner_AtaB {
											100% {
												transform: rotate(360deg);
											}
										}
									</style><path d="M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z" opacity=".25"></path><path d="M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z" class="spinner_ajPY"></path></svg>`,r,n,i,m,b=a[27]+"",h,c,D="pullProgress"in a[10][a[27]]?`(${a[10][a[27]].pullProgress}%)`:"",k,E,p,v,w,$,z,o="digest"in a[10][a[27]]&&a[10][a[27]].digest&&Ne(a);return w=new fe({props:{content:a[11].t("Cancel"),$$slots:{default:[ht]},$$scope:{ctx:a}}}),{c(){e=V("div"),t=V("div"),l=V("div"),l.innerHTML=s,r=B(),n=V("div"),i=V("div"),m=H('Downloading "'),h=H(b),c=H('" '),k=H(D),E=B(),o&&o.c(),p=B(),v=V("div"),q(w.$$.fragment),$=B(),this.h()},l(f){e=N(f,"DIV",{class:!0});var u=O(e);t=N(u,"DIV",{class:!0});var P=O(t);l=N(P,"DIV",{class:!0,"data-svelte-h":!0}),ie(l)!=="svelte-102rp4j"&&(l.innerHTML=s),r=S(P),n=N(P,"DIV",{class:!0});var j=O(n);i=N(j,"DIV",{class:!0});var T=O(i);m=W(T,'Downloading "'),h=W(T,b),c=W(T,'" '),k=W(T,D),T.forEach(g),E=S(j),o&&o.l(j),j.forEach(g),P.forEach(g),p=S(u),v=N(u,"DIV",{class:!0});var A=O(v);Z(w.$$.fragment,A),A.forEach(g),$=S(u),u.forEach(g),this.h()},h(){_(l,"class","-ml-2 mr-2.5 translate-y-0.5"),_(i,"class","line-clamp-1"),_(n,"class","flex flex-col self-start"),_(t,"class","flex"),_(v,"class","mr-2 translate-y-0.5"),_(e,"class","flex w-full justify-between font-medium select-none rounded-button py-2 pl-3 pr-1.5 text-sm text-gray-700 dark:text-gray-100 outline-none transition-all duration-75 rounded-lg cursor-pointer data-[highlighted]:bg-muted")},m(f,u){I(f,e,u),y(e,t),y(t,l),y(t,r),y(t,n),y(n,i),y(i,m),y(i,h),y(i,c),y(i,k),y(n,E),o&&o.m(n,null),y(e,p),y(e,v),R(w,v,null),y(e,$),z=!0},p(f,u){(!z||u[0]&1024)&&b!==(b=f[27]+"")&&G(h,b),(!z||u[0]&1024)&&D!==(D="pullProgress"in f[10][f[27]]?`(${f[10][f[27]].pullProgress}%)`:"")&&G(k,D),"digest"in f[10][f[27]]&&f[10][f[27]].digest?o?o.p(f,u):(o=Ne(f),o.c(),o.m(n,null)):o&&(o.d(1),o=null);const P={};u[0]&2048&&(P.content=f[11].t("Cancel")),u[0]&33555456&&(P.$$scope={dirty:u,ctx:f}),w.$set(P)},i(f){z||(M(w.$$.fragment,f),z=!0)},o(f){C(w.$$.fragment,f),z=!1},d(f){f&&g(e),o&&o.d(),U(w)}}}function _t(a){let e,t,l,s=!(a[5].trim()in a[10])&&a[5]&&a[8]&&a[13].role==="admin",r,n,i,m,b,h,c=a[2]&&be(a),D=ae(a[9]),k=[];for(let o=0;o<D.length;o+=1)k[o]=De(we(a,D,o));const E=o=>C(k[o],1,1,()=>{k[o]=null});let p=null;D.length||(p=ke(a));let v=s&&Ve(a),w=ae(Object.keys(a[10])),$=[];for(let o=0;o<w.length;o+=1)$[o]=Ie(ve(a,w,o));const z=o=>C($[o],1,1,()=>{$[o]=null});return{c(){c&&c.c(),e=B(),t=V("div");for(let o=0;o<k.length;o+=1)k[o].c();p&&p.c(),l=B(),v&&v.c(),r=B();for(let o=0;o<$.length;o+=1)$[o].c();n=B(),i=V("div"),m=B(),b=V("div"),this.h()},l(o){c&&c.l(o),e=S(o),t=N(o,"DIV",{class:!0});var f=O(t);for(let u=0;u<k.length;u+=1)k[u].l(f);p&&p.l(f),l=S(f),v&&v.l(f),r=S(f);for(let u=0;u<$.length;u+=1)$[u].l(f);f.forEach(g),n=S(o),i=N(o,"DIV",{class:!0}),O(i).forEach(g),m=S(o),b=N(o,"DIV",{class:!0}),O(b).forEach(g),this.h()},h(){_(t,"class","px-3 my-2 max-h-64 overflow-y-auto scrollbar-hidden svelte-141e0sl"),_(i,"class","hidden w-[42rem]"),_(b,"class","hidden w-[32rem]")},m(o,f){c&&c.m(o,f),I(o,e,f),I(o,t,f);for(let u=0;u<k.length;u+=1)k[u]&&k[u].m(t,null);p&&p.m(t,null),y(t,l),v&&v.m(t,null),y(t,r);for(let u=0;u<$.length;u+=1)$[u]&&$[u].m(t,null);I(o,n,f),I(o,i,f),I(o,m,f),I(o,b,f),h=!0},p(o,f){if(o[2]?c?(c.p(o,f),f[0]&4&&M(c,1)):(c=be(o),c.c(),M(c,1),c.m(e.parentNode,e)):c&&(X(),C(c,1,1,()=>{c=null}),x()),f[0]&2625){D=ae(o[9]);let u;for(u=0;u<D.length;u+=1){const P=we(o,D,u);k[u]?(k[u].p(P,f),M(k[u],1)):(k[u]=De(P),k[u].c(),M(k[u],1),k[u].m(t,l))}for(X(),u=D.length;u<k.length;u+=1)E(u);x(),!D.length&&p?p.p(o,f):D.length?p&&(p.d(1),p=null):(p=ke(o),p.c(),p.m(t,l))}if(f[0]&9504&&(s=!(o[5].trim()in o[10])&&o[5]&&o[8]&&o[13].role==="admin"),s?v?v.p(o,f):(v=Ve(o),v.c(),v.m(t,r)):v&&(v.d(1),v=null),f[0]&68608){w=ae(Object.keys(o[10]));let u;for(u=0;u<w.length;u+=1){const P=ve(o,w,u);$[u]?($[u].p(P,f),M($[u],1)):($[u]=Ie(P),$[u].c(),M($[u],1),$[u].m(t,null))}for(X(),u=w.length;u<$.length;u+=1)z(u);x()}},i(o){if(!h){M(c);for(let f=0;f<D.length;f+=1)M(k[f]);for(let f=0;f<w.length;f+=1)M($[f]);h=!0}},o(o){C(c),k=k.filter(Boolean);for(let f=0;f<k.length;f+=1)C(k[f]);$=$.filter(Boolean);for(let f=0;f<$.length;f+=1)C($[f]);h=!1},d(o){o&&(g(e),g(t),g(n),g(i),g(m),g(b)),c&&c.d(o),_e(k,o),p&&p.d(),v&&v.d(),_e($,o)}}}function gt(a){let e;const t=a[18].default,l=je(t,a,a[25],null),s=l||_t(a);return{c(){s&&s.c()},l(r){s&&s.l(r)},m(r,n){s&&s.m(r,n),e=!0},p(r,n){l?l.p&&(!e||n[0]&33554432)&&Le(l,t,r,r[25],e?He(t,r[25],n,null):Ae(r[25]),null):s&&s.p&&(!e||n[0]&12141)&&s.p(r,e?n:[-1,-1])},i(r){e||(M(s,r),e=!0)},o(r){C(s,r),e=!1},d(r){s&&s.d(r)}}}function pt(a){let e,t,l,s;return e=new Re({props:{class:"relative w-full","aria-label":a[1],$$slots:{default:[ut]},$$scope:{ctx:a}}}),l=new Ue({props:{class:" z-40 "+(a[12]?"w-full":`${a[4]}`)+" max-w-[calc(100vw-1rem)] justify-start rounded-xl  bg-white dark:bg-gray-850 dark:text-white shadow-lg border border-gray-300/30 dark:border-gray-700/50  outline-none ",transition:Je,side:a[12]?"bottom":"bottom-start",sideOffset:4,$$slots:{default:[gt]},$$scope:{ctx:a}}}),{c(){q(e.$$.fragment),t=B(),q(l.$$.fragment)},l(r){Z(e.$$.fragment,r),t=S(r),Z(l.$$.fragment,r)},m(r,n){R(e,r,n),I(r,t,n),R(l,r,n),s=!0},p(r,n){const i={};n[0]&2&&(i["aria-label"]=r[1]),n[0]&33554562&&(i.$$scope={dirty:n,ctx:r}),e.$set(i);const m={};n[0]&4112&&(m.class=" z-40 "+(r[12]?"w-full":`${r[4]}`)+" max-w-[calc(100vw-1rem)] justify-start rounded-xl  bg-white dark:bg-gray-850 dark:text-white shadow-lg border border-gray-300/30 dark:border-gray-700/50  outline-none "),n[0]&4096&&(m.side=r[12]?"bottom":"bottom-start"),n[0]&33566573&&(m.$$scope={dirty:n,ctx:r}),l.$set(m)},i(r){s||(M(e.$$.fragment,r),M(l.$$.fragment,r),s=!0)},o(r){C(e.$$.fragment,r),C(l.$$.fragment,r),s=!1},d(r){r&&g(t),U(e,r),U(l,r)}}}function vt(a){let e,t,l;function s(n){a[24](n)}let r={onOpenChange:a[23],$$slots:{default:[pt]},$$scope:{ctx:a}};return a[6]!==void 0&&(r.open=a[6]),e=new qe({props:r}),Te.push(()=>We(e,"open",s)),{c(){q(e.$$.fragment)},l(n){Z(e.$$.fragment,n)},m(n,i){R(e,n,i),l=!0},p(n,i){const m={};i[0]&32&&(m.onOpenChange=n[23]),i[0]&33570815&&(m.$$scope={dirty:i,ctx:n}),!t&&i[0]&64&&(t=!0,m.open=n[6],ze(()=>t=!1)),e.$set(m)},i(n){l||(M(e.$$.fragment,n),l=!0)},o(n){C(e.$$.fragment,n),l=!1},d(n){U(e,n)}}}function wt(a,e,t){let l,s,r,n,i;se(a,te,d=>t(10,s=d)),se(a,Qe,d=>t(12,n=d)),se(a,Xe,d=>t(13,i=d));let{$$slots:m={},$$scope:b}=e;const h=Pe("i18n");se(a,h,d=>t(11,r=d)),Be();let{value:c=""}=e,{placeholder:D="Select a model"}=e,{searchEnabled:k=!0}=e,{searchPlaceholder:E=r.t("Search a model")}=e,{items:p=[]}=e,{className:v="w-[30rem]"}=e,w=!1,$="",z="",o=null;const f=async()=>{const d=z.trim().replace(/^ollama\s+(run|pull)\s+/,"");if(console.log(s),s[d]){J.error(r.t("Model '{{modelTag}}' is already in queue for downloading.",{modelTag:d}));return}if(Object.keys(s).length===3){J.error(r.t("Maximum of 3 models can be downloaded simultaneously. Please try again later."));return}const Y=await Fe(localStorage.token,d,"0").catch(ee=>(J.error(ee),null));if(Y){const ee=Y.body.pipeThrough(new TextDecoderStream).pipeThrough(et(`
`)).getReader();for(;;)try{const{value:Q,done:Ce}=await ee.read();if(Ce)break;let Oe=Q.split(`
`);for(const he of Oe)if(he!==""){let L=JSON.parse(he);if(console.log(L),L.error)throw L.error;if(L.detail)throw L.detail;if(L.id&&(te.set({...s,[d]:{...s[d],requestId:L.id,reader:ee,done:!1}}),console.log(L)),L.status)if(L.digest){let ue=0;L.completed?ue=Math.round(L.completed/L.total*1e3)/10:ue=100,te.set({...s,[d]:{...s[d],pullProgress:ue,digest:L.digest}})}else J.success(L.status),te.set({...s,[d]:{...s[d],done:L.status==="success"}})}}catch(Q){console.log(Q),typeof Q!="string"&&(Q=Q.message),J.error(Q)}s[d].done?(J.success(r.t("Model '{{modelName}}' has been successfully downloaded.",{modelName:d})),xe.set(await tt(localStorage.token))):J.error(r.t("Download canceled")),delete s[d],te.set({...s})}};Se(async()=>{t(8,o=await Ze(localStorage.token).catch(d=>!1))});const u=async d=>{const{reader:Y,requestId:ee}=s[d];Y&&(await Y.cancel(),await Ge(localStorage.token,ee),delete s[d],te.set({...s}),await Ye(localStorage.token,d),J.success(`${d} download has been canceled`))};function P(){z=this.value,t(5,z)}const j=d=>{t(0,c=d.value),t(6,w=!1)},T=()=>{f()},A=d=>{u(d)},F=async()=>{t(5,z=""),window.setTimeout(()=>{var d;return(d=document.getElementById("model-search-input"))==null?void 0:d.focus()},0)};function K(d){w=d,t(6,w)}return a.$$set=d=>{"value"in d&&t(0,c=d.value),"placeholder"in d&&t(1,D=d.placeholder),"searchEnabled"in d&&t(2,k=d.searchEnabled),"searchPlaceholder"in d&&t(3,E=d.searchPlaceholder),"items"in d&&t(17,p=d.items),"className"in d&&t(4,v=d.className),"$$scope"in d&&t(25,b=d.$$scope)},a.$$.update=()=>{a.$$.dirty[0]&131073&&t(7,$=p.find(d=>d.value===c)??""),a.$$.dirty[0]&131104&&t(9,l=z?p.filter(d=>d.value.toLowerCase().includes(z.toLowerCase())):p)},[c,D,k,E,v,z,w,$,o,l,s,r,n,i,h,f,u,p,m,P,j,T,A,F,K,b]}class Ot extends de{constructor(e){super(),me(this,e,wt,vt,ce,{value:0,placeholder:1,searchEnabled:2,searchPlaceholder:3,items:17,className:4},null,[-1,-1])}}export{Ot as S};
//# sourceMappingURL=Selector.99a0a800.js.map
