import{q as ce,g as me,k as _e,e as Fe,c as Ge,l as Ye}from"./index.a679fc74.js";import{s as X,e as de,i as $,d as f,I as Se,w as Q,x as ve,y as Xe,p as he,E as le,F as ne,G as ae,H as oe,f as S,g as M,h as j,_ as Me,Z as Ke,u as z,v as He,X as be,W as ke,a as N,c as L,R as x,j as h,C as ee,o as Qe,z as re,A as ie,r as w,P as Pe,l as H,m as P,n as W}from"./scheduler.bc5a4ea8.js";import{S as te,i as se,g as We,t as A,c as Re,a as B,f as ye,b as R,d as q,m as Z,e as J}from"./index.5e522d2c.js";import{f as xe,h as et}from"./updater.0c1a7d23.js";import{g as tt}from"./spread.8a54911c.js";import{A as st,B as qe,C as Ze,M as Je}from"./menu-trigger.f7b2c633.js";import{f as lt}from"./index.e8e699b3.js";import{w as nt,x as at,j as je,l as Be,y as ot,k as rt,b as it,i as pe,z as ct,A as ft}from"./index.c91489ce.js";import{T as ut}from"./Tags.220b3131.js";import{a as Ae}from"./Toaster.svelte_svelte_type_style_lang.264cdd7d.js";import{a as dt}from"./index.9a95918f.js";import{M as ht,f as mt}from"./dayjs.min.8884afd3.js";import{g as _t}from"./navigation.a54d0b03.js";const pt=n=>({builder:n&8}),Ne=n=>({builder:n[3]}),gt=n=>({builder:n&8}),Le=n=>({builder:n[3]});function wt(n){let e=n[1]?"a":"div",s,t,l=(n[1]?"a":"div")&&ge(n);return{c(){l&&l.c(),s=de()},l(r){l&&l.l(r),s=de()},m(r,o){l&&l.m(r,o),$(r,s,o),t=!0},p(r,o){r[1],e?X(e,r[1]?"a":"div")?(l.d(1),l=ge(r),e=r[1]?"a":"div",l.c(),l.m(s.parentNode,s)):l.p(r,o):(l=ge(r),e=r[1]?"a":"div",l.c(),l.m(s.parentNode,s))},i(r){t||(B(l,r),t=!0)},o(r){A(l,r),t=!1},d(r){r&&f(s),l&&l.d(r)}}}function vt(n){let e;const s=n[11].default,t=le(s,n,n[10],Le);return{c(){t&&t.c()},l(l){t&&t.l(l)},m(l,r){t&&t.m(l,r),e=!0},p(l,r){t&&t.p&&(!e||r&1032)&&ne(t,s,l,l[10],e?oe(s,l[10],r,gt):ae(l[10]),Le)},i(l){e||(B(t,l),e=!0)},o(l){A(t,l),e=!1},d(l){t&&t.d(l)}}}function ge(n){let e,s,t,l;const r=n[11].default,o=le(r,n,n[10],Ne);let a=[{href:n[1]},n[3],n[6]],i={};for(let c=0;c<a.length;c+=1)i=ve(i,a[c]);return{c(){e=S(n[1]?"a":"div"),o&&o.c(),this.h()},l(c){e=M(c,((n[1]?"a":"div")||"null").toUpperCase(),{href:!0});var u=j(e);o&&o.l(u),u.forEach(f),this.h()},h(){Me(n[1]?"a":"div")(e,i)},m(c,u){$(c,e,u),o&&o.m(e,null),n[12](e),s=!0,t||(l=[Ke(n[3].action(e)),z(e,"m-click",n[5]),z(e,"m-focusin",n[5]),z(e,"m-focusout",n[5]),z(e,"m-keydown",n[5]),z(e,"m-pointerdown",n[5]),z(e,"m-pointerleave",n[5]),z(e,"m-pointermove",n[5])],t=!0)},p(c,u){o&&o.p&&(!s||u&1032)&&ne(o,r,c,c[10],s?oe(r,c[10],u,pt):ae(c[10]),Ne),Me(c[1]?"a":"div")(e,i=tt(a,[(!s||u&2)&&{href:c[1]},u&8&&c[3],u&64&&c[6]]))},i(c){s||(B(o,c),s=!0)},o(c){A(o,c),s=!1},d(c){c&&f(e),o&&o.d(c),n[12](null),t=!1,He(l)}}}function bt(n){let e,s,t,l;const r=[vt,wt],o=[];function a(i,c){return i[2]?0:1}return e=a(n),s=o[e]=r[e](n),{c(){s.c(),t=de()},l(i){s.l(i),t=de()},m(i,c){o[e].m(i,c),$(i,t,c),l=!0},p(i,[c]){let u=e;e=a(i),e===u?o[e].p(i,c):(We(),A(o[u],1,1,()=>{o[u]=null}),Re(),s=o[e],s?s.p(i,c):(s=o[e]=r[e](i),s.c()),B(s,1),s.m(t.parentNode,t))},i(i){l||(B(s),l=!0)},o(i){A(s),l=!1},d(i){i&&f(t),o[e].d(i)}}}function kt(n,e,s){let t,l;const r=["href","asChild","disabled","el"];let o=Se(e,r),a,{$$slots:i={},$$scope:c}=e,{href:u=void 0}=e,{asChild:d=!1}=e,{disabled:b=!1}=e,{el:p=void 0}=e;const{elements:{item:k},getAttrs:T}=st();Q(n,k,_=>s(9,a=_));const I=xe();function y(_){he[_?"unshift":"push"](()=>{p=_,s(0,p)})}return n.$$set=_=>{e=ve(ve({},e),Xe(_)),s(6,o=Se(e,r)),"href"in _&&s(1,u=_.href),"asChild"in _&&s(2,d=_.asChild),"disabled"in _&&s(7,b=_.disabled),"el"in _&&s(0,p=_.el),"$$scope"in _&&s(10,c=_.$$scope)},n.$$.update=()=>{n.$$.dirty&512&&s(3,t=a),n.$$.dirty&128&&s(8,l={...T("item"),...et(b)}),n.$$.dirty&264&&Object.assign(t,l)},[p,u,d,t,k,I,o,b,l,a,c,i,y]}class we extends te{constructor(e){super(),se(this,e,kt,bt,X,{href:1,asChild:2,disabled:7,el:0})}}const hs=async n=>{let e=null;const s=await fetch(`${ce}/memories`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${n}`}}).then(async t=>{if(!t.ok)throw await t.json();return t.json()}).catch(t=>(e=t.detail,console.log(t),null));if(e)throw e;return s},ms=async(n,e)=>{let s=null;const t=await fetch(`${ce}/memories/add`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${n}`},body:JSON.stringify({content:e})}).then(async l=>{if(!l.ok)throw await l.json();return l.json()}).catch(l=>(s=l.detail,console.log(l),null));if(s)throw s;return t},_s=async(n,e)=>{let s=null;const t=await fetch(`${ce}/memories/query`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${n}`},body:JSON.stringify({content:e})}).then(async l=>{if(!l.ok)throw await l.json();return l.json()}).catch(l=>(s=l.detail,console.log(l),null));if(s)throw s;return t},ps=async(n,e)=>{let s=null;const t=await fetch(`${ce}/memories/${e}`,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${n}`}}).then(async l=>{if(!l.ok)throw await l.json();return l.json()}).then(l=>l).catch(l=>(s=l.detail,console.log(l),null));if(s)throw s;return t},gs=async n=>{let e=null;const s=await fetch(`${ce}/memories/user`,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${n}`}}).then(async t=>{if(!t.ok)throw await t.json();return t.json()}).then(t=>t).catch(t=>(e=t.detail,console.log(t),null));if(e)throw e;return s},yt=n=>({}),De=n=>({});function $t(n){let e;const s=n[2].default,t=le(s,n,n[5],null);return{c(){t&&t.c()},l(l){t&&t.l(l)},m(l,r){t&&t.m(l,r),e=!0},p(l,r){t&&t.p&&(!e||r&32)&&ne(t,s,l,l[5],e?oe(s,l[5],r,null):ae(l[5]),null)},i(l){e||(B(t,l),e=!0)},o(l){A(t,l),e=!1},d(l){t&&t.d(l)}}}function Ct(n){let e,s="Profile";return{c(){e=S("div"),e.textContent=s,this.h()},l(t){e=M(t,"DIV",{class:!0,"data-svelte-h":!0}),x(e)!=="svelte-1jfjm7"&&(e.textContent=s),this.h()},h(){h(e,"class","flex items-center")},m(t,l){$(t,e,l)},p:ee,d(t){t&&f(e)}}}function Tt(n){let e,s="Profile";return{c(){e=S("div"),e.textContent=s,this.h()},l(t){e=M(t,"DIV",{class:!0,"data-svelte-h":!0}),x(e)!=="svelte-1jfjm7"&&(e.textContent=s),this.h()},h(){h(e,"class","flex items-center")},m(t,l){$(t,e,l)},p:ee,d(t){t&&f(e)}}}function It(n){let e,s="Profile";return{c(){e=S("div"),e.textContent=s,this.h()},l(t){e=M(t,"DIV",{class:!0,"data-svelte-h":!0}),x(e)!=="svelte-1jfjm7"&&(e.textContent=s),this.h()},h(){h(e,"class","flex items-center")},m(t,l){$(t,e,l)},p:ee,d(t){t&&f(e)}}}function Et(n){let e,s,t,l,r,o;return e=new we({props:{class:"flex items-center px-3 py-2 text-sm  font-medium",$$slots:{default:[Ct]},$$scope:{ctx:n}}}),t=new we({props:{class:"flex items-center px-3 py-2 text-sm  font-medium",$$slots:{default:[Tt]},$$scope:{ctx:n}}}),r=new we({props:{class:"flex items-center px-3 py-2 text-sm  font-medium",$$slots:{default:[It]},$$scope:{ctx:n}}}),{c(){R(e.$$.fragment),s=N(),R(t.$$.fragment),l=N(),R(r.$$.fragment)},l(a){q(e.$$.fragment,a),s=L(a),q(t.$$.fragment,a),l=L(a),q(r.$$.fragment,a)},m(a,i){Z(e,a,i),$(a,s,i),Z(t,a,i),$(a,l,i),Z(r,a,i),o=!0},p(a,i){const c={};i&32&&(c.$$scope={dirty:i,ctx:a}),e.$set(c);const u={};i&32&&(u.$$scope={dirty:i,ctx:a}),t.$set(u);const d={};i&32&&(d.$$scope={dirty:i,ctx:a}),r.$set(d)},i(a){o||(B(e.$$.fragment,a),B(t.$$.fragment,a),B(r.$$.fragment,a),o=!0)},o(a){A(e.$$.fragment,a),A(t.$$.fragment,a),A(r.$$.fragment,a),o=!1},d(a){a&&(f(s),f(l)),J(e,a),J(t,a),J(r,a)}}}function St(n){let e,s;return e=new Je({props:{class:"w-full max-w-[130px] rounded-lg px-1 py-1.5 border border-gray-700 z-50 bg-gray-850 text-white",sideOffset:8,side:"bottom",align:"start",transition:lt,$$slots:{default:[Et]},$$scope:{ctx:n}}}),{c(){R(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,l){Z(e,t,l),s=!0},p(t,l){const r={};l&32&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){s||(B(e.$$.fragment,t),s=!0)},o(t){A(e.$$.fragment,t),s=!1},d(t){J(e,t)}}}function Mt(n){let e,s,t;e=new Ze({props:{$$slots:{default:[$t]},$$scope:{ctx:n}}});const l=n[2].content,r=le(l,n,n[5],De),o=r||St(n);return{c(){R(e.$$.fragment),s=N(),o&&o.c()},l(a){q(e.$$.fragment,a),s=L(a),o&&o.l(a)},m(a,i){Z(e,a,i),$(a,s,i),o&&o.m(a,i),t=!0},p(a,i){const c={};i&32&&(c.$$scope={dirty:i,ctx:a}),e.$set(c),r&&r.p&&(!t||i&32)&&ne(r,l,a,a[5],t?oe(l,a[5],i,yt):ae(a[5]),De)},i(a){t||(B(e.$$.fragment,a),B(o,a),t=!0)},o(a){A(e.$$.fragment,a),A(o,a),t=!1},d(a){a&&f(s),J(e,a),o&&o.d(a)}}}function jt(n){let e,s,t;function l(o){n[4](o)}let r={closeFocus:!1,onOpenChange:n[3],$$slots:{default:[Mt]},$$scope:{ctx:n}};return n[0]!==void 0&&(r.open=n[0]),e=new qe({props:r}),he.push(()=>ye(e,"open",l)),{c(){R(e.$$.fragment)},l(o){q(e.$$.fragment,o)},m(o,a){Z(e,o,a),t=!0},p(o,[a]){const i={};a&32&&(i.$$scope={dirty:a,ctx:o}),!s&&a&1&&(s=!0,i.open=o[0],be(()=>s=!1)),e.$set(i)},i(o){t||(B(e.$$.fragment,o),t=!0)},o(o){A(e.$$.fragment,o),t=!1},d(o){J(e,o)}}}function Bt(n,e,s){let{$$slots:t={},$$scope:l}=e,{show:r=!1}=e;const o=ke(),a=c=>{o("change",c)};function i(c){r=c,s(0,r)}return n.$$set=c=>{"show"in c&&s(0,r=c.show),"$$scope"in c&&s(5,l=c.$$scope)},[r,o,t,a,i,l]}class ws extends te{constructor(e){super(),se(this,e,Bt,jt,X,{show:0})}}function At(n){let e,s;return e=new ut({props:{tags:n[0],deleteTag:n[2],addTag:n[1]}}),{c(){R(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,l){Z(e,t,l),s=!0},p(t,[l]){const r={};l&1&&(r.tags=t[0]),e.$set(r)},i(t){s||(B(e.$$.fragment,t),s=!0)},o(t){A(e.$$.fragment,t),s=!1},d(t){J(e,t)}}}function Nt(n,e,s){let t,l;Q(n,me,d=>s(4,t=d)),Q(n,_e,d=>s(5,l=d));const r=ke();let{chatId:o=""}=e,a=[];const i=async()=>await nt(localStorage.token,o).catch(async d=>[]),c=async d=>{await at(localStorage.token,o,d),s(0,a=await i()),await je(localStorage.token,o,{tags:a}),_e.set(await Be(localStorage.token))},u=async d=>{await ot(localStorage.token,o,d),s(0,a=await i()),await je(localStorage.token,o,{tags:a}),console.log(l),await _e.set(await Be(localStorage.token)),console.log(l),l.map(b=>b.name).includes(d)?(await me.set(await rt(localStorage.token,d)),t.find(b=>b.id===o)&&r("close")):await me.set(await it(localStorage.token))};return Qe(async()=>{o&&s(0,a=await i())}),n.$$set=d=>{"chatId"in d&&s(3,o=d.chatId)},[a,c,u,o]}class vs extends te{constructor(e){super(),se(this,e,Nt,At,X,{chatId:3})}}function Lt(n){let e,s;return{c(){e=re("svg"),s=re("path"),this.h()},l(t){e=ie(t,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var l=j(e);s=ie(l,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),j(s).forEach(f),l.forEach(f),this.h()},h(){h(s,"stroke-linecap","round"),h(s,"stroke-linejoin","round"),h(s,"d","m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z"),h(e,"xmlns","http://www.w3.org/2000/svg"),h(e,"fill","none"),h(e,"viewBox","0 0 24 24"),h(e,"stroke-width",n[1]),h(e,"stroke","currentColor"),h(e,"class",n[0])},m(t,l){$(t,e,l),w(e,s)},p(t,[l]){l&2&&h(e,"stroke-width",t[1]),l&1&&h(e,"class",t[0])},i:ee,o:ee,d(t){t&&f(e)}}}function Dt(n,e,s){let{className:t="size-3.5"}=e,{strokeWidth:l="2.5"}=e;return n.$$set=r=>{"className"in r&&s(0,t=r.className),"strokeWidth"in r&&s(1,l=r.strokeWidth)},[t,l]}class Ut extends te{constructor(e){super(),se(this,e,Dt,Lt,X,{className:0,strokeWidth:1})}}function Ot(n){let e,s,t;return{c(){e=re("svg"),s=re("path"),t=re("path"),this.h()},l(l){e=ie(l,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var r=j(e);s=ie(r,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),j(s).forEach(f),t=ie(r,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),j(t).forEach(f),r.forEach(f),this.h()},h(){h(s,"fill-rule","evenodd"),h(s,"d","M8.914 6.025a.75.75 0 0 1 1.06 0 3.5 3.5 0 0 1 0 4.95l-2 2a3.5 3.5 0 0 1-5.396-4.402.75.75 0 0 1 1.251.827 2 2 0 0 0 3.085 2.514l2-2a2 2 0 0 0 0-2.828.75.75 0 0 1 0-1.06Z"),h(s,"clip-rule","evenodd"),h(t,"fill-rule","evenodd"),h(t,"d","M7.086 9.975a.75.75 0 0 1-1.06 0 3.5 3.5 0 0 1 0-4.95l2-2a3.5 3.5 0 0 1 5.396 4.402.75.75 0 0 1-1.251-.827 2 2 0 0 0-3.085-2.514l-2 2a2 2 0 0 0 0 2.828.75.75 0 0 1 0 1.06Z"),h(t,"clip-rule","evenodd"),h(e,"xmlns","http://www.w3.org/2000/svg"),h(e,"viewBox","0 0 16 16"),h(e,"fill","currentColor"),h(e,"class",n[0])},m(l,r){$(l,e,r),w(e,s),w(e,t)},p(l,[r]){r&1&&h(e,"class",l[0])},i:ee,o:ee,d(l){l&&f(e)}}}function Vt(n,e,s){let{className:t="w-4 h-4"}=e;return n.$$set=l=>{"className"in l&&s(0,t=l.className)},[t]}class zt extends te{constructor(e){super(),se(this,e,Vt,Ot,X,{className:0})}}function Ue(n){var D;let e,s,t,l,r,o,a,i,c,u,d,b,p;function k(m,v){return m[2].share_id?Pt:Ht}let T=k(n),I=T(n),y=((D=n[4])==null?void 0:D.features.enable_community_sharing)&&Oe(n);c=new zt({});function _(m,v){return m[2].share_id?Rt:Wt}let g=_(n),E=g(n);return{c(){e=S("div"),s=S("div"),I.c(),t=N(),l=S("div"),r=S("div"),o=S("div"),y&&y.c(),a=N(),i=S("button"),R(c.$$.fragment),u=N(),E.c(),this.h()},l(m){e=M(m,"DIV",{class:!0});var v=j(e);s=M(v,"DIV",{class:!0});var V=j(s);I.l(V),V.forEach(f),t=L(v),l=M(v,"DIV",{class:!0});var G=j(l);r=M(G,"DIV",{class:!0});var K=j(r);o=M(K,"DIV",{class:!0});var F=j(o);y&&y.l(F),a=L(F),i=M(F,"BUTTON",{class:!0,type:!0,id:!0});var Y=j(i);q(c.$$.fragment,Y),u=L(Y),E.l(Y),Y.forEach(f),F.forEach(f),K.forEach(f),G.forEach(f),v.forEach(f),this.h()},h(){h(s,"class","text-sm dark:text-gray-300 mb-1"),h(i,"class","self-center flex items-center gap-1 px-3.5 py-2 rounded-xl text-sm font-medium bg-emerald-600 hover:bg-emerald-500 text-white"),h(i,"type","button"),h(i,"id","copy-and-share-chat-button"),h(o,"class","flex gap-1"),h(r,"class","flex flex-col items-end space-x-1 mt-1.5"),h(l,"class","flex justify-end"),h(e,"class","px-5 pt-4 pb-5 w-full flex flex-col justify-center")},m(m,v){$(m,e,v),w(e,s),I.m(s,null),w(e,t),w(e,l),w(l,r),w(r,o),y&&y.m(o,null),w(o,a),w(o,i),Z(c,i,null),w(i,u),E.m(i,null),d=!0,b||(p=z(i,"click",n[11]),b=!0)},p(m,v){var V;T===(T=k(m))&&I?I.p(m,v):(I.d(1),I=T(m),I&&(I.c(),I.m(s,null))),(V=m[4])!=null&&V.features.enable_community_sharing?y?y.p(m,v):(y=Oe(m),y.c(),y.m(o,a)):y&&(y.d(1),y=null),g===(g=_(m))&&E?E.p(m,v):(E.d(1),E=g(m),E&&(E.c(),E.m(i,null)))},i(m){d||(B(c.$$.fragment,m),d=!0)},o(m){A(c.$$.fragment,m),d=!1},d(m){m&&f(e),I.d(),y&&y.d(),J(c),E.d(),b=!1,p()}}}function Ht(n){let e=n[3].t("Messages you send after creating your link won't be shared. Users with the URL will be able to view the shared chat.")+"",s;return{c(){s=H(e)},l(t){s=P(t,e)},m(t,l){$(t,s,l)},p(t,l){l&8&&e!==(e=t[3].t("Messages you send after creating your link won't be shared. Users with the URL will be able to view the shared chat.")+"")&&W(s,e)},d(t){t&&f(s)}}}function Pt(n){let e,s=n[3].t("You have shared this chat")+"",t,l,r,o=n[3].t("before")+"",a,i,c,u,d=n[3].t("Click here to")+"",b,p,k,T=n[3].t("delete this link")+"",I,y,_=n[3].t("and create a new shared link.")+"",g,E,D;return{c(){e=S("a"),t=H(s),l=N(),r=S("span"),a=H(o),i=H("."),u=N(),b=H(d),p=N(),k=S("button"),I=H(T),y=N(),g=H(_),this.h()},l(m){e=M(m,"A",{href:!0,target:!0});var v=j(e);t=P(v,s),l=L(v),r=M(v,"SPAN",{class:!0});var V=j(r);a=P(V,o),V.forEach(f),i=P(v,"."),v.forEach(f),u=L(m),b=P(m,d),p=L(m),k=M(m,"BUTTON",{class:!0});var G=j(k);I=P(G,T),G.forEach(f),y=L(m),g=P(m,_),this.h()},h(){h(r,"class","underline"),h(e,"href",c="/s/"+n[2].share_id),h(e,"target","_blank"),h(k,"class","underline")},m(m,v){$(m,e,v),w(e,t),w(e,l),w(e,r),w(r,a),w(e,i),$(m,u,v),$(m,b,v),$(m,p,v),$(m,k,v),w(k,I),$(m,y,v),$(m,g,v),E||(D=z(k,"click",n[9]),E=!0)},p(m,v){v&8&&s!==(s=m[3].t("You have shared this chat")+"")&&W(t,s),v&8&&o!==(o=m[3].t("before")+"")&&W(a,o),v&4&&c!==(c="/s/"+m[2].share_id)&&h(e,"href",c),v&8&&d!==(d=m[3].t("Click here to")+"")&&W(b,d),v&8&&T!==(T=m[3].t("delete this link")+"")&&W(I,T),v&8&&_!==(_=m[3].t("and create a new shared link.")+"")&&W(g,_)},d(m){m&&(f(e),f(u),f(b),f(p),f(k),f(y),f(g)),E=!1,D()}}}function Oe(n){let e,s=n[3].t("Share to OpenWebUI Community")+"",t,l,r;return{c(){e=S("button"),t=H(s),this.h()},l(o){e=M(o,"BUTTON",{class:!0,type:!0});var a=j(e);t=P(a,s),a.forEach(f),this.h()},h(){h(e,"class","self-center px-3.5 py-2 rounded-xl text-sm font-medium bg-gray-100 hover:bg-gray-200 text-gray-800 dark:bg-gray-850 dark:hover:bg-gray-800 dark:text-white"),h(e,"type","button")},m(o,a){$(o,e,a),w(e,t),l||(r=z(e,"click",n[10]),l=!0)},p(o,a){a&8&&s!==(s=o[3].t("Share to OpenWebUI Community")+"")&&W(t,s)},d(o){o&&f(e),l=!1,r()}}}function Wt(n){let e=n[3].t("Copy Link")+"",s;return{c(){s=H(e)},l(t){s=P(t,e)},m(t,l){$(t,s,l)},p(t,l){l&8&&e!==(e=t[3].t("Copy Link")+"")&&W(s,e)},d(t){t&&f(s)}}}function Rt(n){let e=n[3].t("Update and Copy Link")+"",s;return{c(){s=H(e)},l(t){s=P(t,e)},m(t,l){$(t,s,l)},p(t,l){l&8&&e!==(e=t[3].t("Update and Copy Link")+"")&&W(s,e)},d(t){t&&f(s)}}}function qt(n){let e,s,t,l=n[3].t("Share Chat")+"",r,o,a,i='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"></path></svg>',c,u,d,b,p=n[2]&&Ue(n);return{c(){e=S("div"),s=S("div"),t=S("div"),r=H(l),o=N(),a=S("button"),a.innerHTML=i,c=N(),p&&p.c(),this.h()},l(k){e=M(k,"DIV",{});var T=j(e);s=M(T,"DIV",{class:!0});var I=j(s);t=M(I,"DIV",{class:!0});var y=j(t);r=P(y,l),y.forEach(f),o=L(I),a=M(I,"BUTTON",{class:!0,"data-svelte-h":!0}),x(a)!=="svelte-745w2y"&&(a.innerHTML=i),I.forEach(f),c=L(T),p&&p.l(T),T.forEach(f),this.h()},h(){h(t,"class","text-lg font-medium self-center"),h(a,"class","self-center"),h(s,"class","flex justify-between dark:text-gray-300 px-5 pt-4 pb-0.5")},m(k,T){$(k,e,T),w(e,s),w(s,t),w(t,r),w(s,o),w(s,a),w(e,c),p&&p.m(e,null),u=!0,d||(b=z(a,"click",n[8]),d=!0)},p(k,T){(!u||T&8)&&l!==(l=k[3].t("Share Chat")+"")&&W(r,l),k[2]?p?(p.p(k,T),T&4&&B(p,1)):(p=Ue(k),p.c(),B(p,1),p.m(e,null)):p&&(We(),A(p,1,1,()=>{p=null}),Re())},i(k){u||(B(p),u=!0)},o(k){A(p),u=!1},d(k){k&&f(e),p&&p.d(),d=!1,b()}}}function Zt(n){let e,s,t;function l(o){n[12](o)}let r={size:"sm",$$slots:{default:[qt]},$$scope:{ctx:n}};return n[0]!==void 0&&(r.show=n[0]),e=new ht({props:r}),he.push(()=>ye(e,"show",l)),{c(){R(e.$$.fragment)},l(o){q(e.$$.fragment,o)},m(o,a){Z(e,o,a),t=!0},p(o,[a]){const i={};a&65567&&(i.$$scope={dirty:a,ctx:o}),!s&&a&1&&(s=!0,i.show=o[0],be(()=>s=!1)),e.$set(i)},i(o){t||(B(e.$$.fragment,o),t=!0)},o(o){A(e.$$.fragment,o),t=!1},d(o){J(e,o)}}}function Jt(n,e,s){let t,l,r;Q(n,Fe,g=>s(14,t=g)),Q(n,Ge,g=>s(4,r=g));let{chatId:o}=e,a=null,i=null;const c=Pe("i18n");Q(n,c,g=>s(3,l=g));const u=async()=>{const g=await ct(localStorage.token,o);return i=`${window.location.origin}/s/${g.id}`,console.log(i),s(2,a=await pe(localStorage.token,o)),i},d=async()=>{const g=a.chat;console.log("share",g),Ae.success(l.t("Redirecting you to OpenWebUI Community"));const E="https://openwebui.com",D=await window.open(`${E}/chats/upload`,"_blank");window.addEventListener("message",m=>{m.origin===E&&m.data==="loaded"&&D.postMessage(JSON.stringify({chat:g,models:t.filter(v=>g.models.includes(v.id))}),"*")},!1)};let{show:b=!1}=e;const p=g=>a?g?a.id!==g.id||a.share_id!==g.share_id:!1:!0,k=()=>{s(0,b=!1)},T=async()=>{await ft(localStorage.token,o)&&s(2,a=await pe(localStorage.token,o))},I=()=>{d(),s(0,b=!1)},y=async()=>{if(/^((?!chrome|android).)*safari/i.test(navigator.userAgent)){console.log("isSafari");const E=async()=>{const D=await u();return new Blob([D],{type:"text/plain"})};navigator.clipboard.write([new ClipboardItem({"text/plain":E()})]).then(()=>(console.log("Async: Copying to clipboard was successful!"),!0)).catch(D=>(console.error("Async: Could not copy text: ",D),!1))}else dt(await u());Ae.success(l.t("Copied shared chat URL to clipboard!")),s(0,b=!1)};function _(g){b=g,s(0,b)}return n.$$set=g=>{"chatId"in g&&s(1,o=g.chatId),"show"in g&&s(0,b=g.show)},n.$$.update=()=>{n.$$.dirty&7&&b&&(async()=>{if(o){const g=await pe(localStorage.token,o);p(g)&&s(2,a=g)}else s(2,a=null),console.log(a)})()},[b,o,a,l,r,c,u,d,k,T,I,y,_]}class bs extends te{constructor(e){super(),se(this,e,Jt,Zt,X,{chatId:1,show:0})}}const Ft=n=>({}),Ve=n=>({});function Gt(n){let e;const s=n[6].default,t=le(s,n,n[14],null);return{c(){t&&t.c()},l(l){t&&t.l(l)},m(l,r){t&&t.m(l,r),e=!0},p(l,r){t&&t.p&&(!e||r&16384)&&ne(t,s,l,l[14],e?oe(s,l[14],r,null):ae(l[14]),null)},i(l){e||(B(t,l),e=!0)},o(l){A(t,l),e=!1},d(l){t&&t.d(l)}}}function ze(n){let e,s,t='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M17.982 18.725A7.488 7.488 0 0012 15.75a7.488 7.488 0 00-5.982 2.975m11.963 0a9 9 0 10-11.963 0m11.963 0A8.966 8.966 0 0112 21a8.966 8.966 0 01-5.982-2.275M15 9.75a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>',l,r,o=n[3].t("Admin Panel")+"",a,i,c;return{c(){e=S("button"),s=S("div"),s.innerHTML=t,l=N(),r=S("div"),a=H(o),this.h()},l(u){e=M(u,"BUTTON",{class:!0});var d=j(e);s=M(d,"DIV",{class:!0,"data-svelte-h":!0}),x(s)!=="svelte-1vodyax"&&(s.innerHTML=t),l=L(d),r=M(d,"DIV",{class:!0});var b=j(r);a=P(b,o),b.forEach(f),d.forEach(f),this.h()},h(){h(s,"class","self-center mr-3"),h(r,"class","self-center font-medium"),h(e,"class","flex rounded-md py-2 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition")},m(u,d){$(u,e,d),w(e,s),w(e,l),w(e,r),w(r,a),i||(c=z(e,"click",n[9]),i=!0)},p(u,d){d&8&&o!==(o=u[3].t("Admin Panel")+"")&&W(a,o)},d(u){u&&f(e),i=!1,c()}}}function Yt(n){let e,s,t='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M10.343 3.94c.09-.542.56-.94 1.11-.94h1.093c.55 0 1.02.398 1.11.94l.149.894c.07.424.384.764.78.93.398.164.855.142 1.205-.108l.737-.527a1.125 1.125 0 011.45.12l.773.774c.39.389.44 1.002.12 1.45l-.527.737c-.25.35-.272.806-.107 1.204.165.397.505.71.93.78l.893.15c.543.09.94.56.94 1.109v1.094c0 .55-.397 1.02-.94 1.11l-.893.149c-.425.07-.765.383-.93.78-.165.398-.143.854.107 1.204l.527.738c.32.447.269 1.06-.12 1.45l-.774.773a1.125 1.125 0 01-1.449.12l-.738-.527c-.35-.25-.806-.272-1.203-.107-.397.165-.71.505-.781.929l-.149.894c-.09.542-.56.94-1.11.94h-1.094c-.55 0-1.019-.398-1.11-.94l-.148-.894c-.071-.424-.384-.764-.781-.93-.398-.164-.854-.142-1.204.108l-.738.527c-.447.32-1.06.269-1.45-.12l-.773-.774a1.125 1.125 0 01-.12-1.45l.527-.737c.25-.35.273-.806.108-1.204-.165-.397-.505-.71-.93-.78l-.894-.15c-.542-.09-.94-.56-.94-1.109v-1.094c0-.55.398-1.02.94-1.11l.894-.149c.424-.07.765-.383.93-.78.165-.398.143-.854-.107-1.204l-.527-.738a1.125 1.125 0 01.12-1.45l.773-.773a1.125 1.125 0 011.45-.12l.737.527c.35.25.807.272 1.204.107.397-.165.71-.505.78-.929l.15-.894z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>',l,r,o=n[3].t("Settings")+"",a,i,c,u,d,b,p,k=n[3].t("Archived Chats")+"",T,I,y,_,g,E,D,m='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path fill-rule="evenodd" d="M3 4.25A2.25 2.25 0 015.25 2h5.5A2.25 2.25 0 0113 4.25v2a.75.75 0 01-1.5 0v-2a.75.75 0 00-.75-.75h-5.5a.75.75 0 00-.75.75v11.5c0 .414.336.75.75.75h5.5a.75.75 0 00.75-.75v-2a.75.75 0 011.5 0v2A2.25 2.25 0 0110.75 18h-5.5A2.25 2.25 0 013 15.75V4.25z" clip-rule="evenodd"></path><path fill-rule="evenodd" d="M6 10a.75.75 0 01.75-.75h9.546l-1.048-.943a.75.75 0 111.004-1.114l2.5 2.25a.75.75 0 010 1.114l-2.5 2.25a.75.75 0 11-1.004-1.114l1.048-.943H6.75A.75.75 0 016 10z" clip-rule="evenodd"></path></svg>',v,V,G=n[3].t("Sign Out")+"",K,F,Y,$e;d=new Ut({props:{className:"size-5",strokeWidth:"1.5"}});let O=n[1]==="admin"&&ze(n);return{c(){e=S("button"),s=S("div"),s.innerHTML=t,l=N(),r=S("div"),a=H(o),i=N(),c=S("button"),u=S("div"),R(d.$$.fragment),b=N(),p=S("div"),T=H(k),I=N(),O&&O.c(),y=N(),_=S("hr"),g=N(),E=S("button"),D=S("div"),D.innerHTML=m,v=N(),V=S("div"),K=H(G),this.h()},l(C){e=M(C,"BUTTON",{class:!0});var U=j(e);s=M(U,"DIV",{class:!0,"data-svelte-h":!0}),x(s)!=="svelte-1ew1v3e"&&(s.innerHTML=t),l=L(U),r=M(U,"DIV",{class:!0});var Ce=j(r);a=P(Ce,o),Ce.forEach(f),U.forEach(f),i=L(C),c=M(C,"BUTTON",{class:!0});var fe=j(c);u=M(fe,"DIV",{class:!0});var Te=j(u);q(d.$$.fragment,Te),Te.forEach(f),b=L(fe),p=M(fe,"DIV",{class:!0});var Ie=j(p);T=P(Ie,k),Ie.forEach(f),fe.forEach(f),I=L(C),O&&O.l(C),y=L(C),_=M(C,"HR",{class:!0}),g=L(C),E=M(C,"BUTTON",{class:!0});var ue=j(E);D=M(ue,"DIV",{class:!0,"data-svelte-h":!0}),x(D)!=="svelte-1svlfdm"&&(D.innerHTML=m),v=L(ue),V=M(ue,"DIV",{class:!0});var Ee=j(V);K=P(Ee,G),Ee.forEach(f),ue.forEach(f),this.h()},h(){h(s,"class","self-center mr-3"),h(r,"class","self-center font-medium"),h(e,"class","flex rounded-md py-2 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition"),h(u,"class","self-center mr-3"),h(p,"class","self-center font-medium"),h(c,"class","flex rounded-md py-2 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition"),h(_,"class","dark:border-gray-800 my-2 p-0"),h(D,"class","self-center mr-3"),h(V,"class","self-center font-medium"),h(E,"class","flex rounded-md py-2 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition")},m(C,U){$(C,e,U),w(e,s),w(e,l),w(e,r),w(r,a),$(C,i,U),$(C,c,U),w(c,u),Z(d,u,null),w(c,b),w(c,p),w(p,T),$(C,I,U),O&&O.m(C,U),$(C,y,U),$(C,_,U),$(C,g,U),$(C,E,U),w(E,D),w(E,v),w(E,V),w(V,K),F=!0,Y||($e=[z(e,"click",n[7]),z(c,"click",n[8]),z(E,"click",n[10])],Y=!0)},p(C,U){(!F||U&8)&&o!==(o=C[3].t("Settings")+"")&&W(a,o),(!F||U&8)&&k!==(k=C[3].t("Archived Chats")+"")&&W(T,k),C[1]==="admin"?O?O.p(C,U):(O=ze(C),O.c(),O.m(y.parentNode,y)):O&&(O.d(1),O=null),(!F||U&8)&&G!==(G=C[3].t("Sign Out")+"")&&W(K,G)},i(C){F||(B(d.$$.fragment,C),F=!0)},o(C){A(d.$$.fragment,C),F=!1},d(C){C&&(f(e),f(i),f(c),f(I),f(y),f(_),f(g),f(E)),J(d),O&&O.d(C),Y=!1,He($e)}}}function Xt(n){let e,s;return e=new Je({props:{class:"w-full "+n[2]+" text-sm rounded-xl px-1 py-1.5 border border-gray-300/30 dark:border-gray-700/50 z-50 bg-white dark:bg-gray-850 dark:text-white shadow",sideOffset:8,side:"bottom",align:"start",transition:n[11],$$slots:{default:[Yt]},$$scope:{ctx:n}}}),{c(){R(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,l){Z(e,t,l),s=!0},p(t,l){const r={};l&4&&(r.class="w-full "+t[2]+" text-sm rounded-xl px-1 py-1.5 border border-gray-300/30 dark:border-gray-700/50 z-50 bg-white dark:bg-gray-850 dark:text-white shadow"),l&16395&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){s||(B(e.$$.fragment,t),s=!0)},o(t){A(e.$$.fragment,t),s=!1},d(t){J(e,t)}}}function Kt(n){let e,s,t;e=new Ze({props:{$$slots:{default:[Gt]},$$scope:{ctx:n}}});const l=n[6].content,r=le(l,n,n[14],Ve),o=r||Xt(n);return{c(){R(e.$$.fragment),s=N(),o&&o.c()},l(a){q(e.$$.fragment,a),s=L(a),o&&o.l(a)},m(a,i){Z(e,a,i),$(a,s,i),o&&o.m(a,i),t=!0},p(a,i){const c={};i&16384&&(c.$$scope={dirty:i,ctx:a}),e.$set(c),r?r.p&&(!t||i&16384)&&ne(r,l,a,a[14],t?oe(l,a[14],i,Ft):ae(a[14]),Ve):o&&o.p&&(!t||i&15)&&o.p(a,t?i:-1)},i(a){t||(B(e.$$.fragment,a),B(o,a),t=!0)},o(a){A(e.$$.fragment,a),A(o,a),t=!1},d(a){a&&f(s),J(e,a),o&&o.d(a)}}}function Qt(n){let e,s,t;function l(o){n[13](o)}let r={onOpenChange:n[12],$$slots:{default:[Kt]},$$scope:{ctx:n}};return n[0]!==void 0&&(r.open=n[0]),e=new qe({props:r}),he.push(()=>ye(e,"open",l)),{c(){R(e.$$.fragment)},l(o){q(e.$$.fragment,o)},m(o,a){Z(e,o,a),t=!0},p(o,[a]){const i={};a&16399&&(i.$$scope={dirty:a,ctx:o}),!s&&a&1&&(s=!0,i.open=o[0],be(()=>s=!1)),e.$set(i)},i(o){t||(B(e.$$.fragment,o),t=!0)},o(o){A(e.$$.fragment,o),t=!1},d(o){J(e,o)}}}function xt(n,e,s){let t,{$$slots:l={},$$scope:r}=e;const o=Pe("i18n");Q(n,o,_=>s(3,t=_));let{show:a=!1}=e,{role:i=""}=e,{className:c="max-w-[240px]"}=e;const u=ke(),d=async()=>{await Ye.set(!0),s(0,a=!1)},b=()=>{u("show","archived-chat"),s(0,a=!1)},p=()=>{_t("/admin"),s(0,a=!1)},k=()=>{localStorage.removeItem("token"),location.href="/auth",s(0,a=!1)},T=_=>mt(_,{duration:100}),I=_=>{u("change",_)};function y(_){a=_,s(0,a)}return n.$$set=_=>{"show"in _&&s(0,a=_.show),"role"in _&&s(1,i=_.role),"className"in _&&s(2,c=_.className),"$$scope"in _&&s(14,r=_.$$scope)},[a,i,c,t,o,u,l,d,b,p,k,T,I,y,r]}class ks extends te{constructor(e){super(),se(this,e,xt,Qt,X,{show:0,role:1,className:2})}}export{Ut as A,ws as D,we as M,bs as S,vs as T,ks as U,ms as a,gs as b,ps as d,hs as g,_s as q};
//# sourceMappingURL=UserMenu.e45cc5c4.js.map
