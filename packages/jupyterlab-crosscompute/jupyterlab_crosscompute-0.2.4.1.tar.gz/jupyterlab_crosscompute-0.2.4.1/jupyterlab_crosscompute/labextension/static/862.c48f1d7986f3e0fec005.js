"use strict";(self.webpackChunkjupyterlab_crosscompute=self.webpackChunkjupyterlab_crosscompute||[]).push([[862],{862:(e,t,c)=>{c.r(t),c.d(t,{default:()=>w});var s=c(166),n=c(615),o=c(498),a=c(604),l=c(893),r=c.n(l);const m=new(c(827).LabIcon)({name:"crosscompute:logo",svgstr:'<svg width="48" height="48" enable-background="new 0 0 48 48" version="1.1" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">\n <style type="text/css">.st0{display:none;opacity:0;fill:#FFFFFF;}\n\t.st1{fill:#939598;}\n\t.st2{fill:#F63806;}\n\t.st3{fill:#148ED5;}\n\t.st4{fill:#D43105;}\n\t.st5{fill:#17A2F5;}\n\t.st6{fill:#284454;}</style>\n <rect id="a" class="st0" x="-236.5" y="-238.04" width="519.1" height="519.1"/>\n <g transform="matrix(.9465 0 0 .9465 1.284 .71797)">\n  <g id="b">\n   <path id="c" class="st1" d="m29.1 11.9c1.2 0.5 2.4 1.2 3.4 2l5.4-8.1c-2.1-1.6-4.4-2.8-7-3.6-0.7-0.2-1.4 0.2-1.5 1l-1 7.5c-0.1 0.5 0.2 1 0.7 1.2z"/>\n   <path id="d" class="st1" d="m29.1 37.2c-0.5 0.2-0.8 0.7-0.7 1.2l1 7.5c0.1 0.7 0.8 1.2 1.5 1 2.5-0.8 4.9-2 7-3.6l-5.4-8.1c-1 0.8-2.2 1.5-3.4 2z"/>\n   <path id="e" class="st1" d="m18.8 37.2c-1.2-0.5-2.4-1.2-3.4-2l-5.4 8.1c2.1 1.6 4.4 2.8 7 3.6 0.7 0.2 1.4-0.2 1.5-1l1-7.5c0.1-0.5-0.2-1-0.7-1.2z"/>\n   <path id="f" class="st1" d="m18.5 3.1c-0.1-0.7-0.8-1.2-1.5-1-2.5 0.8-4.9 2-7 3.6l5.4 8.1c1-0.8 2.1-1.5 3.4-2 0.5-0.2 0.8-0.7 0.7-1.2z"/>\n   <path id="g" class="st1" d="m26.3 2.9h-4.6c-0.3 0-0.6 0.3-0.6 0.6s0.3 0.6 0.6 0.6h4.6c0.3 0 0.6-0.3 0.6-0.6s-0.2-0.6-0.6-0.6z"/>\n   <path id="h" class="st1" d="m26.6 6.6c0-0.3-0.3-0.6-0.6-0.6h-3.9c-0.3 0-0.6 0.3-0.6 0.6s0.3 0.6 0.6 0.6h3.9c0.3 0 0.6-0.2 0.6-0.6z"/>\n   <path id="i" class="st1" d="m25.6 9.1h-3.2c-0.3 0-0.6 0.3-0.6 0.6s0.3 0.6 0.6 0.6h3.2c0.3 0 0.6-0.3 0.6-0.6 0.1-0.3-0.2-0.6-0.6-0.6z"/>\n   <path id="j" class="st1" d="m26.3 45h-4.6c-0.3 0-0.6 0.3-0.6 0.6s0.3 0.6 0.6 0.6h4.6c0.3 0 0.6-0.3 0.6-0.6s-0.2-0.6-0.6-0.6z"/>\n   <path id="k" class="st1" d="m22.1 43.2h3.9c0.3 0 0.6-0.3 0.6-0.6s-0.3-0.6-0.6-0.6h-3.9c-0.3 0-0.6 0.3-0.6 0.6s0.3 0.6 0.6 0.6z"/>\n   <path id="l" class="st1" d="m25.6 38.9h-3.2c-0.3 0-0.6 0.3-0.6 0.6s0.3 0.6 0.6 0.6h3.2c0.3 0 0.6-0.3 0.6-0.6s-0.2-0.6-0.6-0.6z"/>\n  </g>\n  <path id="m" class="st2" d="m37.9 5.7-5.4 8.1c3.1 2.5 5.2 6.4 5.2 10.7s-2 8.2-5.2 10.7l5.4 8.1c5.7-4.3 9.5-11.1 9.5-18.8s-3.8-14.5-9.5-18.8z"/>\n  <path id="n" class="st3" d="m10.1 43.3 5.4-8.1c-3.1-2.5-5.2-6.4-5.2-10.7s2-8.2 5.2-10.7l-5.4-8.1c-5.8 4.3-9.5 11.1-9.5 18.8s3.7 14.5 9.5 18.8z"/>\n  <g id="o">\n   <path id="p" class="st4" d="m40.2 37.3c-0.3-0.3-0.8-0.2-1 0.1s-0.5 0.6-0.8 0.9-0.2 0.8 0.1 1c0.1 0.1 0.3 0.2 0.5 0.2s0.4-0.1 0.5-0.2c0.3-0.3 0.6-0.6 0.8-1 0.2-0.3 0.2-0.7-0.1-1z"/>\n   <path id="q" class="st4" d="m44.4 18.4c-0.1-0.4-0.5-0.6-0.9-0.5s-0.6 0.5-0.5 0.9c0.5 1.8 0.7 3.7 0.7 5.5 0 4-1.1 7.8-3.2 11.2-0.2 0.3-0.1 0.8 0.2 1 0.1 0.1 0.3 0.1 0.4 0.1 0.2 0 0.5-0.1 0.6-0.3 2.3-3.6 3.4-7.7 3.4-12 0.1-2-0.2-4-0.7-5.9z"/>\n  </g>\n  <g id="r">\n   <path id="s" class="st5" d="m9.4 9.7c-0.2-0.1-0.3-0.2-0.5-0.2s-0.4 0.1-0.5 0.2c-0.3 0.3-0.6 0.6-0.8 1-0.3 0.3-0.2 0.8 0.1 1 0.3 0.3 0.8 0.2 1-0.1s0.5-0.6 0.8-0.9c0.2-0.3 0.2-0.7-0.1-1z"/>\n   <path id="t" class="st5" d="m7 12.6c-0.1-0.1-0.3-0.1-0.4-0.1-0.2 0-0.5 0.1-0.6 0.3-2.3 3.6-3.4 7.7-3.4 12 0 2 0.3 4 0.8 5.9 0.1 0.4 0.5 0.6 0.9 0.5s0.6-0.5 0.5-0.9c-0.5-1.8-0.8-3.7-0.8-5.5 0-4 1.1-7.8 3.2-11.2 0.3-0.3 0.2-0.8-0.2-1z"/>\n  </g>\n  <path class="st6" d="m45.6 13.5c-1.6-3-3.8-5.8-6.5-7.9l-1.4-1c-2-1.4-4.2-2.4-6.5-3.2-0.6-0.2-1.2-0.1-1.7 0.2s-0.8 0.8-0.9 1.4l-1 7.5c-0.1 0.9 0.4 1.8 1.2 2.1 1.1 0.5 2.2 1.1 3.2 1.9 3.1 2.5 4.8 6.1 4.9 10 0 3.9-1.8 7.6-4.9 10-1 0.8-2 1.4-3.2 1.9-0.9 0.3-1.4 1.2-1.2 2.1l1 7.5c0.1 0.6 0.4 1.1 0.9 1.4 0.3 0.2 0.7 0.3 1.1 0.3 0.2 0 0.4 0 0.6-0.1 2.3-0.7 4.5-1.8 6.5-3.2l1.4-1c2.7-2.1 4.9-4.9 6.5-7.9 1.8-3.4 2.7-7.2 2.7-11.1-0.1-3.8-1-7.5-2.7-10.9zm-8.9 29.6c-1.9 1.3-3.9 2.3-6.1 2.9h-0.3c-0.1 0-0.1-0.1-0.1-0.2l-1-7.5c0-0.1 0.1-0.3 0.2-0.3 1-0.4 1.9-0.9 2.8-1.5zm0-37.1-4.4 6.6c-0.9-0.6-1.8-1.1-2.8-1.5-0.1-0.1-0.2-0.2-0.2-0.3l1-7.5c0-0.1 0.1-0.2 0.1-0.2h0.3c2.1 0.6 4.2 1.6 6 2.9zm1.8 18.5c0-4.2-1.8-8.1-4.9-10.9l4.5-6.6c0.2 0.2 0.4 0.4 0.7 0.6l-3.8 5.4c-0.1 0.2-0.2 0.4-0.1 0.6 0 0.2 0.2 0.4 0.3 0.6 0.4 0.3 0.9 0.2 1.2-0.2l3.6-5.3 0.5 0.5-2.9 3.9c-0.3 0.4-0.2 0.9 0.2 1.2s0.9 0.2 1.2-0.2l2.7-3.6c0.1 0.2 0.3 0.3 0.4 0.5l-1.8 2.2c-0.3 0.4-0.2 0.9 0.1 1.2 0.4 0.3 0.9 0.2 1.2-0.1l1.4-1.8c2.3 3.6 3.5 7.7 3.5 12 0 6.7-3.2 13.3-8.4 17.5l-4.5-6.7c3.1-2.7 4.9-6.6 4.9-10.8z"/>\n  <path class="st6" d="m19.2 36.4c-1.2-0.5-2.2-1.1-3.2-1.8-3.1-2.5-4.8-6.1-4.9-10 0-3.9 1.8-7.6 4.9-10 1-0.8 2-1.4 3.2-1.9 0.9-0.3 1.4-1.2 1.2-2.1l-1-7.5c-0.1-0.6-0.4-1.1-0.9-1.4s-1.1-0.4-1.7-0.2c-2.3 0.7-4.5 1.8-6.5 3.2l-1.4 1c-2.7 2-4.9 4.7-6.5 7.8-1.8 3.4-2.7 7.2-2.7 11.1s0.9 7.6 2.7 11.1c1.6 3 3.8 5.8 6.5 7.9l1.4 1c2 1.4 4.2 2.4 6.5 3.2 0.2 0.1 0.4 0.1 0.6 0.1 0.4 0 0.8-0.1 1.1-0.3 0.5-0.3 0.8-0.8 0.9-1.4l1-7.5c0.1-1.1-0.4-1.9-1.2-2.3zm-1.5-33.1 1 7.5c0 0.1-0.1 0.3-0.2 0.3-1 0.4-1.9 0.9-2.8 1.5l-4.5-6.6c1.9-1.3 3.9-2.3 6.1-2.9h0.3s0.1 0 0.1 0.2zm-4.7 32.8c0.1-0.2 0.2-0.4 0.1-0.6 0-0.2-0.2-0.4-0.3-0.6-0.2-0.1-0.4-0.2-0.6-0.1-0.2 0-0.4 0.2-0.6 0.3l-3.6 5.2-0.5-0.5 2.9-3.9c0.3-0.4 0.2-0.9-0.2-1.2-0.2-0.1-0.4-0.2-0.6-0.2s-0.4 0.2-0.6 0.3l-2.7 3.6c-0.1-0.1-0.2-0.2-0.3-0.4l1.7-2.2c0.1-0.2 0.2-0.4 0.2-0.6s-0.1-0.4-0.3-0.6c-0.2-0.1-0.4-0.2-0.6-0.2s-0.4 0.1-0.6 0.3l-1.4 1.8c-2.3-3.6-3.5-7.7-3.5-12 0-6.7 3.2-13.3 8.4-17.5l4.5 6.7c-3.1 2.8-4.9 6.7-4.9 10.9s1.8 8.1 4.9 10.9l-4.5 6.7c-0.2-0.2-0.4-0.4-0.7-0.6zm5.7 2.2-1 7.5c0 0.1-0.1 0.2-0.1 0.2-0.1 0-0.1 0.1-0.3 0-2.2-0.7-4.2-1.7-6.1-2.9l4.4-6.6c0.9 0.6 1.8 1.1 2.8 1.5 0.3 0 0.3 0.2 0.3 0.3z"/>\n  <path id="u" class="st6" d="m33 24.6c0-5-4-9-9-9s-9 4-9 9 4 9 9 9 9-4.1 9-9zm-9.8 7.5c-3.8-0.4-6.7-3.6-6.7-7.5 0-0.7 0.1-1.3 0.2-1.9l4.3 4.6v1.6c0 0.4 0.6 0.9 1 0.9h0.9c0.1 0 0.2 0.1 0.2 0.2v2.1zm6.3-3.2c-0.1-0.3-0.3-0.5-0.6-0.5h-1.8v-2.4c0-0.7-0.5-1.2-1.2-1.2l-5.7-0.1v-2.1h1.5c0.8 0 1.5-0.7 1.5-1.5v-1.7h2.8s1.1-0.6 1.6-1.4c2.4 1.3 4 3.8 4 6.7 0 1.9-0.7 3.7-1.9 5z"/>\n </g>\n</svg>\n'});var i;!function(e){e.configurationNotFound=-100}(i||(i={}));var d=c(214),h=c(603);async function u(e="",t={}){const c=h.ServerConnection.makeSettings(),s=d.URLExt.join(c.baseUrl,"jupyterlab-crosscompute",e);let n;try{n=await h.ServerConnection.makeRequest(s,t,c)}catch(e){throw new h.ServerConnection.NetworkError(e)}const o=await n.json();if(!n.ok)throw o;return o}var p=c(644);class g{constructor(){this.folder=null,this.error={},this.launch={},this.changed=new p.Signal(this)}}class v extends a.ReactWidget{constructor(e,t,c){super(),this._commands=e,this._openFolder=t,this._openPath=c,this._model=new g,this.id="crosscompute-automation",this.addClass("crosscompute-Automation");const s=this.title;s.icon=m,s.caption="CrossCompute Automation"}updateModel(e){const{folder:t}=e;let c=!1;this._model.folder!==t&&(c=!0),!this.isHidden&&c&&(this._model.folder=t,u("launch?folder="+t).then((e=>{delete this._model.error,this._model.launch=e,this._model.changed.emit()})).catch((e=>{this._model.error=e,this._model.changed.emit()})))}render(){return r().createElement(a.UseSignal,{signal:this._model.changed,initialSender:this._model},(()=>r().createElement(f,{model:this._model,commands:this._commands,openFolder:this._openFolder,openPath:this._openPath})))}}const f=({model:e,commands:t,openFolder:c,openPath:s})=>{const{error:n}=e;return r().createElement(r().Fragment,null,n?r().createElement(E,{model:e,openFolder:c,openPath:s}):r().createElement(k,{model:e,commands:t,openFolder:c,openPath:s}),r().createElement(y,null))},E=({model:e,openFolder:t,openPath:c})=>{const{error:s}=e,n=null==s?void 0:s.message,o=null==s?void 0:s.code,a=null==s?void 0:s.path;let l;switch(o){case i.configurationNotFound:{const{launch:c}=e,{folder:s,name:n,version:o}=c;l=s?r().createElement("a",{className:"crosscompute-Link",onClick:()=>t(s)},n?`${n} ${o}`:"Automation Folder"):"";break}default:l=a?r().createElement("a",{className:"crosscompute-Link",onClick:()=>c(a)},n):n}return r().createElement(r().Fragment,null,l)},k=({model:e,commands:t,openFolder:c,openPath:s})=>{const{launch:n}=e,{path:o,name:a,version:l}=n;return r().createElement("div",{className:"crosscompute-AutomationInformation"},r().createElement("div",{className:"crosscompute-AutomationInformationHeader"},r().createElement("div",{className:"crosscompute-AutomationName"},a||"No Name"),r().createElement("div",{className:"crosscompute-AutomationVersion"},l||"No Version")),r().createElement("div",{className:"crosscompute-AutomationInformationBody"},r().createElement("a",{className:"crosscompute-Link",onClick:()=>s(o)},"Automation Configuration"),r().createElement(z,{model:e,openFolder:c,openPath:s}),r().createElement(F,{model:e,commands:t})))},z=({model:e,openFolder:t,openPath:c})=>{const{launch:s}=e,{folder:n,batches:o}=s;return o.length?r().createElement("div",{className:"crosscompute-BatchDefinitions"},r().createElement("div",{className:"crosscompute-BatchDefinitionsHeader"},"Batch Definitions"),r().createElement("ul",null,o.map(((e,s)=>r().createElement("li",{key:s},r().createElement("a",{className:"crosscompute-Link",onClick:()=>{e.configuration?c(n+"/"+e.configuration.path):t(e.folder)}},e.name||e.folder)))))):r().createElement(r().Fragment,null)},F=({model:e,commands:t})=>{const{launch:c}=e,{folder:s}=c,{uri:n,log:o,isReady:a}=c,m=new FormData;let i,d;m.append("folder",s);const h=()=>{clearInterval(i),clearInterval(d)};let p;(0,l.useEffect)((()=>(!1===a&&n&&(i=setInterval((()=>{fetch(n,{method:"HEAD"}).then((()=>{c.isReady=!0,e.changed.emit(),clearInterval(i)}))}),1e3)),void 0!==a&&(d=setInterval((()=>{u("log?type=launch&folder="+s).then((t=>{var s;(null===(s=c.log)||void 0===s?void 0:s.timestamp)!==t.timestamp&&(c.log=t,e.changed.emit())}))}),2e3)),()=>{h()})),[a,n]),p=void 0===a?"":!1===a?"Launching...":r().createElement("a",{className:"crosscompute-Link",href:n,target:"_blank"},"Development Server");const g=void 0===a?r().createElement("button",{onClick:()=>{t.execute("docmanager:save-all"),c.isReady=!1,e.changed.emit(),u("launch",{method:"POST",body:m}).then((t=>{const{uri:s}=t;c.uri=s,e.changed.emit()})).catch((t=>{e.error=t,e.changed.emit()}))}},"Launch"):r().createElement("button",{onClick:()=>{h(),delete c.isReady,delete c.log,e.changed.emit(),u("launch",{method:"DELETE",body:m}).catch((t=>{e.error=t,e.changed.emit()}))}},"Stop"),v=void 0!==a&&o?r().createElement("pre",{className:"crosscompute-LaunchLog"},o.text):"";return r().createElement("div",{className:"crosscompute-LaunchPanel"},r().createElement("div",{className:"crosscompute-LaunchControl"},p,g),v)},y=()=>r().createElement("div",{className:"crosscompute-AutomationReference"},r().createElement("a",{className:"crosscompute-Link",href:"https://docs.crosscompute.com",target:"_blank"},"CrossCompute Documentation")),w={id:"jupyterlab-crosscompute:plugin",autoStart:!0,requires:[o.IFileBrowserFactory,s.ILabShell,n.IDocumentManager],optional:[s.ILayoutRestorer],activate:(e,t,c,s,n)=>{const{shell:o,commands:a}=e,l=t.defaultBrowser,r=l.model,m=new v(a,(e=>{c.activateById(l.id),r.cd(e)}),(e=>s.openOrReveal(e))),i=()=>m.updateModel({folder:"/"+r.path});r.pathChanged.connect(i),c.layoutModified.connect(i),o.add(m,"right",{rank:1e3}),n&&n.add(m,m.id)}}}}]);