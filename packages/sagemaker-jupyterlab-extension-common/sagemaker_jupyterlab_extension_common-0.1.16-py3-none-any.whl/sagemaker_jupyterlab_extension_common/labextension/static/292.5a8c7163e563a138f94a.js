"use strict";(self.webpackChunk_amzn_sagemaker_jupyterlab_extension_common=self.webpackChunk_amzn_sagemaker_jupyterlab_extension_common||[]).push([[292],{292:(e,t,r)=>{r.r(t),r.d(t,{ILogger:()=>A,default:()=>J,logSchemas:()=>m});var o=r(481),s=r(705);const n="@amzn/sagemaker-jupyterlab-extension-common:logger",a="@amzn/sagemaker-jupyterlab-extension-common:jumpstart-deeplinking",i=[200,201];var c=r(768),l=r(321),d=r.n(l);const u=(e,t,r,n)=>{const a=[],i=()=>{((e,t,r)=>{const n=s.PageConfig.getBaseUrl(),a=`${n}${r}`,i=o.ServerConnection.makeSettings({baseUrl:n}),c={method:"POST",body:JSON.stringify({events:e})},l={retries:t,onFailedAttempt:e=>{console.warn({message:`Deliver events attempt (${e.attemptNumber}) with (${e.retriesLeft}) retries remaining.`,error:e})}};d()((async()=>{let e;try{e=await o.ServerConnection.makeRequest(a,c,i)}catch(e){throw e instanceof TypeError&&Object.setPrototypeOf(e,Error.prototype),e}if(!e.ok)throw new Error(e.statusText)}),l).catch((t=>{console.error({message:`Failed to deliver events after (${l.retries}) retries.`,error:t,events:e})}))})(a.splice(0),e,n)};return setInterval(i,t),(e,t)=>{const o=r-a.length;a.push(...t.slice(0,o)),t.length>o&&(i(),console.log("Logger plugin max buffer size exceeded."))}},m={operationalLogger:{schemaId:"http://sagemaker.studio.jupyterlab.ui.log.schema",schemaVersion:1},performance:{schemaId:"http://sagemaker.studio.jupyterlab.ui.performance.schema",schemaVersion:1}},p=Object.keys(m).map((e=>m[e].schemaId)),h="__INJECT__",{name:g,version:b}=r(147),E=()=>{const e=u(2,5e3,1e4,"aws/sagemaker/api/jumpstart/eventlog");return new c.EventLog({allowedSchemas:p,handlers:[e]})},v="Cookie Preferences";var w;!function(e){e.POST="POST",e.GET="GET"}(w||(w={}));class _ extends Error{constructor(e,t,r,o){super(e),this.errorStatus=t,this.errorCode=r,this.cause=o,Object.setPrototypeOf(this,_.prototype)}}const k=async(e,t,r,n)=>{var a,c;const l=o.ServerConnection.makeSettings({}),d=s.URLExt.join(l.baseUrl,e),u={method:t};r&&(u.body=r),n&&(u.headers=n);const m=await o.ServerConnection.makeRequest(d,u,l);if(!i.includes(m.status)){const e=await m.json(),t=null!==(a=e.errorCode)&&void 0!==a?a:void 0,r=null!==(c=e.errorMessage)&&void 0!==c?c:"unable to fetch data";throw new _(r,m.status,t)}return m};var y=r(29),f=r.n(y),S=r(690);const j={ShortBreadFooter:r(933).css`
  color: var(--jp-ui-font-color1);
  font-family: var(--jp-ui-font-family);
  font-size: var(--jp-ui-font-size1);
  line-height: 24px;
`},R=()=>((0,y.useEffect)((()=>(()=>{const e=document.createElement("script");e.src="https://prod.assets.shortbread.aws.dev/shortbread.js",e.type="text/javascript",e.async=!0,document.head.appendChild(e),e.onload=()=>window.AWSCShortbreadInstance=(()=>{const e=window.AWSCShortbread({domain:window.location.hostname,hasConsoleNavFooter:!0});return e.checkForCookieConsent(),e})();const t=document.createElement("link");t.href="https://prod.assets.shortbread.aws.dev/shortbread.css",t.rel="stylesheet",document.head.appendChild(t)})()),[]),f().createElement("div",{className:j.ShortBreadFooter},f().createElement("span",{onClick:()=>{const e=window.AWSCShortbreadInstance;e&&e.customizeCookies()},style:{cursor:"pointer"}},v)));class x extends S.ReactWidget{render(){return f().createElement(R,null)}}var O=r(0);const I={id:"@amzn/sagemaker-jupyterlab-extension-common:panorama",autoStart:!0,requires:[O.IStatusBar],activate:(e,t)=>{(async e=>{try{await e.started;const t=document.getElementById("main"),r=await k("/aws/sagemaker/api/context",w.GET),o=await r.json();if(!t)throw new Error("JupyterLab application or region not found in DOM");((e,t)=>{if(!e)throw new Error("Failed to get region");const r=document.createElement("script"),o=t&&"prod"===t.toLocaleLowerCase()?"Prod":"NonProd";r.src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js",r.id="awsc-panorama-bundle",r.type="text/javascript",r.setAttribute("data-config",`{"appEntity": "aws-sagemaker", "region": "${e}", "service" :"sagemaker-jupyterlab", "domain": "${o}"}`),document.head.appendChild(r)})(o.region,o.stage)}catch(e){}})(e);const r=new x;t.registerStatusItem("@amzn/sagemaker-jupyterlab-extension-common:widget:shortbread-status",{item:r,align:"right",rank:599,isActive:()=>!0})}};var T,N=r(930);!function(e){e.TRACE="TRACE",e.DEBUG="DEBUG",e.INFO="INFO",e.WARN="WARN",e.ERROR="ERROR",e.FATAL="FATAL"}(T||(T={}));const A=new N.Token(n);var L=r(13);class C{constructor(e,t,r){this.trace=e=>this.record(e,T.TRACE),this.debug=e=>this.record(e,T.DEBUG),this.info=e=>this.record(e,T.INFO),this.warn=e=>this.record(e,T.WARN),this.error=e=>this.record(e,T.ERROR),this.fatal=e=>this.record(e,T.FATAL),this.child=(e,t,r)=>{const o=t||this.schema,s=r||this.eventLog;return new C(s,o,{...this.context,...e})},this.eventLog=e,this.schema=t,this.context={...r,AccountId:h,SpaceName:h}}format(e,t){if("Error"in e&&void 0!==e.Error){const r={...e,Name:e.Error.name,Message:e.Error.message,Stack:e.Error.stack,Level:t,Context:this.context};return delete e.Error,r}return{...e,Level:t,Context:this.context}}record(e,t){return this.eventLog.recordEvent({version:this.schema.schemaVersion,schema:this.schema.schemaId,body:this.format(e,t)})}}const M={id:n,autoStart:!0,provides:A,activate:e=>{const t={SessionId:(e=>{const t=window.sessionStorage.getItem(e);let r;return null==t?(r={id:(0,L.v4)(),startTime:(new Date).toISOString()},window.sessionStorage.setItem(e,JSON.stringify(r))):r=JSON.parse(t),r})(n).id},r=u(2,5e3,1e4,"aws/sagemaker/api/eventlog"),o=new c.EventLog({allowedSchemas:p,handlers:[r]});return new C(o,m.operationalLogger,t)}};var z,B=r(39);!function(e){e.NOTEBOOK_NOT_AVAILABLE="NOTEBOOK_NOT_AVAILABLE",e.NOTEBOOK_SIZE_TOO_LARGE="NOTEBOOK_SIZE_TOO_LARGE",e.INVALID_REQUEST="INVALID_REQUEST",e.INTERNAL_SERVER_ERROR="INTERNAL_SERVER_ERROR"}(z||(z={}));const q={errorTitle:"Unable to open JumpStart notebook",defaultErrorMessage:"Something went wrong when opening the JumpStart notebook.",notebookNotFoundErrorMessage:"The JumpStart notebook does not exist or is not supported in the current region.",notebookSizeTooLargeErrorMessage:"The notebook size is too large.",invalidRequestErrorMessage:"A request to open the JumpStart notebook is invalid."};let F=!1;const D=async e=>(0,S.showErrorMessage)(q.errorTitle,{message:e}),J=[I,M,{id:a,requires:[B.IRouter,A],autoStart:!0,activate:async(e,t,r)=>{const{commands:o}=e,n="jumpstart:open-notebook-for-deeplinking",i=((e,t,r)=>{var o;const s={[a]:E()};return e.child({ExtensionName:g,ExtensionVersion:b,PluginId:t},void 0,null!==(o=s[t])&&void 0!==o?o:void 0)})(r,a);o.addCommand(n,{execute:()=>(async(e,t,r)=>{if(!F)try{const{search:o}=e.current;if(!o)return await D(q.invalidRequestErrorMessage),void r.error({Error:new Error("Invalid deep-linking parameters: Query params must be specified")});const{key:n,model_id:a,endpoint_name:i,resource_type:c,inference_component:l,set_default_kernel:d}=s.URLExt.queryStringToObject(o);if(!n)return await D(q.invalidRequestErrorMessage),void r.error({Error:new Error("Invalid deep-linking parameters: the notebook key must be specified.")});const u={key:n,...c&&{resource_type:c},...a&&{model_id:a},...i&&{endpoint_name:i},...l&&{inference_component:l},...d&&{set_default_kernel:d}},m=await(async(e,t)=>{const r=(0,L.v4)();let o;t.info({Message:"Fetching JumpStart Notebook",ClientRequestId:r});try{o=await k("aws/sagemaker/api/jumpstart/notebook",w.POST,JSON.stringify(e),{"x-client-req-id":r})}catch(e){throw t.error({Error:new Error(`Error executing open notebook: ${e}`),ClientRequestId:r}),e}const s=o.headers.get("x-server-req-id")||"SERVER_REQUEST_ID_MISSING";t.info({Message:"Successfully fetched JumpStart Notebook",ClientRequestId:r,ServerRequestId:s});const n=await o.json(),{notebookPath:a}=n;return a})(u,r);t.restored.then((()=>{t.commands.execute("docmanager:open",{factory:"Notebook",path:m})})),r.info({Message:"Successfully loaded the JumpStart Deeplinking plugin"})}catch(e){return e instanceof _?void await(async e=>{switch(e){case z.NOTEBOOK_NOT_AVAILABLE:await D(q.notebookNotFoundErrorMessage);break;case z.NOTEBOOK_SIZE_TOO_LARGE:await D(q.notebookSizeTooLargeErrorMessage);break;case z.INVALID_REQUEST:await D(q.invalidRequestErrorMessage);break;case z.INTERNAL_SERVER_ERROR:default:await D(q.defaultErrorMessage)}})(z[e.errorCode]):(await D(q.defaultErrorMessage),void r.error({Error:new Error(`Error executing open notebook: ${e}`)}))}finally{F=!0}})(t,e,i)}),t.register({command:n,pattern:new RegExp("[?]command=open-jumpstart-notebook"),rank:10})}}]},147:e=>{e.exports=JSON.parse('{"name":"@amzn/sagemaker-jupyterlab-extension-common","description":"SageMaker JupyterLab workspace common module","version":"0.1.16","author":"Amazon","homepage":"https://aws.amazon.com/sagemaker/","license":"Amazon Software License","licenses":[{"type":"Amazon Software License","url":"http://aws.amazon.com/asl"}],"directories":{"test":"__tests__"},"files":["lib/**/*.{d.ts,eot,gif,html,jpg,js,js.map,json,png,svg,woff2,ttf}","style/**/*.{css,js,eot,gif,html,jpg,json,png,svg,woff2,ttf}","schema/*.json"],"scripts":{"build":"tsc","build:labextension":"tsc && jupyter labextension build .","build:labextension:dev":"jupyter labextension build --development True --source-map True .","lint:check":"eslint . --ext .js,.ts,.tsx","lint:fix":"eslint --fix . --ext .js,.ts,.tsx","release":"run-s build","install:extension":"jlpm run build","watch:src":"tsc -w","watch:labextension":"jupyter labextension watch .","watch":"run-p watch:src watch:labextension","test":"jest","dev:setup":"run-s -n dev:docker:build dev:docker:reset dev:docker:create","dev:docker:build":"(cd devSetup ; sh pull-jupyterlab-base-image.sh && docker build . --tag jupyterlab_ext_dev_image_common --build-arg CONTAINER_USER_ID=$(id -u) --build-arg CONTAINER_GROUP_ID=$(id -g))","dev:docker:reset":"docker stop jupyterlab_ext_dev_container_common || true && docker rm jupyterlab_ext_dev_container_common || true","dev:docker:create":"docker create --name jupyterlab_ext_dev_container_common --publish 8888:8888 --volume $(pwd):/sagemaker-studio-extension --volume $HOME/.aws:/home/sagemaker-user/.aws jupyterlab_ext_dev_image_common","dev:start":"docker start jupyterlab_ext_dev_container_common --attach","test:watch":"jest --watch"},"main":"lib/index.js","dependencies":{"@emotion/css":"^11.1.3","@jupyterlab/application":"^4.0.5","@jupyterlab/coreutils":"^6.0.5","@jupyterlab/jupyterlab-telemetry":"^1.0.3","@jupyterlab/services":"^7.0.0","@jupyterlab/statusbar":"^4.0.5","@jupyterlab/apputils":"^4.0.5","@lumino/coreutils":"^2.1.2","@lumino/signaling":"^2.1.2","@testing-library/jest-dom":"^6.1.6","isomorphic-fetch":"^3.0.0","p-retry":"^6.1.0","react":"^18.2.0","uuid":"^9.0.1"},"jupyterlab":{"extension":true,"outputDir":"sagemaker_jupyterlab_extension_common/labextension"},"devDependencies":{"@babel/preset-env":"^7.22.7","@babel/preset-react":"^7.22.5","@jupyterlab/builder":"^4.0.5","@testing-library/react":"^13.0.0","@types/lodash":"^4.14.172","@types/uuid":"^9.0.6","@typescript-eslint/eslint-plugin":"^5.61.0","eslint-config-prettier":"^8.8.0","eslint-plugin-import":"^2.27.5","eslint-plugin-json":"^3.1.0","eslint-plugin-prettier":"^4.2.1","eslint-plugin-react":"^7.32.2","eslint-plugin-react-hooks":"^4.6.0","jest":"^28.0.0","jest-environment-jsdom":"^29.7.0","npm-run-all":"^4.1.5","prettier":"^2.4.1","ts-jest":"^28.0.5","typescript":"^4.3.5"}}')}}]);