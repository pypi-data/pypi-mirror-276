"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6286],{44204:function(e,n,t){var r=t(90849),i=t(90089),a=t(49686),o=t(24246),s=["label","isDisabled"],c=["data","border"];function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function u(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var d=function(e){var n=e.label,t=e.isDisabled,r=(0,i.Z)(e,s);return(0,o.jsx)(a.OK9,{"data-testid":"tab-".concat(n),_selected:{fontWeight:"600",color:"complimentary.500",borderColor:"complimentary.500"},fontSize:r.fontSize,fontWeight:"500",color:"gray.500",isDisabled:t||!1,children:n})};n.Z=function(e){var n=e.data,t=e.border,r=void 0===t?"partial":t,s=(0,i.Z)(e,c);return(0,o.jsxs)(a.mQc,u(u({colorScheme:"complimentary"},s),{},{children:[(0,o.jsx)(a.tdY,{width:"partial"===r?"max-content":void 0,children:n.map((function(e,n){return(0,o.jsx)(d,{label:e.label,isDisabled:e.isDisabled,fontSize:s.fontSize},n)}))}),(0,o.jsx)(a.nPR,{children:n.map((function(e,n){return(0,o.jsx)(a.x45,{px:0,"data-testid":"tab-panel-".concat(e.label),children:e.content},n)}))})]}))}},9408:function(e,n,t){t.d(n,{HK:function(){return a},VY:function(){return r.V},O3:function(){return s}});var r=t(36653),i=t(78624),a=function(){var e=(0,r.V)().errorAlert;return{handleError:function(n){var t="An unexpected error occurred. Please try again.";(0,i.Ot)(n)?t=n.data.detail:(0,i.tB)(n)&&(t=n.data.detail[0].msg),e(t)}}},o=t(27378),s=function(e){var n=(0,o.useRef)(void 0);return(0,o.useEffect)((function(){var t=function(t){var r;null!==(r=n.current)&&void 0!==r&&r.contains(t.target)||e()};return document.addEventListener("mousedown",t),function(){document.removeEventListener("mousedown",t)}}),[n,e]),{ref:n}}},36653:function(e,n,t){t.d(n,{V:function(){return c}});var r=t(90849),i=t(49686),a=t(24246);function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var c=function(){var e=(0,i.pmc)();return{errorAlert:function(n,t,r){var o=s(s({},r),{},{position:(null===r||void 0===r?void 0:r.position)||"top",render:function(e){var r=e.onClose;return(0,a.jsxs)(i.bZj,{alignItems:"normal",status:"error",children:[(0,a.jsx)(i.zMQ,{}),(0,a.jsxs)(i.xuv,{children:[t&&(0,a.jsx)(i.CdC,{children:t}),(0,a.jsx)(i.XaZ,{children:n})]}),(0,a.jsx)(i.PZ7,{onClick:r,position:"relative",right:0,size:"sm",top:-1})]})}});null!==r&&void 0!==r&&r.id&&e.isActive(r.id)?e.update(r.id,o):e(o)},successAlert:function(n,t,r){var o=s(s({},r),{},{position:(null===r||void 0===r?void 0:r.position)||"top",render:function(e){var r=e.onClose;return(0,a.jsxs)(i.bZj,{alignItems:"normal",status:"success",variant:"subtle",children:[(0,a.jsx)(i.zMQ,{}),(0,a.jsxs)(i.xuv,{children:[t&&(0,a.jsx)(i.CdC,{children:t}),(0,a.jsx)(i.XaZ,{children:n})]}),(0,a.jsx)(i.PZ7,{onClick:r,position:"relative",right:0,size:"sm",top:-1})]})}});null!==r&&void 0!==r&&r.id&&e.isActive(r.id)?e.update(r.id,o):e(o)}}}},66156:function(e,n,t){t(27378);var r=t(51471),i=t(24246);n.Z=function(e){var n=e.children;return(0,i.jsx)(r.Z,{title:"Connections",children:n})}},39100:function(e,n,t){t.d(n,{s:function(){return W}});var r=t(64289),i=t(49686),a=t(86677),o=t(27378),s=t(6848),c=t(60709),l=t(288),u=t(55732),d=t(97865),p=t(34707),f=t.n(p),h=t(9408),x=t(36653),v=t(57928),m=t(60245),g=t(90849),b=t(34090);function y(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}var j=function(e,n){var t=function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?y(Object(t),!0).forEach((function(n){(0,g.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):y(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({},e);return Object.entries(n.properties).forEach((function(n){var r=(0,d.Z)(n,2),i=r[0],a=r[1];if("integer"===a.type){var o=a.default?Number(a.default):e[i];t[i]=o||0}else{var s,c=null!==(s=a.default)&&void 0!==s?s:e[i];t[i]=null!==c&&void 0!==c?c:null}})),t},k=t(24246);function C(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function O(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?C(Object(t),!0).forEach((function(n){(0,g.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):C(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var w="#/definitions/FidesDatasetReference",S=function(e){var n=e.data,t=e.defaultValues,a=e.isSubmitting,c=void 0!==a&&a,p=e.onSaveClick,x=e.onTestConnectionClick,m=e.testButtonLabel,g=void 0===m?"Test connection":m,y=(0,o.useRef)(!1),C=(0,h.HK)().handleError,S=(0,s.C)(r.ZZ),_=S.connection,Z=S.connectionOption,P=(0,v.h2)(),z=(0,d.Z)(P,2),D=z[0],I=z[1],E=function(e){var n;return"undefined"!==typeof e&&""!==e||(n="Connection Identifier is required"),e&&(0,i.kEn)(e)&&(n="Connection Identifier must be an alphanumeric value"),n},R=function(e,n,t){var r;("undefined"!==typeof n&&""!==n||(r="".concat(e," is required")),t===w)&&(n.includes(".")?n.split(".").length<3&&(r="Dataset reference must include at least three parts"):r="Dataset reference must be dot delimited");return r},T=function(e,n){return(0,k.jsx)(i.lXp,{color:"gray.900",fontSize:"14px",fontWeight:"semibold",htmlFor:e,minWidth:"150px",children:n})},A=function(e){var n;if((null===(n=e.allOf)||void 0===n?void 0:n[0].$ref)===w)return"Enter dataset.collection.field"},F=function(){var e=(0,u.Z)(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D(_.key).unwrap();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),C(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return(0,o.useEffect)((function(){return y.current=!0,I.isSuccess&&x(I),function(){y.current=!1}}),[x,I]),(0,k.jsx)(b.J9,{enableReinitialize:!0,initialValues:function(){var e,r,i=O({},t);null!==_&&void 0!==_&&_.key&&(i.name=null!==(e=_.name)&&void 0!==e?e:"",i.description=_.description,i.instance_key=_.connection_type===l.Rj.SAAS?null===(r=_.saas_config)||void 0===r?void 0:r.fides_key:_.key);return j(i,n)}(),onSubmit:function(e,t){var r=O({},e);Object.keys(n.properties).forEach((function(t){var i;if((null===(i=n.properties[t].allOf)||void 0===i?void 0:i[0].$ref)===w){var a=e[t].split(".");r[t]={dataset:a.shift(),field:a.join("."),direction:"from"}}})),p(r,t)},validateOnBlur:!1,validateOnChange:!1,children:function(e){return(0,k.jsx)(b.l0,{noValidate:!0,children:(0,k.jsxs)(i.gCW,{align:"stretch",gap:"16px",children:[(0,k.jsx)(b.gN,{id:"name",name:"name",validate:function(e){return R("Name",e)},children:function(n){var t=n.field;return(0,k.jsxs)(i.NIc,{display:"flex",isRequired:!0,isInvalid:e.errors.name&&e.touched.name,children:[T("name","Name"),(0,k.jsxs)(i.gCW,{align:"flex-start",w:"inherit",children:[(0,k.jsx)(i.IIB,O(O({},t),{},{autoComplete:"off",autoFocus:!0,color:"gray.700",placeholder:"Enter a friendly name for your new ".concat(Z.human_readable," connection"),size:"sm","data-testid":"input-name"})),(0,k.jsx)(i.J1D,{children:e.errors.name})]}),(0,k.jsx)(i.kCb,{alignItems:"center",h:"32px",visibility:"hidden",children:(0,k.jsx)(i.ITP,{marginLeft:"8px"})})]})}}),(0,k.jsx)(b.gN,{id:"description",name:"description",children:function(e){var n=e.field;return(0,k.jsxs)(i.NIc,{display:"flex",children:[T("description","Description"),(0,k.jsx)(i.gxH,O(O({},n),{},{color:"gray.700",placeholder:"Enter a description for your new ".concat(Z.human_readable," connection"),resize:"none",size:"sm",value:n.value||""})),(0,k.jsx)(i.kCb,{alignItems:"center",h:"32px",visibility:"hidden",children:(0,k.jsx)(i.ITP,{marginLeft:"8px"})})]})}}),(0,k.jsx)(b.gN,{id:"instance_key",name:"instance_key",validate:E,children:function(n){var t=n.field;return(0,k.jsxs)(i.NIc,{display:"flex",isRequired:!0,isInvalid:e.errors.instance_key&&e.touched.instance_key,children:[T("instance_key","Connection Identifier"),(0,k.jsxs)(i.gCW,{align:"flex-start",w:"inherit",children:[(0,k.jsx)(i.IIB,O(O({},t),{},{autoComplete:"off",color:"gray.700",isDisabled:!(null===_||void 0===_||!_.key),placeholder:"A unique identifier for your new ".concat(Z.human_readable," connection"),size:"sm"})),(0,k.jsx)(i.J1D,{children:e.errors.instance_key})]}),(0,k.jsx)(i.ua7,{"aria-label":"The fides_key will allow fidesops to associate dataset field references appropriately. Must be a unique alphanumeric value with no spaces (underscores allowed) to represent this connection.",hasArrow:!0,label:"The fides_key will allow fidesops to associate dataset field references appropriately. Must be a unique alphanumeric value with no spaces (underscores allowed) to represent this connection.",placement:"right-start",openDelay:500,children:(0,k.jsx)(i.kCb,{alignItems:"center",h:"32px",children:(0,k.jsx)(i.ITP,{marginLeft:"8px",_hover:{cursor:"pointer"}})})})]})}}),Object.entries(n.properties).map((function(e){var t=(0,d.Z)(e,2),r=t[0],a=t[1];return"advanced_settings"===r?null:function(e,t){var r;return(0,k.jsx)(b.gN,{id:e,name:e,validate:!!(null!==(r=n.required)&&void 0!==r&&r.includes(e)||"integer"===t.type)&&function(e){var n;return R(t.title,e,null===(n=t.allOf)||void 0===n?void 0:n[0].$ref)},children:function(r){var a,o=r.field,s=r.form;return(0,k.jsxs)(i.NIc,{display:"flex",isRequired:null===(a=n.required)||void 0===a?void 0:a.includes(e),isInvalid:s.errors[e]&&s.touched[e],children:[T(e,t.title),(0,k.jsxs)(i.gCW,{align:"flex-start",w:"inherit",children:["integer"!==t.type&&(0,k.jsx)(i.IIB,O(O({},o),{},{placeholder:A(t),autoComplete:"off",color:"gray.700",size:"sm"})),"integer"===t.type&&(0,k.jsxs)(i.Y2U,{allowMouseWheel:!0,color:"gray.700",defaultValue:0,min:0,size:"sm",children:[(0,k.jsx)(i.zuI,O(O({},o),{},{autoComplete:"off"})),(0,k.jsxs)(i.FiK,{children:[(0,k.jsx)(i.WQu,{}),(0,k.jsx)(i.Y_d,{})]})]}),(0,k.jsx)(i.J1D,{children:s.errors[e]})]}),(0,k.jsx)(i.ua7,{"aria-label":t.description,hasArrow:!0,label:t.description,placement:"right-start",openDelay:500,children:(0,k.jsx)(i.kCb,{alignItems:"center",h:"32px",visibility:t.description?"visible":"hidden",children:(0,k.jsx)(i.ITP,{marginLeft:"8px",_hover:{cursor:"pointer"}})})})]})}},e)}(r,a)})),(0,k.jsxs)(i.hE2,{size:"sm",spacing:"8px",variant:"outline",children:[(0,k.jsx)(i.zxk,{colorScheme:"gray.700",isDisabled:!(null!==_&&void 0!==_&&_.key),isLoading:I.isLoading||I.isFetching,loadingText:"Testing",onClick:F,variant:"outline",children:g}),(0,k.jsx)(i.zxk,{bg:"primary.800",color:"white",isDisabled:c,isLoading:c,loadingText:"Submitting",size:"sm",variant:"solid",type:"submit",_active:{bg:"primary.500"},_disabled:{opacity:"inherit"},_hover:{bg:"primary.400"},children:"Save"})]})]})})}})},_=t(60933),Z=function(e){var n=e.onConnectionCreated,t=e.data,i=(0,m.I0)(),a=(0,x.V)(),c=a.errorAlert,l=a.successAlert,p=(0,h.HK)().handleError,g=(0,o.useState)(!1),b=g[0],y=g[1],j=(0,s.C)(r.ZZ),C=j.connection,O=j.connectionOption,w=(0,v.pH)(),S=(0,d.Z)(w,1)[0],Z=(0,v.Du)(),P=(0,d.Z)(Z,1)[0],z=function(){var e=(0,u.Z)(f().mark((function e(a){var o,s,u,d,h;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(!0),s={access:"write",connection_type:null===O||void 0===O?void 0:O.identifier,description:a.description,disabled:!1,key:(0,_.E)(a.instance_key),name:a.name},e.next=5,S(s).unwrap();case 5:if(u=e.sent,!((null===(o=u.failed)||void 0===o?void 0:o.length)>0)){e.next=10;break}c(u.failed[0].message),e.next=16;break;case 10:return d={connection_key:u.succeeded[0].key,secrets:{}},Object.entries(t.properties).forEach((function(e){d.secrets[e[0]]=a[e[0]]})),e.next=14,P(d).unwrap();case 14:"failed"===(h=e.sent).test_status?c((0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("b",{children:"Message:"})," ",h.msg,(0,k.jsx)("br",{}),(0,k.jsx)("b",{children:"Failure Reason:"})," ",h.failure_reason]})):(i((0,r.lm)(u.succeeded[0])),l("Connector successfully ".concat(null!==C&&void 0!==C&&C.key?"updated":"added","!")),null!==C&&void 0!==C&&C.key||!n||n());case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),p(e.t0);case 21:return e.prev=21,y(!1),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[0,18,21,24]])})));return function(n){return e.apply(this,arguments)}}();return{isSubmitting:b,handleSubmit:z,connectionOption:O}},P=function(e){var n=e.data,t=e.onConnectionCreated,r=e.onTestConnectionClick,a=Z({onConnectionCreated:t,data:n}),o=a.isSubmitting,s=a.handleSubmit,c=a.connectionOption;return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(i.xuv,{color:"gray.700",fontSize:"14px",h:"80px",children:["Connect to your ",c.human_readable," environment by providing the information below. Once you have saved the form, you may test the integration to confirm that it's working correctly."]}),(0,k.jsx)(S,{data:n,defaultValues:{description:"",instance_key:"",name:""},isSubmitting:o,onSaveClick:s,onTestConnectionClick:r})]})},z={description:"",instance_key:"",name:""},D=function(e){var n=e.data,t=e.onConnectionCreated,r=e.onTestEmail,a=Z({onConnectionCreated:t,data:n}),o=a.connectionOption,s=a.isSubmitting,c=a.handleSubmit;return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(i.xuv,{color:"gray.700",fontSize:"14px",h:"80px",children:["Configure your ",o.human_readable," connector by providing the connector name, description and a test email address. Once you have saved the details, you can click test email to check the format of the email."]}),(0,k.jsx)(S,{data:n,defaultValues:z,isSubmitting:s,onSaveClick:function(e){c(e)},onTestConnectionClick:r,testButtonLabel:"Test email"})]})},I=t(14633),E=t(4141),R=t(81371),T=function(e){var n=e.defaultValues,t=e.isSubmitting,o=void 0!==t&&t,l=e.onSaveClick,u=(0,a.useRouter)(),d=(0,s.C)(r.ZZ),p=d.connection,f=d.connectionOption;return(0,k.jsx)(b.J9,{initialValues:function(){var e;null!==p&&void 0!==p&&p.key&&(n.name=null!==(e=p.name)&&void 0!==e?e:"",n.description=p.description);return n}(),onSubmit:function(e,n){l(e,n)},validateOnBlur:!1,validateOnChange:!1,validationSchema:I.Ry().shape({name:I.Z_().required("Name is required")}),children:(0,k.jsx)(b.l0,{noValidate:!0,children:(0,k.jsxs)(i.gCW,{align:"stretch",gap:"16px",children:[(0,k.jsx)(E.Z,{autoFocus:!0,disabled:!(null===p||void 0===p||!p.key),isRequired:!0,label:"Name",name:"name",placeholder:"Enter a friendly name for your new ".concat(f.human_readable," connection")}),(0,k.jsx)(E.Z,{label:"Description",name:"description",placeholder:"Enter a description for your new ".concat(f.human_readable," connection"),type:"textarea"}),(0,k.jsx)(R.h,{isSubmitting:o,onCancelClick:function(){u.push(c.JR)}})]})})})},A=function(e){var n=e.onConnectionCreated,t=(0,m.I0)(),a=(0,x.V)(),c=a.errorAlert,l=a.successAlert,p=(0,h.HK)().handleError,g=(0,o.useState)(!1),b=g[0],y=g[1],j=(0,s.C)(r.ZZ),C=j.connection,O=j.connectionOption,w=(0,v.pH)(),S=(0,d.Z)(w,1)[0],_=function(){var e=(0,u.Z)(f().mark((function e(i,a){var o,s,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(!0),s={access:"write",connection_type:null===O||void 0===O?void 0:O.identifier,description:i.description,disabled:!1,name:i.name,key:null===C||void 0===C?void 0:C.key},e.next=5,S(s).unwrap();case 5:u=e.sent,(null===(o=u.failed)||void 0===o?void 0:o.length)>0?c(u.failed[0].message):(t((0,r.lm)(u.succeeded[0])),l("Connector successfully ".concat(null!==C&&void 0!==C&&C.key?"updated":"added","!")),null!==C&&void 0!==C&&C.key||!n||n()),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),p(e.t0);case 12:return e.prev=12,y(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])})));return function(n,t){return e.apply(this,arguments)}}();return(0,k.jsxs)(i.gCW,{align:"stretch",gap:"16px",children:[(0,k.jsxs)(i.xuv,{color:"gray.700",fontSize:"14px",children:["To begin setting up your new ",O.human_readable," ","connector you must first assign a name to the connector and a description.",(0,k.jsx)("br",{}),(0,k.jsx)("br",{}),"Once you have completed this section you can then progress onto"," ",(0,k.jsx)(i.xvT,{display:"inline-block",fontWeight:"700",children:"DSR customization"})," ","using the menu on the left hand side."]}),(0,k.jsx)(T,{defaultValues:{description:"",name:""},isSubmitting:b,onSaveClick:_})]})},F=function(e){var n=e.data,t=e.onConnectionCreated,a=e.onTestConnectionClick,c=(0,m.I0)(),l=(0,x.V)(),p=l.errorAlert,g=l.successAlert,b=(0,h.HK)().handleError,y=(0,o.useState)(!1),j=y[0],C=y[1],O=(0,s.C)(r.ZZ),w=O.connection,Z=O.connectionOption,P=(0,v.pL)(),z=(0,d.Z)(P,1)[0],D=(0,v.pH)(),I=(0,d.Z)(D,1)[0],E=(0,v.Du)(),R=(0,d.Z)(E,1)[0],T=function(){var e=(0,u.Z)(f().mark((function e(i,a){var o,s,l,u,d,h,x;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,C(!0),!w){e.next=20;break}return s={access:"write",connection_type:w.connection_type,description:i.description,disabled:!1,key:w.key,name:i.name},e.next=6,I(s).unwrap();case 6:if(l=e.sent,!((null===(o=l.failed)||void 0===o?void 0:o.length)>0)){e.next=11;break}p(l.failed[0].message),e.next=18;break;case 11:return c((0,r.lm)(l.succeeded[0])),u={connection_key:w.key,secrets:{}},Object.entries(n.properties).forEach((function(e){u.secrets[e[0]]=i[e[0]]})),e.next=16,R(u).unwrap();case 16:"failed"===(d=e.sent).test_status?p((0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("b",{children:"Message:"})," ",d.msg,(0,k.jsx)("br",{}),(0,k.jsx)("b",{children:"Failure Reason:"})," ",d.failure_reason]})):g("Connector successfully updated!");case 18:e.next=28;break;case 20:return h={description:i.description,name:i.name,instance_key:(0,_.E)(i.instance_key),saas_connector_type:Z.identifier,secrets:{}},Object.entries(n.properties).forEach((function(e){h.secrets[e[0]]=i[e[0]]})),e.next=24,z(h).unwrap();case 24:x=e.sent,c((0,r.lm)(x.connection)),g("Connector successfully added!"),null===t||void 0===t||t();case 28:e.next=33;break;case 30:e.prev=30,e.t0=e.catch(0),b(e.t0);case 33:return e.prev=33,C(!1),e.finish(33);case 36:case"end":return e.stop()}}),e,null,[[0,30,33,36]])})));return function(n,t){return e.apply(this,arguments)}}();return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(i.xuv,{color:"gray.700",fontSize:"14px",h:"80px",children:["Connect to your ",Z.human_readable," environment by providing the information below. Once you have saved the form, you may test the integration to confirm that it's working correctly."]}),(0,k.jsx)(S,{data:n,defaultValues:{description:"",instance_key:"",name:""},isSubmitting:j,onSaveClick:T,onTestConnectionClick:a})]})},L=t(1326),V=function(e){var n,t,a=e.response,o=(0,s.C)(r.ZZ).connectionOption;return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(i.izJ,{color:"gray.100"}),(0,k.jsxs)(i.gCW,{align:"flex-start",mt:"16px",children:["succeeded"===(null===(n=a.data)||void 0===n?void 0:n.test_status)&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(i.Ugi,{children:[(0,k.jsxs)(i.X6q,{as:"h5",color:"gray.700",size:"xs",children:["Successfully connected to ",o.human_readable]}),(0,k.jsx)(i.Vp9,{colorScheme:"green",size:"sm",variant:"solid",children:"Success"})]}),(0,k.jsx)(i.xvT,{color:"gray.500",fontSize:"sm",mt:"12px !important",children:(0,L.p6)(a.fulfilledTimeStamp)}),(0,k.jsx)(i.xuv,{bg:"green.100",border:"1px solid",borderColor:"green.300",color:"green.700",mt:"16px",borderRadius:"6px",children:(0,k.jsxs)(i.Ugi,{alignItems:"flex-start",margin:["14px","17px","14px","17px"],children:[(0,k.jsx)(i.StI,{}),(0,k.jsxs)(i.xuv,{children:[(0,k.jsx)(i.X6q,{as:"h5",color:"green.500",fontWeight:"semibold",size:"xs",children:"Success message:"}),(0,k.jsx)(i.xvT,{color:"gray.700",fontSize:"sm",fontWeight:"400",children:a.data.msg})]})]})})]}),"failed"===(null===(t=a.data)||void 0===t?void 0:t.test_status)&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(i.Ugi,{children:[(0,k.jsxs)(i.X6q,{as:"h5",color:"gray.700",size:"xs",children:["Output error to ",o.human_readable]}),(0,k.jsx)(i.Vp9,{colorScheme:"red",size:"sm",variant:"solid",children:"Error"})]}),(0,k.jsx)(i.xvT,{color:"gray.500",fontSize:"sm",mt:"12px !important",children:(0,L.p6)(a.fulfilledTimeStamp)}),(0,k.jsx)(i.xuv,{bg:"red.50",border:"1px solid",borderColor:"red.300",color:"red.300",mt:"16px",borderRadius:"6px",children:(0,k.jsxs)(i.Ugi,{alignItems:"flex-start",margin:["14px","17px","14px","17px"],children:[(0,k.jsx)(i.f9v,{}),(0,k.jsxs)(i.xuv,{children:[(0,k.jsx)(i.X6q,{as:"h5",color:"red.500",fontWeight:"semibold",size:"xs",children:"Error message:"}),(0,k.jsx)(i.xvT,{color:"gray.700",fontSize:"sm",fontWeight:"400",children:a.data.failure_reason}),(0,k.jsx)(i.xvT,{color:"gray.700",fontSize:"sm",fontWeight:"400",children:a.data.msg})]})]})})]})]})]})},W=function(e){var n=e.onConnectionCreated,t=(0,a.useRouter)(),u=(0,s.C)(r.ZZ).connectionOption,d=u&&u.type===l.Zi.MANUAL,p=(0,r.n3)(u.identifier,{skip:d}),f=p.data,h=p.isFetching,x=p.isLoading,v=p.isSuccess,m=(0,o.useState)(),g=m[0],b=m[1],y=function(e){b(e)},j=(0,o.useCallback)((function(){t.push(c.JR)}),[t]),C=(0,o.useCallback)((function(){switch(null===u||void 0===u?void 0:u.type){case l.Zi.DATABASE:if(v&&f)return(0,k.jsx)(P,{data:f,onConnectionCreated:n,onTestConnectionClick:y});break;case l.Zi.MANUAL:return(0,k.jsx)(A,{onConnectionCreated:n});case l.Zi.SAAS:if(v&&f)return(0,k.jsx)(F,{data:f,onConnectionCreated:n,onTestConnectionClick:y});break;case l.Zi.EMAIL:if(v&&f)return(0,k.jsx)(D,{data:f,onConnectionCreated:j,onTestEmail:y})}}),[null===u||void 0===u?void 0:u.type,f,v,n,j]);return(0,k.jsxs)(i.kCb,{gap:"97px",children:[(0,k.jsxs)(i.gCW,{w:"579px",gap:"16px",align:"stretch",children:[(h||x)&&(0,k.jsx)(i.M5Y,{children:(0,k.jsx)(i.$jN,{})}),C()]}),g&&(0,k.jsxs)(i.Rg9,{in:!0,children:[" ",(0,k.jsx)(i.xuv,{mt:"16px",maxW:"528px",w:"fit-content",children:(0,k.jsx)(V,{response:g})})]})]})}},53771:function(e,n,t){t.d(n,{Z:function(){return P}});var r=t(55732),i=t(97865),a=t(90849),o=t(90089),s=t(34707),c=t.n(s),l=t(9408),u=t(64289),d=t(57928),p=t(49686),f=t(86677),h=t(27378),x=t(6848),v=t(78624),m=t(60709),g=t(45128),b=t(36653),y=t(66527),j=t(16473),k=t(40695),C=t(24246),O=function(e){var n=e.data,t=void 0===n?[]:n,r=e.isSubmitting,i=void 0!==r&&r,a=e.onSubmit,o=e.onCancel,s=e.disabled,c=(0,h.useRef)(null),l=(0,b.V)().errorAlert,u=t.length>0?y.ZP.dump(t):void 0,d=(0,h.useState)(void 0),f=d[0],x=d[1],v=(0,h.useState)(!1),m=v[0],O=v[1],w=(0,h.useState)(!u),S=w[0],_=w[1],Z=(0,p.qY0)(),P=(0,g.NR)().data,z=(0,h.useState)([]),D=z[0],I=z[1],E=function(){var e=c.current.getValue(),n=y.ZP.load(e,{json:!0});a(n),I([])};return(0,C.jsxs)(p.kCb,{gap:"97px",children:[(0,C.jsxs)(p.gCW,{align:"stretch",w:"800px",children:[(0,C.jsx)(j.M,{defaultLanguage:"yaml",defaultValue:u,height:"calc(100vh - 526px)",onChange:function(e){try{O(!0),function(e){y.ZP.load(e,{json:!0}),x(void 0)}(e),_(!(e&&""!==e.trim()))}catch(n){(0,j.F)(n)?x(n):l("Could not parse the supplied YAML")}},onMount:function(e,n){c.current=e,c.current.focus()},options:{fontFamily:"Menlo",fontSize:13,minimap:{enabled:!0},readOnly:s},theme:"light"}),(0,C.jsxs)(p.hE2,{size:"sm",children:[o?(0,C.jsx)(p.zxk,{onClick:o,children:"Cancel"}):null,(0,C.jsx)(p.zxk,{colorScheme:"primary",isDisabled:s||S||!!f||i,isLoading:i,loadingText:"Saving",onClick:function(){if(P&&P.length){var e=c.current.getValue(),n=P.filter((function(n){return e.includes("fides_key: ".concat(n.fides_key,"\n"))})).map((function(e){return e.fides_key}));if(I(n),n.length)return void Z.onOpen()}E()},type:"submit","data-testid":"save-yaml-btn",width:"fit-content",children:"Save"})]})]}),m&&(S||f)&&(0,C.jsx)(k.Z,{isEmptyState:S,yamlError:f}),(0,C.jsx)(p.cVQ,{isOpen:Z.isOpen,onClose:Z.onClose,onConfirm:function(){E(),Z.onClose()},title:"Overwrite dataset",message:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)(p.xvT,{children:["You are about to overwrite the dataset",D.length>1?"s":""," ",D.map((function(e,n){var t=n===D.length-1;return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(p.xvT,{color:"complimentary.500",as:"span",fontWeight:"bold",children:e}),t?".":", "]})}))]}),(0,C.jsx)(p.xvT,{children:"Are you sure you would like to continue?"})]})})]})},w=["children"];function S(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function _(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?S(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):S(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Z=function(e){var n=e.children,t=(0,o.Z)(e,w);return(0,C.jsx)(p.xvT,_(_({color:"gray.700",fontSize:"14px"},t),{},{children:n}))},P=function(){var e=(0,f.useRouter)(),n=(0,l.VY)(),t=n.errorAlert,a=n.successAlert,o=(0,l.HK)().handleError,s=(0,h.useState)(!1),b=s[0],y=s[1],j=(0,x.C)(u.ZZ).connection,k=(0,d.Eg)(j.key),w=k.data,S=k.isFetching,_=k.isLoading,P=k.isSuccess,z=(0,d.Lz)(),D=(0,i.Z)(z,1)[0],I=(0,g.EG)(),E=(0,i.Z)(I,1)[0],R=(0,g.NR)(),T=R.data,A=R.isLoading,F=R.error,L=(0,h.useState)(void 0),V=L[0],W=L[1];(0,h.useEffect)((function(){w&&w.items.length&&W(w.items[0].ctl_dataset.fides_key)}),[w]);var q=function(){e.push(m.JR)},N=function(){var n=(0,r.Z)(c().mark((function n(r){var i,o,s;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o={connection_key:null===j||void 0===j?void 0:j.key,dataset_pairs:r},n.next=3,D(o).unwrap();case 3:s=n.sent,(null===(i=s.failed)||void 0===i?void 0:i.length)>0?t(s.failed[0].message):a("Dataset successfully updated!"),e.push(m.JR);case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),M=function(){var e=(0,r.Z)(c().mark((function e(){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(V)try{n=V,w&&w.items.length&&(n=w.items[0].fides_key),N([{fides_key:n,ctl_dataset_fides_key:V}])}catch(t){o(t)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=(0,r.Z)(c().mark((function e(n){var r,i,a,s,l,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(!0),r=Array.isArray(n)?n:[n],e.next=5,E(r);case 5:if(!("error"in(i=e.sent))){e.next=10;break}return a=(0,v.e$)(i.error),t(a),e.abrupt("return");case 10:l=(s=r).map((function(e){return{fides_key:e.fides_key,ctl_dataset_fides_key:e.fides_key}})),w&&w.items.length&&(u=w.items,l=u.map((function(e,n){return{fides_key:e.fides_key,ctl_dataset_fides_key:s[n].fides_key}}))),N(l),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),o(e.t0);case 19:return e.prev=19,y(!1),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[0,16,19,22]])})));return function(n){return e.apply(this,arguments)}}(),Y=""!==V&&void 0!==V;if(S||_||A&&!F)return(0,C.jsx)(p.M5Y,{children:(0,C.jsx)(p.$jN,{})});var J=T&&T.length;return(0,C.jsxs)(p.gCW,{alignItems:"left",children:[F?(0,C.jsx)(Z,{mb:4,color:"red",children:"There was a problem loading existing datasets, please try again."}):null,(0,C.jsxs)(p.Ugi,{spacing:8,mb:4,children:[J?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)(p.gCW,{alignSelf:"start",mr:4,children:[(0,C.jsxs)(p.xuv,{"data-testid":"dataset-selector-section",mb:4,children:[(0,C.jsx)(Z,{mb:4,children:"Choose a dataset to associate with this connector."}),(0,C.jsx)(p.PhF,{size:"sm",width:"fit-content",placeholder:"Select",onChange:function(e){W(e.target.value)},value:V,"data-testid":"dataset-selector",children:T.map((function(e){return(0,C.jsx)("option",{value:e.fides_key,children:e.fides_key},e.fides_key)}))})]}),(0,C.jsx)(p.zxk,{size:"sm",colorScheme:"primary",alignSelf:"start",disabled:!Y,onClick:M,"data-testid":"save-dataset-link-btn",children:"Save"})]}),(0,C.jsx)(Z,{children:"or"})]}):null,(0,C.jsxs)(p.xuv,{"data-testid":"yaml-editor-section",children:[(0,C.jsx)(Z,{mb:4,children:"View your dataset YAML below!"}),P&&null!==w&&void 0!==w&&w.items?(0,C.jsx)(O,{data:w.items.map((function(e){return e.ctl_dataset})),isSubmitting:b,onSubmit:H,disabled:Y,onCancel:J?void 0:q}):null]})]}),J?(0,C.jsx)(p.zxk,{width:"fit-content",size:"sm",variant:"outline",onClick:q,children:"Cancel"}):null]})}},60933:function(e,n,t){t.d(n,{E:function(){return r},S:function(){return i}});var r=function(e){return e.toLowerCase().replace(/ /g,"_")},i=function(e,n){var t="".concat(window.location.origin+n,"&key=").concat(e);window.location.href.toLowerCase()!==t.toLowerCase()&&window.history.replaceState(null,"",t)}},81371:function(e,n,t){t.d(n,{h:function(){return a}});var r=t(49686),i=(t(27378),t(24246)),a=function(e){var n=e.isSubmitting,t=void 0!==n&&n,a=e.onCancelClick;return(0,i.jsxs)(r.hE2,{size:"sm",spacing:"8px",variant:"outline",children:[(0,i.jsx)(r.zxk,{onClick:a,variant:"outline",children:"Cancel"}),(0,i.jsx)(r.zxk,{bg:"primary.800",color:"white",isDisabled:t,isLoading:t,loadingText:"Submitting",size:"sm",variant:"solid",type:"submit",_active:{bg:"primary.500"},_disabled:{opacity:"inherit"},_hover:{bg:"primary.400"},children:"Save"})]})}},53552:function(e,n,t){t.d(n,{Z:function(){return _}});var r=t(90849),i=t(55732),a=t(97865),o=t(34707),s=t.n(o),c=t(9408),l=t(64289),u=t(57928),d=t(49686),p=t(86677),f=t(27378),h=t(6848),x=t(60709),v=t(34090),m=t(14633),g=t(43139),b=t(75523),y=t(10612),j=t(4141),k=t(81371),C=t(24246),O=function(e){var n=e.data,t=void 0===n?[]:n,r=e.isSubmitting,i=void 0!==r&&r,a=e.onSaveClick,o=(0,b.MO)().isLoading,s=(0,h.C)(y.qb),l=(0,p.useRouter)(),u=(0,c.VY)().errorAlert,f=function(){l.push(x.JR)};return o?null:(0,C.jsx)(v.J9,{enableReinitialize:!0,initialValues:{fields:t.length>0?t:[{pii_field:"",dsr_package_label:"",data_categories:[]}]},onSubmit:function(e,n){new Set(e.fields.map((function(e){return e.pii_field}))).size<e.fields.length?u("PII Field must be unique"):a(e,n)},validateOnBlur:!1,validateOnChange:!1,validationSchema:m.Ry({fields:m.IX().of(m.Ry().shape({pii_field:m.Z_().required("PII Field is required").min(1,"PII Field must have at least one character").max(200,"PII Field has a maximum of 200 characters").label("PII Field"),dsr_package_label:m.Z_().required("DSR Package Label is required").min(1,"DSR Package Label must have at least one character").max(200,"DSR Package Label has a maximum of 200 characters").label("DSR Package Label"),data_categories:m.IX(m.Z_()).label("Data Categories")}))}),children:function(e){return(0,C.jsx)(v.l0,{style:{marginTop:0},noValidate:!0,children:(0,C.jsx)(d.gCW,{align:"stretch",children:(0,C.jsx)(v.F2,{name:"fields",render:function(n){var t=e.values.fields;return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)(d.Ugi,{color:"gray.900",flex:"1",fontSize:"14px",fontWeight:"semibold",lineHeight:"20px",mb:"6px",spacing:"24px",children:[(0,C.jsx)(d.xuv,{w:"416px",children:"PII Field"}),(0,C.jsx)(d.xuv,{w:"416px",children:"DSR Package Label"}),(0,C.jsx)(d.xuv,{w:"416px",children:"Data Categories"}),(0,C.jsx)(d.xuv,{visibility:"hidden",children:(0,C.jsx)(d.lr0,{})})]}),(0,C.jsx)(d.xuv,{children:t&&t.length>0?t.map((function(e,t){return(0,C.jsxs)(d.Ugi,{mt:t>0?"12px":void 0,spacing:"24px",align:"flex-start",children:[(0,C.jsx)(d.xuv,{minH:"57px",w:"416px",children:(0,C.jsx)(j.Z,{autoFocus:0===t,displayHelpIcon:!1,isRequired:!0,name:"fields.".concat(t,".pii_field")})}),(0,C.jsx)(d.xuv,{minH:"57px",w:"416px",children:(0,C.jsx)(j.Z,{displayHelpIcon:!1,isRequired:!0,name:"fields.".concat(t,".dsr_package_label")})}),(0,C.jsx)(d.xuv,{minH:"57px",w:"416px",children:(0,C.jsx)(g.AP,{name:"fields.".concat(t,".data_categories"),options:s.map((function(e){return{value:e.fides_key,label:e.fides_key}})),isRequired:!0,isMulti:!0})}),(0,C.jsx)(d.xuv,{h:"57px",visibility:t>0?"visible":"hidden",children:(0,C.jsx)(d.lr0,{onClick:function(){return n.remove(t)},_hover:{cursor:"pointer"}})})]},t)})):null}),(0,C.jsx)(d.xvT,{color:"complimentary.500",fontWeight:"medium",fontSize:"sm",mb:"24px !important",mt:"24px !important",onClick:function(){n.push({pii_field:"",dsr_package_label:"",data_categories:[]})},_hover:{cursor:"pointer"},children:"Add new PII field"}),(0,C.jsx)(k.h,{isSubmitting:i,onCancelClick:f})]})}})})})}})};function w(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function S(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?w(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):w(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var _=function(){var e=(0,f.useRef)(!1),n=(0,p.useRouter)(),t=(0,c.VY)().successAlert,r=(0,c.HK)().handleError,o=(0,f.useState)(!1),v=o[0],m=o[1],g=(0,f.useState)([]),b=g[0],y=g[1],j=(0,h.C)(l.ZZ).connection,k=(0,u.QV)(j.key),w=k.data,_=k.isFetching,Z=k.isLoading,P=k.isSuccess,z=(0,u.jF)(),D=(0,a.Z)(z,1)[0],I=(0,u._d)(),E=(0,a.Z)(I,1)[0],R=function(){var e=(0,i.Z)(s().mark((function e(i,a){var o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,m(!0),o={connection_key:null===j||void 0===j?void 0:j.key,body:S({},i)},!(b.length>0)){e.next=8;break}return e.next=6,E(o).unwrap();case 6:e.next=10;break;case 8:return e.next=10,D(o).unwrap();case 10:t("DSR customization ".concat(b.length>0?"updated":"added","!")),n.push(x.JR),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),r(e.t0);case 17:return e.prev=17,m(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[0,14,17,20]])})));return function(n,t){return e.apply(this,arguments)}}();return(0,f.useEffect)((function(){return e.current=!0,P&&w&&y(w.fields),function(){e.current=!1}}),[w,P]),(0,C.jsxs)(d.gCW,{align:"stretch",gap:"16px",children:[(0,C.jsx)(d.xuv,{color:"gray.700",fontSize:"14px",w:"572px",children:"Customize your PII fields to create a friendly label name for your privacy request packages. This \u201cPackage Label\u201d is the label your user will see in their downloaded package."}),(_||Z)&&(0,C.jsx)(d.M5Y,{children:(0,C.jsx)(d.$jN,{})}),e.current&&!Z?(0,C.jsx)(O,{data:b,isSubmitting:v,onSaveClick:R}):null]})}}}]);